(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();function t0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ic={exports:{}},$r={};var pm;function Mg(){if(pm)return $r;pm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(l,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var g in d)g!=="key"&&(h[g]=d[g])}else h=d;return d=h.ref,{$$typeof:i,type:l,key:f,ref:d!==void 0?d:null,props:h}}return $r.Fragment=n,$r.jsx=r,$r.jsxs=r,$r}var gm;function Bg(){return gm||(gm=1,Ic.exports=Mg()),Ic.exports}var c=Bg(),$c={exports:{}},de={};var bm;function Lg(){if(bm)return de;bm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,z={};function B(N,H,$){this.props=N,this.context=H,this.refs=z,this.updater=$||j}B.prototype.isReactComponent={},B.prototype.setState=function(N,H){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,H,"setState")},B.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function X(){}X.prototype=B.prototype;function D(N,H,$){this.props=N,this.context=H,this.refs=z,this.updater=$||j}var Z=D.prototype=new X;Z.constructor=D,R(Z,B.prototype),Z.isPureReactComponent=!0;var he=Array.isArray;function M(){}var G={H:null,A:null,T:null,S:null},re=Object.prototype.hasOwnProperty;function V(N,H,$){var J=$.ref;return{$$typeof:i,type:N,key:H,ref:J!==void 0?J:null,props:$}}function Te(N,H){return V(N.type,H,N.props)}function ke(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function Ve(N){var H={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function($){return H[$]})}var Qe=/\/+/g;function tt(N,H){return typeof N=="object"&&N!==null&&N.key!=null?Ve(""+N.key):H.toString(36)}function at(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(M,M):(N.status="pending",N.then(function(H){N.status==="pending"&&(N.status="fulfilled",N.value=H)},function(H){N.status==="pending"&&(N.status="rejected",N.reason=H)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function C(N,H,$,J,P){var le=typeof N;(le==="undefined"||le==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(le){case"bigint":case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case i:case n:be=!0;break;case w:return be=N._init,C(be(N._payload),H,$,J,P)}}if(be)return P=P(N),be=J===""?"."+tt(N,0):J,he(P)?($="",be!=null&&($=be.replace(Qe,"$&/")+"/"),C(P,H,$,"",function(da){return da})):P!=null&&(ke(P)&&(P=Te(P,$+(P.key==null||N&&N.key===P.key?"":(""+P.key).replace(Qe,"$&/")+"/")+be)),H.push(P)),1;be=0;var pe=J===""?".":J+":";if(he(N))for(var Re=0;Re<N.length;Re++)J=N[Re],le=pe+tt(J,Re),be+=C(J,H,$,le,P);else if(Re=S(N),typeof Re=="function")for(N=Re.call(N),Re=0;!(J=N.next()).done;)J=J.value,le=pe+tt(J,Re++),be+=C(J,H,$,le,P);else if(le==="object"){if(typeof N.then=="function")return C(at(N),H,$,J,P);throw H=String(N),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return be}function K(N,H,$){if(N==null)return N;var J=[],P=0;return C(N,J,"","",function(le){return H.call($,le,P++)}),J}function ae(N){if(N._status===-1){var H=N._result;H=H(),H.then(function($){(N._status===0||N._status===-1)&&(N._status=1,N._result=$)},function($){(N._status===0||N._status===-1)&&(N._status=2,N._result=$)}),N._status===-1&&(N._status=0,N._result=H)}if(N._status===1)return N._result.default;throw N._result}var xe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ge={map:K,forEach:function(N,H,$){K(N,function(){H.apply(this,arguments)},$)},count:function(N){var H=0;return K(N,function(){H++}),H},toArray:function(N){return K(N,function(H){return H})||[]},only:function(N){if(!ke(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return de.Activity=v,de.Children=ge,de.Component=B,de.Fragment=r,de.Profiler=d,de.PureComponent=D,de.StrictMode=l,de.Suspense=p,de.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,de.__COMPILER_RUNTIME={__proto__:null,c:function(N){return G.H.useMemoCache(N)}},de.cache=function(N){return function(){return N.apply(null,arguments)}},de.cacheSignal=function(){return null},de.cloneElement=function(N,H,$){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var J=R({},N.props),P=N.key;if(H!=null)for(le in H.key!==void 0&&(P=""+H.key),H)!re.call(H,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&H.ref===void 0||(J[le]=H[le]);var le=arguments.length-2;if(le===1)J.children=$;else if(1<le){for(var be=Array(le),pe=0;pe<le;pe++)be[pe]=arguments[pe+2];J.children=be}return V(N.type,P,J)},de.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:h,_context:N},N},de.createElement=function(N,H,$){var J,P={},le=null;if(H!=null)for(J in H.key!==void 0&&(le=""+H.key),H)re.call(H,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(P[J]=H[J]);var be=arguments.length-2;if(be===1)P.children=$;else if(1<be){for(var pe=Array(be),Re=0;Re<be;Re++)pe[Re]=arguments[Re+2];P.children=pe}if(N&&N.defaultProps)for(J in be=N.defaultProps,be)P[J]===void 0&&(P[J]=be[J]);return V(N,le,P)},de.createRef=function(){return{current:null}},de.forwardRef=function(N){return{$$typeof:g,render:N}},de.isValidElement=ke,de.lazy=function(N){return{$$typeof:w,_payload:{_status:-1,_result:N},_init:ae}},de.memo=function(N,H){return{$$typeof:b,type:N,compare:H===void 0?null:H}},de.startTransition=function(N){var H=G.T,$={};G.T=$;try{var J=N(),P=G.S;P!==null&&P($,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(M,xe)}catch(le){xe(le)}finally{H!==null&&$.types!==null&&(H.types=$.types),G.T=H}},de.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},de.use=function(N){return G.H.use(N)},de.useActionState=function(N,H,$){return G.H.useActionState(N,H,$)},de.useCallback=function(N,H){return G.H.useCallback(N,H)},de.useContext=function(N){return G.H.useContext(N)},de.useDebugValue=function(){},de.useDeferredValue=function(N,H){return G.H.useDeferredValue(N,H)},de.useEffect=function(N,H){return G.H.useEffect(N,H)},de.useEffectEvent=function(N){return G.H.useEffectEvent(N)},de.useId=function(){return G.H.useId()},de.useImperativeHandle=function(N,H,$){return G.H.useImperativeHandle(N,H,$)},de.useInsertionEffect=function(N,H){return G.H.useInsertionEffect(N,H)},de.useLayoutEffect=function(N,H){return G.H.useLayoutEffect(N,H)},de.useMemo=function(N,H){return G.H.useMemo(N,H)},de.useOptimistic=function(N,H){return G.H.useOptimistic(N,H)},de.useReducer=function(N,H,$){return G.H.useReducer(N,H,$)},de.useRef=function(N){return G.H.useRef(N)},de.useState=function(N){return G.H.useState(N)},de.useSyncExternalStore=function(N,H,$){return G.H.useSyncExternalStore(N,H,$)},de.useTransition=function(){return G.H.useTransition()},de.version="19.2.3",de}var vm;function pu(){return vm||(vm=1,$c.exports=Lg()),$c.exports}var Y=pu();const Q=t0(Y);var Vc={exports:{}},Vr={},Gc={exports:{}},Yc={};var ym;function qg(){return ym||(ym=1,(function(i){function n(C,K){var ae=C.length;C.push(K);e:for(;0<ae;){var xe=ae-1>>>1,ge=C[xe];if(0<d(ge,K))C[xe]=K,C[ae]=ge,ae=xe;else break e}}function r(C){return C.length===0?null:C[0]}function l(C){if(C.length===0)return null;var K=C[0],ae=C.pop();if(ae!==K){C[0]=ae;e:for(var xe=0,ge=C.length,N=ge>>>1;xe<N;){var H=2*(xe+1)-1,$=C[H],J=H+1,P=C[J];if(0>d($,ae))J<ge&&0>d(P,$)?(C[xe]=P,C[J]=ae,xe=J):(C[xe]=$,C[H]=ae,xe=H);else if(J<ge&&0>d(P,ae))C[xe]=P,C[J]=ae,xe=J;else break e}}return K}function d(C,K){var ae=C.sortIndex-K.sortIndex;return ae!==0?ae:C.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var p=[],b=[],w=1,v=null,x=3,S=!1,j=!1,R=!1,z=!1,B=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function Z(C){for(var K=r(b);K!==null;){if(K.callback===null)l(b);else if(K.startTime<=C)l(b),K.sortIndex=K.expirationTime,n(p,K);else break;K=r(b)}}function he(C){if(R=!1,Z(C),!j)if(r(p)!==null)j=!0,M||(M=!0,Ve());else{var K=r(b);K!==null&&at(he,K.startTime-C)}}var M=!1,G=-1,re=5,V=-1;function Te(){return z?!0:!(i.unstable_now()-V<re)}function ke(){if(z=!1,M){var C=i.unstable_now();V=C;var K=!0;try{e:{j=!1,R&&(R=!1,X(G),G=-1),S=!0;var ae=x;try{t:{for(Z(C),v=r(p);v!==null&&!(v.expirationTime>C&&Te());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,x=v.priorityLevel;var ge=xe(v.expirationTime<=C);if(C=i.unstable_now(),typeof ge=="function"){v.callback=ge,Z(C),K=!0;break t}v===r(p)&&l(p),Z(C)}else l(p);v=r(p)}if(v!==null)K=!0;else{var N=r(b);N!==null&&at(he,N.startTime-C),K=!1}}break e}finally{v=null,x=ae,S=!1}K=void 0}}finally{K?Ve():M=!1}}}var Ve;if(typeof D=="function")Ve=function(){D(ke)};else if(typeof MessageChannel<"u"){var Qe=new MessageChannel,tt=Qe.port2;Qe.port1.onmessage=ke,Ve=function(){tt.postMessage(null)}}else Ve=function(){B(ke,0)};function at(C,K){G=B(function(){C(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(C){C.callback=null},i.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<C?Math.floor(1e3/C):5},i.unstable_getCurrentPriorityLevel=function(){return x},i.unstable_next=function(C){switch(x){case 1:case 2:case 3:var K=3;break;default:K=x}var ae=x;x=K;try{return C()}finally{x=ae}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(C,K){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var ae=x;x=C;try{return K()}finally{x=ae}},i.unstable_scheduleCallback=function(C,K,ae){var xe=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?xe+ae:xe):ae=xe,C){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=ae+ge,C={id:w++,callback:K,priorityLevel:C,startTime:ae,expirationTime:ge,sortIndex:-1},ae>xe?(C.sortIndex=ae,n(b,C),r(p)===null&&C===r(b)&&(R?(X(G),G=-1):R=!0,at(he,ae-xe))):(C.sortIndex=ge,n(p,C),j||S||(j=!0,M||(M=!0,Ve()))),C},i.unstable_shouldYield=Te,i.unstable_wrapCallback=function(C){var K=x;return function(){var ae=x;x=K;try{return C.apply(this,arguments)}finally{x=ae}}}})(Yc)),Yc}var xm;function Hg(){return xm||(xm=1,Gc.exports=qg()),Gc.exports}var Kc={exports:{}},bt={};var wm;function Ig(){if(wm)return bt;wm=1;var i=pu();function n(p){var b="https://react.dev/errors/"+p;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)b+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+p+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(p,b,w){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:v==null?null:""+v,children:p,containerInfo:b,implementation:w}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,b){if(p==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,bt.createPortal=function(p,b){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(n(299));return h(p,b,null,w)},bt.flushSync=function(p){var b=f.T,w=l.p;try{if(f.T=null,l.p=2,p)return p()}finally{f.T=b,l.p=w,l.d.f()}},bt.preconnect=function(p,b){typeof p=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,l.d.C(p,b))},bt.prefetchDNS=function(p){typeof p=="string"&&l.d.D(p)},bt.preinit=function(p,b){if(typeof p=="string"&&b&&typeof b.as=="string"){var w=b.as,v=g(w,b.crossOrigin),x=typeof b.integrity=="string"?b.integrity:void 0,S=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;w==="style"?l.d.S(p,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:S}):w==="script"&&l.d.X(p,{crossOrigin:v,integrity:x,fetchPriority:S,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},bt.preinitModule=function(p,b){if(typeof p=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var w=g(b.as,b.crossOrigin);l.d.M(p,{crossOrigin:w,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&l.d.M(p)},bt.preload=function(p,b){if(typeof p=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var w=b.as,v=g(w,b.crossOrigin);l.d.L(p,w,{crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},bt.preloadModule=function(p,b){if(typeof p=="string")if(b){var w=g(b.as,b.crossOrigin);l.d.m(p,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:w,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else l.d.m(p)},bt.requestFormReset=function(p){l.d.r(p)},bt.unstable_batchedUpdates=function(p,b){return p(b)},bt.useFormState=function(p,b,w){return f.H.useFormState(p,b,w)},bt.useFormStatus=function(){return f.H.useHostTransitionStatus()},bt.version="19.2.3",bt}var _m;function a0(){if(_m)return Kc.exports;_m=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Kc.exports=Ig(),Kc.exports}var Sm;function $g(){if(Sm)return Vr;Sm=1;var i=Hg(),n=pu(),r=a0();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(h(e)!==e)throw Error(l(188))}function b(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,s=t;;){var o=a.return;if(o===null)break;var u=o.alternate;if(u===null){if(s=o.return,s!==null){a=s;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===a)return p(o),e;if(u===s)return p(o),t;u=u.sibling}throw Error(l(188))}if(a.return!==s.return)a=o,s=u;else{for(var m=!1,y=o.child;y;){if(y===a){m=!0,a=o,s=u;break}if(y===s){m=!0,s=o,a=u;break}y=y.sibling}if(!m){for(y=u.child;y;){if(y===a){m=!0,a=u,s=o;break}if(y===s){m=!0,s=u,a=o;break}y=y.sibling}if(!m)throw Error(l(189))}}if(a.alternate!==s)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function w(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=w(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),D=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Te=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function Ve(e){return e===null||typeof e!="object"?null:(e=ke&&e[ke]||e["@@iterator"],typeof e=="function"?e:null)}var Qe=Symbol.for("react.client.reference");function tt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case B:return"Profiler";case z:return"StrictMode";case he:return"Suspense";case M:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case j:return"Portal";case D:return e.displayName||"Context";case X:return(e._context.displayName||"Context")+".Consumer";case Z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:tt(e.type)||"Memo";case re:t=e._payload,e=e._init;try{return tt(e(t))}catch{}}return null}var at=Array.isArray,C=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},xe=[],ge=-1;function N(e){return{current:e}}function H(e){0>ge||(e.current=xe[ge],xe[ge]=null,ge--)}function $(e,t){ge++,xe[ge]=e.current,e.current=t}var J=N(null),P=N(null),le=N(null),be=N(null);function pe(e,t){switch($(le,t),$(P,e),$(J,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Lf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Lf(t),e=qf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(J),$(J,e)}function Re(){H(J),H(P),H(le)}function da(e){e.memoizedState!==null&&$(be,e);var t=J.current,a=qf(t,e.type);t!==a&&($(P,e),$(J,a))}function xa(e){P.current===e&&(H(J),H(P)),be.current===e&&(H(be),Lr._currentValue=ae)}var ha,ei;function aa(e){if(ha===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ha=t&&t[1]||"",ei=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ha+e+ei}var Xs=!1;function Jn(e,t){if(!e||Xs)return"";Xs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(U){var O=U}Reflect.construct(e,[],I)}else{try{I.call()}catch(U){O=U}e.call(I.prototype)}}else{try{throw Error()}catch(U){O=U}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(U){if(U&&O&&typeof U.stack=="string")return[U.stack,O.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),m=u[0],y=u[1];if(m&&y){var _=m.split(`
`),A=y.split(`
`);for(o=s=0;s<_.length&&!_[s].includes("DetermineComponentFrameRoot");)s++;for(;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;if(s===_.length||o===A.length)for(s=_.length-1,o=A.length-1;1<=s&&0<=o&&_[s]!==A[o];)o--;for(;1<=s&&0<=o;s--,o--)if(_[s]!==A[o]){if(s!==1||o!==1)do if(s--,o--,0>o||_[s]!==A[o]){var L=`
`+_[s].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=s&&0<=o);break}}}finally{Xs=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?aa(a):""}function yn(e,t){switch(e.tag){case 26:case 27:case 5:return aa(e.type);case 16:return aa("Lazy");case 13:return e.child!==t&&t!==null?aa("Suspense Fallback"):aa("Suspense");case 19:return aa("SuspenseList");case 0:case 15:return Jn(e.type,!1);case 11:return Jn(e.type.render,!1);case 1:return Jn(e.type,!0);case 31:return aa("Activity");default:return""}}function Js(e){try{var t="",a=null;do t+=yn(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var zt=Object.prototype.hasOwnProperty,Qs=i.unstable_scheduleCallback,Zs=i.unstable_cancelCallback,xt=i.unstable_shouldYield,Va=i.unstable_requestPaint,wt=i.unstable_now,kl=i.unstable_getCurrentPriorityLevel,xn=i.unstable_ImmediatePriority,ti=i.unstable_UserBlockingPriority,wn=i.unstable_NormalPriority,Ps=i.unstable_LowPriority,wa=i.unstable_IdlePriority,ai=i.log,Ga=i.unstable_setDisableYieldValue,_n=null,_t=null;function na(e){if(typeof ai=="function"&&Ga(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(_n,e)}catch{}}var pt=Math.clz32?Math.clz32:fa,Al=Math.log,Ws=Math.LN2;function fa(e){return e>>>=0,e===0?32:31-(Al(e)/Ws|0)|0}var Qn=256,Zn=262144,Sn=4194304;function ma(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ue(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var o=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var y=s&134217727;return y!==0?(s=y&~u,s!==0?o=ma(s):(m&=y,m!==0?o=ma(m):a||(a=y&~e,a!==0&&(o=ma(a))))):(y=s&~u,y!==0?o=ma(y):m!==0?o=ma(m):a||(a=s&~e,a!==0&&(o=ma(a)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:o}function qe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function rt(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gt(){var e=Sn;return Sn<<=1,(Sn&62914560)===0&&(Sn=4194304),e}function Ya(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Ie(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jt(e,t,a,s,o,u){var m=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,_=e.expirationTimes,A=e.hiddenUpdates;for(a=m&~a;0<a;){var L=31-pt(a),I=1<<L;y[L]=0,_[L]=-1;var O=A[L];if(O!==null)for(A[L]=null,L=0;L<O.length;L++){var U=O[L];U!==null&&(U.lane&=-536870913)}a&=~I}s!==0&&jn(e,s,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~t))}function jn(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-pt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function Nt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-pt(a),o=1<<s;o&t|e[s]&t&&(e[s]|=t),a&=~o}}function Et(e,t){var a=t&-t;return a=(a&42)!==0?1:Pn(a),(a&(e.suspendedLanes|t))!==0?0:a}function Pn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ol(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:om(e.type))}function Su(e,t){var a=K.p;try{return K.p=e,t()}finally{K.p=a}}var Ka=Math.random().toString(36).slice(2),ot="__reactFiber$"+Ka,Tt="__reactProps$"+Ka,Wn="__reactContainer$"+Ka,Rl="__reactEvents$"+Ka,N0="__reactListeners$"+Ka,E0="__reactHandles$"+Ka,ju="__reactResources$"+Ka,Fs="__reactMarker$"+Ka;function Cl(e){delete e[ot],delete e[Tt],delete e[Rl],delete e[N0],delete e[E0]}function Fn(e){var t=e[ot];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Wn]||a[ot]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Kf(e);e!==null;){if(a=e[ot])return a;e=Kf(e)}return t}e=a,a=e.parentNode}return null}function es(e){if(e=e[ot]||e[Wn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function er(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function ts(e){var t=e[ju];return t||(t=e[ju]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function it(e){e[Fs]=!0}var Nu=new Set,Eu={};function Nn(e,t){as(e,t),as(e+"Capture",t)}function as(e,t){for(Eu[e]=t,e=0;e<t.length;e++)Nu.add(t[e])}var T0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tu={},ku={};function k0(e){return zt.call(ku,e)?!0:zt.call(Tu,e)?!1:T0.test(e)?ku[e]=!0:(Tu[e]=!0,!1)}function ni(e,t,a){if(k0(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function si(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function _a(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Kt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Au(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function A0(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(m){a=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(m){a=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ul(e){if(!e._valueTracker){var t=Au(e)?"checked":"value";e._valueTracker=A0(e,t,""+e[t])}}function Ou(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Au(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function ri(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var O0=/[\n"\\]/g;function Xt(e){return e.replace(O0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Dl(e,t,a,s,o,u,m,y){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Kt(t)):e.value!==""+Kt(t)&&(e.value=""+Kt(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?zl(e,m,Kt(t)):a!=null?zl(e,m,Kt(a)):s!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Kt(y):e.removeAttribute("name")}function Ru(e,t,a,s,o,u,m,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Ul(e);return}a=a!=null?""+Kt(a):"",t=t!=null?""+Kt(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}s=s??o,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=y?e.checked:!!s,e.defaultChecked=!!s,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Ul(e)}function zl(e,t,a){t==="number"&&ri(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ns(e,t,a,s){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Kt(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Cu(e,t,a){if(t!=null&&(t=""+Kt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Kt(a):""}function Uu(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(l(92));if(at(s)){if(1<s.length)throw Error(l(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Kt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),Ul(e)}function ss(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var R0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Du(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||R0.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function zu(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var o in t)s=t[o],t.hasOwnProperty(o)&&a[o]!==s&&Du(e,o,s)}else for(var u in t)t.hasOwnProperty(u)&&Du(e,u,t[u])}function Ml(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),U0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ii(e){return U0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Sa(){}var Bl=null;function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rs=null,is=null;function Mu(e){var t=es(e);if(t&&(e=t.stateNode)){var a=e[Tt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Dl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Xt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var o=s[Tt]||null;if(!o)throw Error(l(90));Dl(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Ou(s)}break e;case"textarea":Cu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ns(e,!!a.multiple,t,!1)}}}var ql=!1;function Bu(e,t,a){if(ql)return e(t,a);ql=!0;try{var s=e(t);return s}finally{if(ql=!1,(rs!==null||is!==null)&&(Xi(),rs&&(t=rs,e=is,is=rs=null,Mu(t),e)))for(t=0;t<e.length;t++)Mu(e[t])}}function tr(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Tt]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hl=!1;if(ja)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Hl=!1}var Xa=null,Il=null,li=null;function Lu(){if(li)return li;var e,t=Il,a=t.length,s,o="value"in Xa?Xa.value:Xa.textContent,u=o.length;for(e=0;e<a&&t[e]===o[e];e++);var m=a-e;for(s=1;s<=m&&t[a-s]===o[u-s];s++);return li=o.slice(e,1<s?1-s:void 0)}function oi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ci(){return!0}function qu(){return!1}function kt(e){function t(a,s,o,u,m){this._reactName=a,this._targetInst=o,this.type=s,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ci:qu,this.isPropagationStopped=qu,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ci)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ci)},persist:function(){},isPersistent:ci}),t}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ui=kt(En),nr=v({},En,{view:0,detail:0}),D0=kt(nr),$l,Vl,sr,di=v({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&e.type==="mousemove"?($l=e.screenX-sr.screenX,Vl=e.screenY-sr.screenY):Vl=$l=0,sr=e),$l)},movementY:function(e){return"movementY"in e?e.movementY:Vl}}),Hu=kt(di),z0=v({},di,{dataTransfer:0}),M0=kt(z0),B0=v({},nr,{relatedTarget:0}),Gl=kt(B0),L0=v({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),q0=kt(L0),H0=v({},En,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),I0=kt(H0),$0=v({},En,{data:0}),Iu=kt($0),V0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Y0[e])?!!t[e]:!1}function Yl(){return K0}var X0=v({},nr,{key:function(e){if(e.key){var t=V0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?G0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(e){return e.type==="keypress"?oi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J0=kt(X0),Q0=v({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$u=kt(Q0),Z0=v({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),P0=kt(Z0),W0=v({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),F0=kt(W0),ep=v({},di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tp=kt(ep),ap=v({},En,{newState:0,oldState:0}),np=kt(ap),sp=[9,13,27,32],Kl=ja&&"CompositionEvent"in window,rr=null;ja&&"documentMode"in document&&(rr=document.documentMode);var rp=ja&&"TextEvent"in window&&!rr,Vu=ja&&(!Kl||rr&&8<rr&&11>=rr),Gu=" ",Yu=!1;function Ku(e,t){switch(e){case"keyup":return sp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ls=!1;function ip(e,t){switch(e){case"compositionend":return Xu(t);case"keypress":return t.which!==32?null:(Yu=!0,Gu);case"textInput":return e=t.data,e===Gu&&Yu?null:e;default:return null}}function lp(e,t){if(ls)return e==="compositionend"||!Kl&&Ku(e,t)?(e=Lu(),li=Il=Xa=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vu&&t.locale!=="ko"?null:t.data;default:return null}}var op={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ju(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!op[e.type]:t==="textarea"}function Qu(e,t,a,s){rs?is?is.push(s):is=[s]:rs=s,t=el(t,"onChange"),0<t.length&&(a=new ui("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var ir=null,lr=null;function cp(e){Cf(e,0)}function hi(e){var t=er(e);if(Ou(t))return e}function Zu(e,t){if(e==="change")return t}var Pu=!1;if(ja){var Xl;if(ja){var Jl="oninput"in document;if(!Jl){var Wu=document.createElement("div");Wu.setAttribute("oninput","return;"),Jl=typeof Wu.oninput=="function"}Xl=Jl}else Xl=!1;Pu=Xl&&(!document.documentMode||9<document.documentMode)}function Fu(){ir&&(ir.detachEvent("onpropertychange",ed),lr=ir=null)}function ed(e){if(e.propertyName==="value"&&hi(lr)){var t=[];Qu(t,lr,e,Ll(e)),Bu(cp,t)}}function up(e,t,a){e==="focusin"?(Fu(),ir=t,lr=a,ir.attachEvent("onpropertychange",ed)):e==="focusout"&&Fu()}function dp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hi(lr)}function hp(e,t){if(e==="click")return hi(t)}function fp(e,t){if(e==="input"||e==="change")return hi(t)}function mp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:mp;function or(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var o=a[s];if(!zt.call(t,o)||!Mt(e[o],t[o]))return!1}return!0}function td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ad(e,t){var a=td(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=td(a)}}function nd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ri(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=ri(e.document)}return t}function Ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var pp=ja&&"documentMode"in document&&11>=document.documentMode,os=null,Zl=null,cr=null,Pl=!1;function rd(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Pl||os==null||os!==ri(s)||(s=os,"selectionStart"in s&&Ql(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cr&&or(cr,s)||(cr=s,s=el(Zl,"onSelect"),0<s.length&&(t=new ui("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=os)))}function Tn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var cs={animationend:Tn("Animation","AnimationEnd"),animationiteration:Tn("Animation","AnimationIteration"),animationstart:Tn("Animation","AnimationStart"),transitionrun:Tn("Transition","TransitionRun"),transitionstart:Tn("Transition","TransitionStart"),transitioncancel:Tn("Transition","TransitionCancel"),transitionend:Tn("Transition","TransitionEnd")},Wl={},id={};ja&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function kn(e){if(Wl[e])return Wl[e];if(!cs[e])return e;var t=cs[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in id)return Wl[e]=t[a];return e}var ld=kn("animationend"),od=kn("animationiteration"),cd=kn("animationstart"),gp=kn("transitionrun"),bp=kn("transitionstart"),vp=kn("transitioncancel"),ud=kn("transitionend"),dd=new Map,Fl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fl.push("scrollEnd");function ra(e,t){dd.set(e,t),Nn(t,[e])}var fi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Jt=[],us=0,eo=0;function mi(){for(var e=us,t=eo=us=0;t<e;){var a=Jt[t];Jt[t++]=null;var s=Jt[t];Jt[t++]=null;var o=Jt[t];Jt[t++]=null;var u=Jt[t];if(Jt[t++]=null,s!==null&&o!==null){var m=s.pending;m===null?o.next=o:(o.next=m.next,m.next=o),s.pending=o}u!==0&&hd(a,o,u)}}function pi(e,t,a,s){Jt[us++]=e,Jt[us++]=t,Jt[us++]=a,Jt[us++]=s,eo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function to(e,t,a,s){return pi(e,t,a,s),gi(e)}function An(e,t){return pi(e,null,null,t),gi(e)}function hd(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var o=!1,u=e.return;u!==null;)u.childLanes|=a,s=u.alternate,s!==null&&(s.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-pt(a),e=u.hiddenUpdates,s=e[o],s===null?e[o]=[t]:s.push(t),t.lane=a|536870912),u):null}function gi(e){if(50<Rr)throw Rr=0,dc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ds={};function yp(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,a,s){return new yp(e,t,a,s)}function ao(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Na(e,t){var a=e.alternate;return a===null?(a=Bt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function fd(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function bi(e,t,a,s,o,u){var m=0;if(s=e,typeof e=="function")ao(e)&&(m=1);else if(typeof e=="string")m=jg(e,a,J.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=Bt(31,a,t,o),e.elementType=V,e.lanes=u,e;case R:return On(a.children,o,u,t);case z:m=8,o|=24;break;case B:return e=Bt(12,a,t,o|2),e.elementType=B,e.lanes=u,e;case he:return e=Bt(13,a,t,o),e.elementType=he,e.lanes=u,e;case M:return e=Bt(19,a,t,o),e.elementType=M,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case D:m=10;break e;case X:m=9;break e;case Z:m=11;break e;case G:m=14;break e;case re:m=16,s=null;break e}m=29,a=Error(l(130,e===null?"null":typeof e,"")),s=null}return t=Bt(m,a,t,o),t.elementType=e,t.type=s,t.lanes=u,t}function On(e,t,a,s){return e=Bt(7,e,s,t),e.lanes=a,e}function no(e,t,a){return e=Bt(6,e,null,t),e.lanes=a,e}function md(e){var t=Bt(18,null,null,0);return t.stateNode=e,t}function so(e,t,a){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var pd=new WeakMap;function Qt(e,t){if(typeof e=="object"&&e!==null){var a=pd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Js(t)},pd.set(e,t),t)}return{value:e,source:t,stack:Js(t)}}var hs=[],fs=0,vi=null,ur=0,Zt=[],Pt=0,Ja=null,pa=1,ga="";function Ea(e,t){hs[fs++]=ur,hs[fs++]=vi,vi=e,ur=t}function gd(e,t,a){Zt[Pt++]=pa,Zt[Pt++]=ga,Zt[Pt++]=Ja,Ja=e;var s=pa;e=ga;var o=32-pt(s)-1;s&=~(1<<o),a+=1;var u=32-pt(t)+o;if(30<u){var m=o-o%5;u=(s&(1<<m)-1).toString(32),s>>=m,o-=m,pa=1<<32-pt(t)+o|a<<o|s,ga=u+e}else pa=1<<u|a<<o|s,ga=e}function ro(e){e.return!==null&&(Ea(e,1),gd(e,1,0))}function io(e){for(;e===vi;)vi=hs[--fs],hs[fs]=null,ur=hs[--fs],hs[fs]=null;for(;e===Ja;)Ja=Zt[--Pt],Zt[Pt]=null,ga=Zt[--Pt],Zt[Pt]=null,pa=Zt[--Pt],Zt[Pt]=null}function bd(e,t){Zt[Pt++]=pa,Zt[Pt++]=ga,Zt[Pt++]=Ja,pa=t.id,ga=t.overflow,Ja=e}var ct=null,Be=null,Se=!1,Qa=null,Wt=!1,lo=Error(l(519));function Za(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dr(Qt(t,e)),lo}function vd(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[ot]=e,t[Tt]=s,a){case"dialog":ye("cancel",t),ye("close",t);break;case"iframe":case"object":case"embed":ye("load",t);break;case"video":case"audio":for(a=0;a<Ur.length;a++)ye(Ur[a],t);break;case"source":ye("error",t);break;case"img":case"image":case"link":ye("error",t),ye("load",t);break;case"details":ye("toggle",t);break;case"input":ye("invalid",t),Ru(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ye("invalid",t);break;case"textarea":ye("invalid",t),Uu(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Mf(t.textContent,a)?(s.popover!=null&&(ye("beforetoggle",t),ye("toggle",t)),s.onScroll!=null&&ye("scroll",t),s.onScrollEnd!=null&&ye("scrollend",t),s.onClick!=null&&(t.onclick=Sa),t=!0):t=!1,t||Za(e,!0)}function yd(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 31:case 13:Wt=!1;return;case 27:case 3:Wt=!0;return;default:ct=ct.return}}function ms(e){if(e!==ct)return!1;if(!Se)return yd(e),Se=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ec(e.type,e.memoizedProps)),a=!a),a&&Be&&Za(e),yd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Be=Yf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));Be=Yf(e)}else t===27?(t=Be,dn(e.type)?(e=Rc,Rc=null,Be=e):Be=t):Be=ct?ea(e.stateNode.nextSibling):null;return!0}function Rn(){Be=ct=null,Se=!1}function oo(){var e=Qa;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),Qa=null),e}function dr(e){Qa===null?Qa=[e]:Qa.push(e)}var co=N(null),Cn=null,Ta=null;function Pa(e,t,a){$(co,t._currentValue),t._currentValue=a}function ka(e){e._currentValue=co.current,H(co)}function uo(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function ho(e,t,a,s){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var m=o.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=o;for(var _=0;_<t.length;_++)if(y.context===t[_]){u.lanes|=a,y=u.alternate,y!==null&&(y.lanes|=a),uo(u.return,a,e),s||(m=null);break e}u=y.next}}else if(o.tag===18){if(m=o.return,m===null)throw Error(l(341));m.lanes|=a,u=m.alternate,u!==null&&(u.lanes|=a),uo(m,a,e),m=null}else m=o.child;if(m!==null)m.return=o;else for(m=o;m!==null;){if(m===e){m=null;break}if(o=m.sibling,o!==null){o.return=m.return,m=o;break}m=m.return}o=m}}function ps(e,t,a,s){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var m=o.alternate;if(m===null)throw Error(l(387));if(m=m.memoizedProps,m!==null){var y=o.type;Mt(o.pendingProps.value,m.value)||(e!==null?e.push(y):e=[y])}}else if(o===be.current){if(m=o.alternate,m===null)throw Error(l(387));m.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Lr):e=[Lr])}o=o.return}e!==null&&ho(t,e,a,s),t.flags|=262144}function yi(e){for(e=e.firstContext;e!==null;){if(!Mt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Un(e){Cn=e,Ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ut(e){return xd(Cn,e)}function xi(e,t){return Cn===null&&Un(e),xd(e,t)}function xd(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ta===null){if(e===null)throw Error(l(308));Ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ta=Ta.next=t;return a}var xp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},wp=i.unstable_scheduleCallback,_p=i.unstable_NormalPriority,Ze={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fo(){return{controller:new xp,data:new Map,refCount:0}}function hr(e){e.refCount--,e.refCount===0&&wp(_p,function(){e.controller.abort()})}var fr=null,mo=0,gs=0,bs=null;function Sp(e,t){if(fr===null){var a=fr=[];mo=0,gs=bc(),bs={status:"pending",value:void 0,then:function(s){a.push(s)}}}return mo++,t.then(wd,wd),t}function wd(){if(--mo===0&&fr!==null){bs!==null&&(bs.status="fulfilled");var e=fr;fr=null,gs=0,bs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jp(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(s.status="rejected",s.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),s}var _d=C.S;C.S=function(e,t){rf=wt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Sp(e,t),_d!==null&&_d(e,t)};var Dn=N(null);function po(){var e=Dn.current;return e!==null?e:ze.pooledCache}function wi(e,t){t===null?$(Dn,Dn.current):$(Dn,t.pool)}function Sd(){var e=po();return e===null?null:{parent:Ze._currentValue,pool:e}}var vs=Error(l(460)),go=Error(l(474)),_i=Error(l(542)),Si={then:function(){}};function jd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Nd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Sa,Sa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Td(e),e;default:if(typeof t.status=="string")t.then(Sa,Sa);else{if(e=ze,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=s}},function(s){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Td(e),e}throw Mn=t,vs}}function zn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Mn=a,vs):a}}var Mn=null;function Ed(){if(Mn===null)throw Error(l(459));var e=Mn;return Mn=null,e}function Td(e){if(e===vs||e===_i)throw Error(l(483))}var ys=null,mr=0;function ji(e){var t=mr;return mr+=1,ys===null&&(ys=[]),Nd(ys,e,t)}function pr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ni(e,t){throw t.$$typeof===x?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function kd(e){function t(T,E){if(e){var k=T.deletions;k===null?(T.deletions=[E],T.flags|=16):k.push(E)}}function a(T,E){if(!e)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function s(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function o(T,E){return T=Na(T,E),T.index=0,T.sibling=null,T}function u(T,E,k){return T.index=k,e?(k=T.alternate,k!==null?(k=k.index,k<E?(T.flags|=67108866,E):k):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function m(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function y(T,E,k,q){return E===null||E.tag!==6?(E=no(k,T.mode,q),E.return=T,E):(E=o(E,k),E.return=T,E)}function _(T,E,k,q){var ne=k.type;return ne===R?L(T,E,k.props.children,q,k.key):E!==null&&(E.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===re&&zn(ne)===E.type)?(E=o(E,k.props),pr(E,k),E.return=T,E):(E=bi(k.type,k.key,k.props,null,T.mode,q),pr(E,k),E.return=T,E)}function A(T,E,k,q){return E===null||E.tag!==4||E.stateNode.containerInfo!==k.containerInfo||E.stateNode.implementation!==k.implementation?(E=so(k,T.mode,q),E.return=T,E):(E=o(E,k.children||[]),E.return=T,E)}function L(T,E,k,q,ne){return E===null||E.tag!==7?(E=On(k,T.mode,q,ne),E.return=T,E):(E=o(E,k),E.return=T,E)}function I(T,E,k){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=no(""+E,T.mode,k),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case S:return k=bi(E.type,E.key,E.props,null,T.mode,k),pr(k,E),k.return=T,k;case j:return E=so(E,T.mode,k),E.return=T,E;case re:return E=zn(E),I(T,E,k)}if(at(E)||Ve(E))return E=On(E,T.mode,k,null),E.return=T,E;if(typeof E.then=="function")return I(T,ji(E),k);if(E.$$typeof===D)return I(T,xi(T,E),k);Ni(T,E)}return null}function O(T,E,k,q){var ne=E!==null?E.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ne!==null?null:y(T,E,""+k,q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S:return k.key===ne?_(T,E,k,q):null;case j:return k.key===ne?A(T,E,k,q):null;case re:return k=zn(k),O(T,E,k,q)}if(at(k)||Ve(k))return ne!==null?null:L(T,E,k,q,null);if(typeof k.then=="function")return O(T,E,ji(k),q);if(k.$$typeof===D)return O(T,E,xi(T,k),q);Ni(T,k)}return null}function U(T,E,k,q,ne){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return T=T.get(k)||null,y(E,T,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return T=T.get(q.key===null?k:q.key)||null,_(E,T,q,ne);case j:return T=T.get(q.key===null?k:q.key)||null,A(E,T,q,ne);case re:return q=zn(q),U(T,E,k,q,ne)}if(at(q)||Ve(q))return T=T.get(k)||null,L(E,T,q,ne,null);if(typeof q.then=="function")return U(T,E,k,ji(q),ne);if(q.$$typeof===D)return U(T,E,k,xi(E,q),ne);Ni(E,q)}return null}function W(T,E,k,q){for(var ne=null,je=null,ee=E,me=E=0,_e=null;ee!==null&&me<k.length;me++){ee.index>me?(_e=ee,ee=null):_e=ee.sibling;var Ne=O(T,ee,k[me],q);if(Ne===null){ee===null&&(ee=_e);break}e&&ee&&Ne.alternate===null&&t(T,ee),E=u(Ne,E,me),je===null?ne=Ne:je.sibling=Ne,je=Ne,ee=_e}if(me===k.length)return a(T,ee),Se&&Ea(T,me),ne;if(ee===null){for(;me<k.length;me++)ee=I(T,k[me],q),ee!==null&&(E=u(ee,E,me),je===null?ne=ee:je.sibling=ee,je=ee);return Se&&Ea(T,me),ne}for(ee=s(ee);me<k.length;me++)_e=U(ee,T,me,k[me],q),_e!==null&&(e&&_e.alternate!==null&&ee.delete(_e.key===null?me:_e.key),E=u(_e,E,me),je===null?ne=_e:je.sibling=_e,je=_e);return e&&ee.forEach(function(gn){return t(T,gn)}),Se&&Ea(T,me),ne}function ie(T,E,k,q){if(k==null)throw Error(l(151));for(var ne=null,je=null,ee=E,me=E=0,_e=null,Ne=k.next();ee!==null&&!Ne.done;me++,Ne=k.next()){ee.index>me?(_e=ee,ee=null):_e=ee.sibling;var gn=O(T,ee,Ne.value,q);if(gn===null){ee===null&&(ee=_e);break}e&&ee&&gn.alternate===null&&t(T,ee),E=u(gn,E,me),je===null?ne=gn:je.sibling=gn,je=gn,ee=_e}if(Ne.done)return a(T,ee),Se&&Ea(T,me),ne;if(ee===null){for(;!Ne.done;me++,Ne=k.next())Ne=I(T,Ne.value,q),Ne!==null&&(E=u(Ne,E,me),je===null?ne=Ne:je.sibling=Ne,je=Ne);return Se&&Ea(T,me),ne}for(ee=s(ee);!Ne.done;me++,Ne=k.next())Ne=U(ee,T,me,Ne.value,q),Ne!==null&&(e&&Ne.alternate!==null&&ee.delete(Ne.key===null?me:Ne.key),E=u(Ne,E,me),je===null?ne=Ne:je.sibling=Ne,je=Ne);return e&&ee.forEach(function(zg){return t(T,zg)}),Se&&Ea(T,me),ne}function De(T,E,k,q){if(typeof k=="object"&&k!==null&&k.type===R&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case S:e:{for(var ne=k.key;E!==null;){if(E.key===ne){if(ne=k.type,ne===R){if(E.tag===7){a(T,E.sibling),q=o(E,k.props.children),q.return=T,T=q;break e}}else if(E.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===re&&zn(ne)===E.type){a(T,E.sibling),q=o(E,k.props),pr(q,k),q.return=T,T=q;break e}a(T,E);break}else t(T,E);E=E.sibling}k.type===R?(q=On(k.props.children,T.mode,q,k.key),q.return=T,T=q):(q=bi(k.type,k.key,k.props,null,T.mode,q),pr(q,k),q.return=T,T=q)}return m(T);case j:e:{for(ne=k.key;E!==null;){if(E.key===ne)if(E.tag===4&&E.stateNode.containerInfo===k.containerInfo&&E.stateNode.implementation===k.implementation){a(T,E.sibling),q=o(E,k.children||[]),q.return=T,T=q;break e}else{a(T,E);break}else t(T,E);E=E.sibling}q=so(k,T.mode,q),q.return=T,T=q}return m(T);case re:return k=zn(k),De(T,E,k,q)}if(at(k))return W(T,E,k,q);if(Ve(k)){if(ne=Ve(k),typeof ne!="function")throw Error(l(150));return k=ne.call(k),ie(T,E,k,q)}if(typeof k.then=="function")return De(T,E,ji(k),q);if(k.$$typeof===D)return De(T,E,xi(T,k),q);Ni(T,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,E!==null&&E.tag===6?(a(T,E.sibling),q=o(E,k),q.return=T,T=q):(a(T,E),q=no(k,T.mode,q),q.return=T,T=q),m(T)):a(T,E)}return function(T,E,k,q){try{mr=0;var ne=De(T,E,k,q);return ys=null,ne}catch(ee){if(ee===vs||ee===_i)throw ee;var je=Bt(29,ee,null,T.mode);return je.lanes=q,je.return=T,je}}}var Bn=kd(!0),Ad=kd(!1),Wa=!1;function bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function en(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ee&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,t=gi(e),hd(e,null,a),t}return pi(e,s,t,a),gi(e)}function gr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Nt(e,a)}}function yo(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var o=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?o=u=m:u=u.next=m,a=a.next}while(a!==null);u===null?o=u=t:u=u.next=t}else o=u=t;a={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var xo=!1;function br(){if(xo){var e=bs;if(e!==null)throw e}}function vr(e,t,a,s){xo=!1;var o=e.updateQueue;Wa=!1;var u=o.firstBaseUpdate,m=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var _=y,A=_.next;_.next=null,m===null?u=A:m.next=A,m=_;var L=e.alternate;L!==null&&(L=L.updateQueue,y=L.lastBaseUpdate,y!==m&&(y===null?L.firstBaseUpdate=A:y.next=A,L.lastBaseUpdate=_))}if(u!==null){var I=o.baseState;m=0,L=A=_=null,y=u;do{var O=y.lane&-536870913,U=O!==y.lane;if(U?(we&O)===O:(s&O)===O){O!==0&&O===gs&&(xo=!0),L!==null&&(L=L.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var W=e,ie=y;O=t;var De=a;switch(ie.tag){case 1:if(W=ie.payload,typeof W=="function"){I=W.call(De,I,O);break e}I=W;break e;case 3:W.flags=W.flags&-65537|128;case 0:if(W=ie.payload,O=typeof W=="function"?W.call(De,I,O):W,O==null)break e;I=v({},I,O);break e;case 2:Wa=!0}}O=y.callback,O!==null&&(e.flags|=64,U&&(e.flags|=8192),U=o.callbacks,U===null?o.callbacks=[O]:U.push(O))}else U={lane:O,tag:y.tag,payload:y.payload,callback:y.callback,next:null},L===null?(A=L=U,_=I):L=L.next=U,m|=O;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;U=y,y=U.next,U.next=null,o.lastBaseUpdate=U,o.shared.pending=null}}while(!0);L===null&&(_=I),o.baseState=_,o.firstBaseUpdate=A,o.lastBaseUpdate=L,u===null&&(o.shared.lanes=0),rn|=m,e.lanes=m,e.memoizedState=I}}function Od(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Rd(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Od(a[e],t)}var xs=N(null),Ei=N(0);function Cd(e,t){e=Ba,$(Ei,e),$(xs,t),Ba=e|t.baseLanes}function wo(){$(Ei,Ba),$(xs,xs.current)}function _o(){Ba=Ei.current,H(xs),H(Ei)}var Lt=N(null),Ft=null;function tn(e){var t=e.alternate;$(Xe,Xe.current&1),$(Lt,e),Ft===null&&(t===null||xs.current!==null||t.memoizedState!==null)&&(Ft=e)}function So(e){$(Xe,Xe.current),$(Lt,e),Ft===null&&(Ft=e)}function Ud(e){e.tag===22?($(Xe,Xe.current),$(Lt,e),Ft===null&&(Ft=e)):an()}function an(){$(Xe,Xe.current),$(Lt,Lt.current)}function qt(e){H(Lt),Ft===e&&(Ft=null),H(Xe)}var Xe=N(0);function Ti(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Ac(a)||Oc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Aa=0,fe=null,Ce=null,Pe=null,ki=!1,ws=!1,Ln=!1,Ai=0,yr=0,_s=null,Np=0;function Ge(){throw Error(l(321))}function jo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Mt(e[a],t[a]))return!1;return!0}function No(e,t,a,s,o,u){return Aa=u,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?gh:Ho,Ln=!1,u=a(s,o),Ln=!1,ws&&(u=zd(t,a,s,o)),Dd(e),u}function Dd(e){C.H=_r;var t=Ce!==null&&Ce.next!==null;if(Aa=0,Pe=Ce=fe=null,ki=!1,yr=0,_s=null,t)throw Error(l(300));e===null||We||(e=e.dependencies,e!==null&&yi(e)&&(We=!0))}function zd(e,t,a,s){fe=e;var o=0;do{if(ws&&(_s=null),yr=0,ws=!1,25<=o)throw Error(l(301));if(o+=1,Pe=Ce=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=bh,u=t(a,s)}while(ws);return u}function Ep(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?xr(t):t,e=e.useState()[0],(Ce!==null?Ce.memoizedState:null)!==e&&(fe.flags|=1024),t}function Eo(){var e=Ai!==0;return Ai=0,e}function To(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function ko(e){if(ki){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ki=!1}Aa=0,Pe=Ce=fe=null,ws=!1,yr=Ai=0,_s=null}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?fe.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function Je(){if(Ce===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Pe===null?fe.memoizedState:Pe.next;if(t!==null)Pe=t,Ce=e;else{if(e===null)throw fe.alternate===null?Error(l(467)):Error(l(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Pe===null?fe.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function Oi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xr(e){var t=yr;return yr+=1,_s===null&&(_s=[]),e=Nd(_s,e,t),t=fe,(Pe===null?t.memoizedState:Pe.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?gh:Ho),e}function Ri(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return xr(e);if(e.$$typeof===D)return ut(e)}throw Error(l(438,String(e)))}function Ao(e){var t=null,a=fe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=fe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Oi(),fe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=Te;return t.index++,a}function Oa(e,t){return typeof t=="function"?t(e):t}function Ci(e){var t=Je();return Oo(t,Ce,e)}function Oo(e,t,a){var s=e.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=a;var o=e.baseQueue,u=s.pending;if(u!==null){if(o!==null){var m=o.next;o.next=u.next,u.next=m}t.baseQueue=o=u,s.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var y=m=null,_=null,A=t,L=!1;do{var I=A.lane&-536870913;if(I!==A.lane?(we&I)===I:(Aa&I)===I){var O=A.revertLane;if(O===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),I===gs&&(L=!0);else if((Aa&O)===O){A=A.next,O===gs&&(L=!0);continue}else I={lane:0,revertLane:A.revertLane,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},_===null?(y=_=I,m=u):_=_.next=I,fe.lanes|=O,rn|=O;I=A.action,Ln&&a(u,I),u=A.hasEagerState?A.eagerState:a(u,I)}else O={lane:I,revertLane:A.revertLane,gesture:A.gesture,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},_===null?(y=_=O,m=u):_=_.next=O,fe.lanes|=I,rn|=I;A=A.next}while(A!==null&&A!==t);if(_===null?m=u:_.next=y,!Mt(u,e.memoizedState)&&(We=!0,L&&(a=bs,a!==null)))throw a;e.memoizedState=u,e.baseState=m,e.baseQueue=_,s.lastRenderedState=u}return o===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Ro(e){var t=Je(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var s=a.dispatch,o=a.pending,u=t.memoizedState;if(o!==null){a.pending=null;var m=o=o.next;do u=e(u,m.action),m=m.next;while(m!==o);Mt(u,t.memoizedState)||(We=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,s]}function Md(e,t,a){var s=fe,o=Je(),u=Se;if(u){if(a===void 0)throw Error(l(407));a=a()}else a=t();var m=!Mt((Ce||o).memoizedState,a);if(m&&(o.memoizedState=a,We=!0),o=o.queue,Do(qd.bind(null,s,o,e),[e]),o.getSnapshot!==t||m||Pe!==null&&Pe.memoizedState.tag&1){if(s.flags|=2048,Ss(9,{destroy:void 0},Ld.bind(null,s,o,a,t),null),ze===null)throw Error(l(349));u||(Aa&127)!==0||Bd(s,t,a)}return a}function Bd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=fe.updateQueue,t===null?(t=Oi(),fe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ld(e,t,a,s){t.value=a,t.getSnapshot=s,Hd(t)&&Id(e)}function qd(e,t,a){return a(function(){Hd(t)&&Id(e)})}function Hd(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Mt(e,a)}catch{return!0}}function Id(e){var t=An(e,2);t!==null&&Ut(t,e,2)}function Co(e){var t=St();if(typeof e=="function"){var a=e;if(e=a(),Ln){na(!0);try{a()}finally{na(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:e},t}function $d(e,t,a,s){return e.baseState=a,Oo(e,Ce,typeof s=="function"?s:Oa)}function Tp(e,t,a,s,o){if(zi(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};C.T!==null?a(!0):u.isTransition=!1,s(u),a=t.pending,a===null?(u.next=t.pending=u,Vd(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Vd(e,t){var a=t.action,s=t.payload,o=e.state;if(t.isTransition){var u=C.T,m={};C.T=m;try{var y=a(o,s),_=C.S;_!==null&&_(m,y),Gd(e,t,y)}catch(A){Uo(e,t,A)}finally{u!==null&&m.types!==null&&(u.types=m.types),C.T=u}}else try{u=a(o,s),Gd(e,t,u)}catch(A){Uo(e,t,A)}}function Gd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Yd(e,t,s)},function(s){return Uo(e,t,s)}):Yd(e,t,a)}function Yd(e,t,a){t.status="fulfilled",t.value=a,Kd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Vd(e,a)))}function Uo(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Kd(t),t=t.next;while(t!==s)}e.action=null}function Kd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xd(e,t){return t}function Jd(e,t){if(Se){var a=ze.formState;if(a!==null){e:{var s=fe;if(Se){if(Be){t:{for(var o=Be,u=Wt;o.nodeType!==8;){if(!u){o=null;break t}if(o=ea(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Be=ea(o.nextSibling),s=o.data==="F!";break e}}Za(s)}s=!1}s&&(t=a[0])}}return a=St(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:t},a.queue=s,a=fh.bind(null,fe,s),s.dispatch=a,s=Co(!1),u=qo.bind(null,fe,!1,s.queue),s=St(),o={state:t,dispatch:null,action:e,pending:null},s.queue=o,a=Tp.bind(null,fe,o,u,a),o.dispatch=a,s.memoizedState=e,[t,a,!1]}function Qd(e){var t=Je();return Zd(t,Ce,e)}function Zd(e,t,a){if(t=Oo(e,t,Xd)[0],e=Ci(Oa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=xr(t)}catch(m){throw m===vs?_i:m}else s=t;t=Je();var o=t.queue,u=o.dispatch;return a!==t.memoizedState&&(fe.flags|=2048,Ss(9,{destroy:void 0},kp.bind(null,o,a),null)),[s,u,e]}function kp(e,t){e.action=t}function Pd(e){var t=Je(),a=Ce;if(a!==null)return Zd(t,a,e);Je(),t=t.memoizedState,a=Je();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Ss(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=fe.updateQueue,t===null&&(t=Oi(),fe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Wd(){return Je().memoizedState}function Ui(e,t,a,s){var o=St();fe.flags|=e,o.memoizedState=Ss(1|t,{destroy:void 0},a,s===void 0?null:s)}function Di(e,t,a,s){var o=Je();s=s===void 0?null:s;var u=o.memoizedState.inst;Ce!==null&&s!==null&&jo(s,Ce.memoizedState.deps)?o.memoizedState=Ss(t,u,a,s):(fe.flags|=e,o.memoizedState=Ss(1|t,u,a,s))}function Fd(e,t){Ui(8390656,8,e,t)}function Do(e,t){Di(2048,8,e,t)}function Ap(e){fe.flags|=4;var t=fe.updateQueue;if(t===null)t=Oi(),fe.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function eh(e){var t=Je().memoizedState;return Ap({ref:t,nextImpl:e}),function(){if((Ee&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function th(e,t){return Di(4,2,e,t)}function ah(e,t){return Di(4,4,e,t)}function nh(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sh(e,t,a){a=a!=null?a.concat([e]):null,Di(4,4,nh.bind(null,t,e),a)}function zo(){}function rh(e,t){var a=Je();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&jo(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function ih(e,t){var a=Je();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&jo(t,s[1]))return s[0];if(s=e(),Ln){na(!0);try{e()}finally{na(!1)}}return a.memoizedState=[s,t],s}function Mo(e,t,a){return a===void 0||(Aa&1073741824)!==0&&(we&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=of(),fe.lanes|=e,rn|=e,a)}function lh(e,t,a,s){return Mt(a,t)?a:xs.current!==null?(e=Mo(e,a,s),Mt(e,t)||(We=!0),e):(Aa&42)===0||(Aa&1073741824)!==0&&(we&261930)===0?(We=!0,e.memoizedState=a):(e=of(),fe.lanes|=e,rn|=e,t)}function oh(e,t,a,s,o){var u=K.p;K.p=u!==0&&8>u?u:8;var m=C.T,y={};C.T=y,qo(e,!1,t,a);try{var _=o(),A=C.S;if(A!==null&&A(y,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var L=jp(_,s);wr(e,t,L,$t(e))}else wr(e,t,s,$t(e))}catch(I){wr(e,t,{then:function(){},status:"rejected",reason:I},$t())}finally{K.p=u,m!==null&&y.types!==null&&(m.types=y.types),C.T=m}}function Op(){}function Bo(e,t,a,s){if(e.tag!==5)throw Error(l(476));var o=ch(e).queue;oh(e,o,t,ae,a===null?Op:function(){return uh(e),a(s)})}function ch(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:ae},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function uh(e){var t=ch(e);t.next===null&&(t=e.alternate.memoizedState),wr(e,t.next.queue,{},$t())}function Lo(){return ut(Lr)}function dh(){return Je().memoizedState}function hh(){return Je().memoizedState}function Rp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=$t();e=Fa(a);var s=en(t,e,a);s!==null&&(Ut(s,t,a),gr(s,t,a)),t={cache:fo()},e.payload=t;return}t=t.return}}function Cp(e,t,a){var s=$t();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},zi(e)?mh(t,a):(a=to(e,t,a,s),a!==null&&(Ut(a,e,s),ph(a,t,s)))}function fh(e,t,a){var s=$t();wr(e,t,a,s)}function wr(e,t,a,s){var o={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(zi(e))mh(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,y=u(m,a);if(o.hasEagerState=!0,o.eagerState=y,Mt(y,m))return pi(e,t,o,0),ze===null&&mi(),!1}catch{}if(a=to(e,t,o,s),a!==null)return Ut(a,e,s),ph(a,t,s),!0}return!1}function qo(e,t,a,s){if(s={lane:2,revertLane:bc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},zi(e)){if(t)throw Error(l(479))}else t=to(e,a,s,2),t!==null&&Ut(t,e,2)}function zi(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function mh(e,t){ws=ki=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function ph(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Nt(e,a)}}var _r={readContext:ut,use:Ri,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useLayoutEffect:Ge,useInsertionEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useSyncExternalStore:Ge,useId:Ge,useHostTransitionStatus:Ge,useFormState:Ge,useActionState:Ge,useOptimistic:Ge,useMemoCache:Ge,useCacheRefresh:Ge};_r.useEffectEvent=Ge;var gh={readContext:ut,use:Ri,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:ut,useEffect:Fd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Ui(4194308,4,nh.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){Ui(4,2,e,t)},useMemo:function(e,t){var a=St();t=t===void 0?null:t;var s=e();if(Ln){na(!0);try{e()}finally{na(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=St();if(a!==void 0){var o=a(t);if(Ln){na(!0);try{a(t)}finally{na(!1)}}}else o=t;return s.memoizedState=s.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},s.queue=e,e=e.dispatch=Cp.bind(null,fe,e),[s.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:function(e){e=Co(e);var t=e.queue,a=fh.bind(null,fe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:zo,useDeferredValue:function(e,t){var a=St();return Mo(a,e,t)},useTransition:function(){var e=Co(!1);return e=oh.bind(null,fe,e.queue,!0,!1),St().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=fe,o=St();if(Se){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),ze===null)throw Error(l(349));(we&127)!==0||Bd(s,t,a)}o.memoizedState=a;var u={value:a,getSnapshot:t};return o.queue=u,Fd(qd.bind(null,s,u,e),[e]),s.flags|=2048,Ss(9,{destroy:void 0},Ld.bind(null,s,u,a,t),null),a},useId:function(){var e=St(),t=ze.identifierPrefix;if(Se){var a=ga,s=pa;a=(s&~(1<<32-pt(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ai++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Np++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Lo,useFormState:Jd,useActionState:Jd,useOptimistic:function(e){var t=St();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=qo.bind(null,fe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ao,useCacheRefresh:function(){return St().memoizedState=Rp.bind(null,fe)},useEffectEvent:function(e){var t=St(),a={impl:e};return t.memoizedState=a,function(){if((Ee&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Ho={readContext:ut,use:Ri,useCallback:rh,useContext:ut,useEffect:Do,useImperativeHandle:sh,useInsertionEffect:th,useLayoutEffect:ah,useMemo:ih,useReducer:Ci,useRef:Wd,useState:function(){return Ci(Oa)},useDebugValue:zo,useDeferredValue:function(e,t){var a=Je();return lh(a,Ce.memoizedState,e,t)},useTransition:function(){var e=Ci(Oa)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:xr(e),t]},useSyncExternalStore:Md,useId:dh,useHostTransitionStatus:Lo,useFormState:Qd,useActionState:Qd,useOptimistic:function(e,t){var a=Je();return $d(a,Ce,e,t)},useMemoCache:Ao,useCacheRefresh:hh};Ho.useEffectEvent=eh;var bh={readContext:ut,use:Ri,useCallback:rh,useContext:ut,useEffect:Do,useImperativeHandle:sh,useInsertionEffect:th,useLayoutEffect:ah,useMemo:ih,useReducer:Ro,useRef:Wd,useState:function(){return Ro(Oa)},useDebugValue:zo,useDeferredValue:function(e,t){var a=Je();return Ce===null?Mo(a,e,t):lh(a,Ce.memoizedState,e,t)},useTransition:function(){var e=Ro(Oa)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:xr(e),t]},useSyncExternalStore:Md,useId:dh,useHostTransitionStatus:Lo,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var a=Je();return Ce!==null?$d(a,Ce,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ao,useCacheRefresh:hh};bh.useEffectEvent=eh;function Io(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:v({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $o={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=$t(),o=Fa(s);o.payload=t,a!=null&&(o.callback=a),t=en(e,o,s),t!==null&&(Ut(t,e,s),gr(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=$t(),o=Fa(s);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=en(e,o,s),t!==null&&(Ut(t,e,s),gr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=$t(),s=Fa(a);s.tag=2,t!=null&&(s.callback=t),t=en(e,s,a),t!==null&&(Ut(t,e,a),gr(t,e,a))}};function vh(e,t,a,s,o,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,m):t.prototype&&t.prototype.isPureReactComponent?!or(a,s)||!or(o,u):!0}function yh(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&$o.enqueueReplaceState(t,t.state,null)}function qn(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=v({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function xh(e){fi(e)}function wh(e){console.error(e)}function _h(e){fi(e)}function Mi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function Sh(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Vo(e,t,a){return a=Fa(a),a.tag=3,a.payload={element:null},a.callback=function(){Mi(e,t)},a}function jh(e){return e=Fa(e),e.tag=3,e}function Nh(e,t,a,s){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var u=s.value;e.payload=function(){return o(u)},e.callback=function(){Sh(t,a,s)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Sh(t,a,s),typeof o!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var y=s.stack;this.componentDidCatch(s.value,{componentStack:y!==null?y:""})})}function Up(e,t,a,s,o){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&ps(t,a,o,!0),a=Lt.current,a!==null){switch(a.tag){case 31:case 13:return Ft===null?Ji():a.alternate===null&&Ye===0&&(Ye=3),a.flags&=-257,a.flags|=65536,a.lanes=o,s===Si?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),mc(e,s,o)),!1;case 22:return a.flags|=65536,s===Si?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),mc(e,s,o)),!1}throw Error(l(435,a.tag))}return mc(e,s,o),Ji(),!1}if(Se)return t=Lt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,s!==lo&&(e=Error(l(422),{cause:s}),dr(Qt(e,a)))):(s!==lo&&(t=Error(l(423),{cause:s}),dr(Qt(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,s=Qt(s,a),o=Vo(e.stateNode,s,o),yo(e,o),Ye!==4&&(Ye=2)),!1;var u=Error(l(520),{cause:s});if(u=Qt(u,a),Or===null?Or=[u]:Or.push(u),Ye!==4&&(Ye=2),t===null)return!0;s=Qt(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=Vo(a.stateNode,s,e),yo(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ln===null||!ln.has(u))))return a.flags|=65536,o&=-o,a.lanes|=o,o=jh(o),Nh(o,e,a,s),yo(a,o),!1}a=a.return}while(a!==null);return!1}var Go=Error(l(461)),We=!1;function dt(e,t,a,s){t.child=e===null?Ad(t,null,a,s):Bn(t,e.child,a,s)}function Eh(e,t,a,s,o){a=a.render;var u=t.ref;if("ref"in s){var m={};for(var y in s)y!=="ref"&&(m[y]=s[y])}else m=s;return Un(t),s=No(e,t,a,m,u,o),y=Eo(),e!==null&&!We?(To(e,t,o),Ra(e,t,o)):(Se&&y&&ro(t),t.flags|=1,dt(e,t,s,o),t.child)}function Th(e,t,a,s,o){if(e===null){var u=a.type;return typeof u=="function"&&!ao(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,kh(e,t,u,s,o)):(e=bi(a.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Wo(e,o)){var m=u.memoizedProps;if(a=a.compare,a=a!==null?a:or,a(m,s)&&e.ref===t.ref)return Ra(e,t,o)}return t.flags|=1,e=Na(u,s),e.ref=t.ref,e.return=t,t.child=e}function kh(e,t,a,s,o){if(e!==null){var u=e.memoizedProps;if(or(u,s)&&e.ref===t.ref)if(We=!1,t.pendingProps=s=u,Wo(e,o))(e.flags&131072)!==0&&(We=!0);else return t.lanes=e.lanes,Ra(e,t,o)}return Yo(e,t,a,s,o)}function Ah(e,t,a,s){var o=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(s=t.child=e.child,o=0;s!==null;)o=o|s.lanes|s.childLanes,s=s.sibling;s=o&~u}else s=0,t.child=null;return Oh(e,t,u,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wi(t,u!==null?u.cachePool:null),u!==null?Cd(t,u):wo(),Ud(t);else return s=t.lanes=536870912,Oh(e,t,u!==null?u.baseLanes|a:a,a,s)}else u!==null?(wi(t,u.cachePool),Cd(t,u),an(),t.memoizedState=null):(e!==null&&wi(t,null),wo(),an());return dt(e,t,o,a),t.child}function Sr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Oh(e,t,a,s,o){var u=po();return u=u===null?null:{parent:Ze._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&wi(t,null),wo(),Ud(t),e!==null&&ps(e,t,s,!0),t.childLanes=o,null}function Bi(e,t){return t=qi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Rh(e,t,a){return Bn(t,e.child,null,a),e=Bi(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function Dp(e,t,a){var s=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Se){if(s.mode==="hidden")return e=Bi(t,s),t.lanes=536870912,Sr(null,e);if(So(t),(e=Be)?(e=Gf(e,Wt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ja!==null?{id:pa,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},a=md(e),a.return=t,t.child=a,ct=t,Be=null)):e=null,e===null)throw Za(t);return t.lanes=536870912,null}return Bi(t,s)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(So(t),o)if(t.flags&256)t.flags&=-257,t=Rh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(We||ps(e,t,a,!1),o=(a&e.childLanes)!==0,We||o){if(s=ze,s!==null&&(m=Et(s,a),m!==0&&m!==u.retryLane))throw u.retryLane=m,An(e,m),Ut(s,e,m),Go;Ji(),t=Rh(e,t,a)}else e=u.treeContext,Be=ea(m.nextSibling),ct=t,Se=!0,Qa=null,Wt=!1,e!==null&&bd(t,e),t=Bi(t,s),t.flags|=4096;return t}return e=Na(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Li(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Yo(e,t,a,s,o){return Un(t),a=No(e,t,a,s,void 0,o),s=Eo(),e!==null&&!We?(To(e,t,o),Ra(e,t,o)):(Se&&s&&ro(t),t.flags|=1,dt(e,t,a,o),t.child)}function Ch(e,t,a,s,o,u){return Un(t),t.updateQueue=null,a=zd(t,s,a,o),Dd(e),s=Eo(),e!==null&&!We?(To(e,t,u),Ra(e,t,u)):(Se&&s&&ro(t),t.flags|=1,dt(e,t,a,u),t.child)}function Uh(e,t,a,s,o){if(Un(t),t.stateNode===null){var u=ds,m=a.contextType;typeof m=="object"&&m!==null&&(u=ut(m)),u=new a(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=$o,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},bo(t),m=a.contextType,u.context=typeof m=="object"&&m!==null?ut(m):ds,u.state=t.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(Io(t,a,m,s),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&$o.enqueueReplaceState(u,u.state,null),vr(t,s,u,o),br(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,_=qn(a,y);u.props=_;var A=u.context,L=a.contextType;m=ds,typeof L=="object"&&L!==null&&(m=ut(L));var I=a.getDerivedStateFromProps;L=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,L||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||A!==m)&&yh(t,u,s,m),Wa=!1;var O=t.memoizedState;u.state=O,vr(t,s,u,o),br(),A=t.memoizedState,y||O!==A||Wa?(typeof I=="function"&&(Io(t,a,I,s),A=t.memoizedState),(_=Wa||vh(t,a,_,s,O,A,m))?(L||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=A),u.props=s,u.state=A,u.context=m,s=_):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,vo(e,t),m=t.memoizedProps,L=qn(a,m),u.props=L,I=t.pendingProps,O=u.context,A=a.contextType,_=ds,typeof A=="object"&&A!==null&&(_=ut(A)),y=a.getDerivedStateFromProps,(A=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==I||O!==_)&&yh(t,u,s,_),Wa=!1,O=t.memoizedState,u.state=O,vr(t,s,u,o),br();var U=t.memoizedState;m!==I||O!==U||Wa||e!==null&&e.dependencies!==null&&yi(e.dependencies)?(typeof y=="function"&&(Io(t,a,y,s),U=t.memoizedState),(L=Wa||vh(t,a,L,s,O,U,_)||e!==null&&e.dependencies!==null&&yi(e.dependencies))?(A||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,U,_),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,U,_)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=U),u.props=s,u.state=U,u.context=_,s=L):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,Li(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=Bn(t,e.child,null,o),t.child=Bn(t,null,a,o)):dt(e,t,a,o),t.memoizedState=u.state,e=t.child):e=Ra(e,t,o),e}function Dh(e,t,a,s){return Rn(),t.flags|=256,dt(e,t,a,s),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Sd()}}function Jo(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=It),e}function zh(e,t,a){var s=t.pendingProps,o=!1,u=(t.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:(Xe.current&2)!==0),m&&(o=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(Se){if(o?tn(t):an(),(e=Be)?(e=Gf(e,Wt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ja!==null?{id:pa,overflow:ga}:null,retryLane:536870912,hydrationErrors:null},a=md(e),a.return=t,t.child=a,ct=t,Be=null)):e=null,e===null)throw Za(t);return Oc(e)?t.lanes=32:t.lanes=536870912,null}var y=s.children;return s=s.fallback,o?(an(),o=t.mode,y=qi({mode:"hidden",children:y},o),s=On(s,o,a,null),y.return=t,s.return=t,y.sibling=s,t.child=y,s=t.child,s.memoizedState=Xo(a),s.childLanes=Jo(e,m,a),t.memoizedState=Ko,Sr(null,s)):(tn(t),Qo(t,y))}var _=e.memoizedState;if(_!==null&&(y=_.dehydrated,y!==null)){if(u)t.flags&256?(tn(t),t.flags&=-257,t=Zo(e,t,a)):t.memoizedState!==null?(an(),t.child=e.child,t.flags|=128,t=null):(an(),y=s.fallback,o=t.mode,s=qi({mode:"visible",children:s.children},o),y=On(y,o,a,null),y.flags|=2,s.return=t,y.return=t,s.sibling=y,t.child=s,Bn(t,e.child,null,a),s=t.child,s.memoizedState=Xo(a),s.childLanes=Jo(e,m,a),t.memoizedState=Ko,t=Sr(null,s));else if(tn(t),Oc(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var A=m.dgst;m=A,s=Error(l(419)),s.stack="",s.digest=m,dr({value:s,source:null,stack:null}),t=Zo(e,t,a)}else if(We||ps(e,t,a,!1),m=(a&e.childLanes)!==0,We||m){if(m=ze,m!==null&&(s=Et(m,a),s!==0&&s!==_.retryLane))throw _.retryLane=s,An(e,s),Ut(m,e,s),Go;Ac(y)||Ji(),t=Zo(e,t,a)}else Ac(y)?(t.flags|=192,t.child=e.child,t=null):(e=_.treeContext,Be=ea(y.nextSibling),ct=t,Se=!0,Qa=null,Wt=!1,e!==null&&bd(t,e),t=Qo(t,s.children),t.flags|=4096);return t}return o?(an(),y=s.fallback,o=t.mode,_=e.child,A=_.sibling,s=Na(_,{mode:"hidden",children:s.children}),s.subtreeFlags=_.subtreeFlags&65011712,A!==null?y=Na(A,y):(y=On(y,o,a,null),y.flags|=2),y.return=t,s.return=t,s.sibling=y,t.child=s,Sr(null,s),s=t.child,y=e.child.memoizedState,y===null?y=Xo(a):(o=y.cachePool,o!==null?(_=Ze._currentValue,o=o.parent!==_?{parent:_,pool:_}:o):o=Sd(),y={baseLanes:y.baseLanes|a,cachePool:o}),s.memoizedState=y,s.childLanes=Jo(e,m,a),t.memoizedState=Ko,Sr(e.child,s)):(tn(t),a=e.child,e=a.sibling,a=Na(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=a,t.memoizedState=null,a)}function Qo(e,t){return t=qi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function qi(e,t){return e=Bt(22,e,null,t),e.lanes=0,e}function Zo(e,t,a){return Bn(t,e.child,null,a),e=Qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mh(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),uo(e.return,t,a)}function Po(e,t,a,s,o,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:o,treeForkCount:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=a,m.tailMode=o,m.treeForkCount=u)}function Bh(e,t,a){var s=t.pendingProps,o=s.revealOrder,u=s.tail;s=s.children;var m=Xe.current,y=(m&2)!==0;if(y?(m=m&1|2,t.flags|=128):m&=1,$(Xe,m),dt(e,t,s,a),s=Se?ur:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mh(e,a,t);else if(e.tag===19)Mh(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&Ti(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),Po(t,!1,o,a,u,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ti(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}Po(t,!0,a,null,u,s);break;case"together":Po(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ra(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),rn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(ps(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=Na(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Na(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Wo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&yi(e)))}function zp(e,t,a){switch(t.tag){case 3:pe(t,t.stateNode.containerInfo),Pa(t,Ze,e.memoizedState.cache),Rn();break;case 27:case 5:da(t);break;case 4:pe(t,t.stateNode.containerInfo);break;case 10:Pa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,So(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(tn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?zh(e,t,a):(tn(t),e=Ra(e,t,a),e!==null?e.sibling:null);tn(t);break;case 19:var o=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(ps(e,t,a,!1),s=(a&t.childLanes)!==0),o){if(s)return Bh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),$(Xe,Xe.current),s)break;return null;case 22:return t.lanes=0,Ah(e,t,a,t.pendingProps);case 24:Pa(t,Ze,e.memoizedState.cache)}return Ra(e,t,a)}function Lh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)We=!0;else{if(!Wo(e,a)&&(t.flags&128)===0)return We=!1,zp(e,t,a);We=(e.flags&131072)!==0}else We=!1,Se&&(t.flags&1048576)!==0&&gd(t,ur,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=zn(t.elementType),t.type=e,typeof e=="function")ao(e)?(s=qn(e,s),t.tag=1,t=Uh(null,t,e,s,a)):(t.tag=0,t=Yo(null,t,e,s,a));else{if(e!=null){var o=e.$$typeof;if(o===Z){t.tag=11,t=Eh(null,t,e,s,a);break e}else if(o===G){t.tag=14,t=Th(null,t,e,s,a);break e}}throw t=tt(e)||e,Error(l(306,t,""))}}return t;case 0:return Yo(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,o=qn(s,t.pendingProps),Uh(e,t,s,o,a);case 3:e:{if(pe(t,t.stateNode.containerInfo),e===null)throw Error(l(387));s=t.pendingProps;var u=t.memoizedState;o=u.element,vo(e,t),vr(t,s,null,a);var m=t.memoizedState;if(s=m.cache,Pa(t,Ze,s),s!==u.cache&&ho(t,[Ze],a,!0),br(),s=m.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Dh(e,t,s,a);break e}else if(s!==o){o=Qt(Error(l(424)),t),dr(o),t=Dh(e,t,s,a);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Be=ea(e.firstChild),ct=t,Se=!0,Qa=null,Wt=!0,a=Ad(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Rn(),s===o){t=Ra(e,t,a);break e}dt(e,t,s,a)}t=t.child}return t;case 26:return Li(e,t),e===null?(a=Zf(t.type,null,t.pendingProps,null))?t.memoizedState=a:Se||(a=t.type,e=t.pendingProps,s=tl(le.current).createElement(a),s[ot]=t,s[Tt]=e,ht(s,a,e),it(s),t.stateNode=s):t.memoizedState=Zf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return da(t),e===null&&Se&&(s=t.stateNode=Xf(t.type,t.pendingProps,le.current),ct=t,Wt=!0,o=Be,dn(t.type)?(Rc=o,Be=ea(s.firstChild)):Be=o),dt(e,t,t.pendingProps.children,a),Li(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Se&&((o=s=Be)&&(s=dg(s,t.type,t.pendingProps,Wt),s!==null?(t.stateNode=s,ct=t,Be=ea(s.firstChild),Wt=!1,o=!0):o=!1),o||Za(t)),da(t),o=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,s=u.children,Ec(o,u)?s=null:m!==null&&Ec(o,m)&&(t.flags|=32),t.memoizedState!==null&&(o=No(e,t,Ep,null,null,a),Lr._currentValue=o),Li(e,t),dt(e,t,s,a),t.child;case 6:return e===null&&Se&&((e=a=Be)&&(a=hg(a,t.pendingProps,Wt),a!==null?(t.stateNode=a,ct=t,Be=null,e=!0):e=!1),e||Za(t)),null;case 13:return zh(e,t,a);case 4:return pe(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Bn(t,null,s,a):dt(e,t,s,a),t.child;case 11:return Eh(e,t,t.type,t.pendingProps,a);case 7:return dt(e,t,t.pendingProps,a),t.child;case 8:return dt(e,t,t.pendingProps.children,a),t.child;case 12:return dt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,Pa(t,t.type,s.value),dt(e,t,s.children,a),t.child;case 9:return o=t.type._context,s=t.pendingProps.children,Un(t),o=ut(o),s=s(o),t.flags|=1,dt(e,t,s,a),t.child;case 14:return Th(e,t,t.type,t.pendingProps,a);case 15:return kh(e,t,t.type,t.pendingProps,a);case 19:return Bh(e,t,a);case 31:return Dp(e,t,a);case 22:return Ah(e,t,a,t.pendingProps);case 24:return Un(t),s=ut(Ze),e===null?(o=po(),o===null&&(o=ze,u=fo(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=a),o=u),t.memoizedState={parent:s,cache:o},bo(t),Pa(t,Ze,o)):((e.lanes&a)!==0&&(vo(e,t),vr(t,null,null,a),br()),o=e.memoizedState,u=t.memoizedState,o.parent!==s?(o={parent:s,cache:s},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Pa(t,Ze,s)):(s=u.cache,Pa(t,Ze,s),s!==o.cache&&ho(t,[Ze],a,!0))),dt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Ca(e){e.flags|=4}function Fo(e,t,a,s,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(hf())e.flags|=8192;else throw Mn=Si,go}else e.flags&=-16777217}function qh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!tm(t))if(hf())e.flags|=8192;else throw Mn=Si,go}function Hi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?gt():536870912,e.lanes|=t,Ts|=t)}function jr(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,s|=o.subtreeFlags&65011712,s|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function Mp(e,t,a){var s=t.pendingProps;switch(io(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Le(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ka(Ze),Re(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ms(t)?Ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,oo())),Le(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(Ca(t),u!==null?(Le(t),qh(t,u)):(Le(t),Fo(t,o,null,s,a))):u?u!==e.memoizedState?(Ca(t),Le(t),qh(t,u)):(Le(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Ca(t),Le(t),Fo(t,o,e,s,a)),null;case 27:if(xa(t),a=le.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ca(t);else{if(!s){if(t.stateNode===null)throw Error(l(166));return Le(t),null}e=J.current,ms(t)?vd(t):(e=Xf(o,s,a),t.stateNode=e,Ca(t))}return Le(t),null;case 5:if(xa(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ca(t);else{if(!s){if(t.stateNode===null)throw Error(l(166));return Le(t),null}if(u=J.current,ms(t))vd(t);else{var m=tl(le.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?m.createElement("select",{is:s.is}):m.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?m.createElement(o,{is:s.is}):m.createElement(o)}}u[ot]=t,u[Tt]=s;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=u;e:switch(ht(u,o,s),o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ca(t)}}return Le(t),Fo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ca(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(l(166));if(e=le.current,ms(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,o=ct,o!==null)switch(o.tag){case 27:case 5:s=o.memoizedProps}e[ot]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Mf(e.nodeValue,a)),e||Za(t,!0)}else e=tl(e).createTextNode(s),e[ot]=t,t.stateNode=e}return Le(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=ms(t),a!==null){if(e===null){if(!s)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[ot]=t}else Rn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),e=!1}else a=oo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(l(558))}return Le(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ms(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(l(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));o[ot]=t}else Rn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),o=!1}else o=oo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,o=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(o=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Hi(t,t.updateQueue),Le(t),null);case 4:return Re(),e===null&&wc(t.stateNode.containerInfo),Le(t),null;case 10:return ka(t.type),Le(t),null;case 19:if(H(Xe),s=t.memoizedState,s===null)return Le(t),null;if(o=(t.flags&128)!==0,u=s.rendering,u===null)if(o)jr(s,!1);else{if(Ye!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ti(e),u!==null){for(t.flags|=128,jr(s,!1),e=u.updateQueue,t.updateQueue=e,Hi(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)fd(a,e),a=a.sibling;return $(Xe,Xe.current&1|2),Se&&Ea(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&wt()>Yi&&(t.flags|=128,o=!0,jr(s,!1),t.lanes=4194304)}else{if(!o)if(e=Ti(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Hi(t,e),jr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!Se)return Le(t),null}else 2*wt()-s.renderingStartTime>Yi&&a!==536870912&&(t.flags|=128,o=!0,jr(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,a=Xe.current,$(Xe,o?a&1|2:a&1),Se&&Ea(t,s.treeForkCount),e):(Le(t),null);case 22:case 23:return qt(t),_o(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),a=t.updateQueue,a!==null&&Hi(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&H(Dn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ka(Ze),Le(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function Bp(e,t){switch(io(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ka(Ze),Re(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xa(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(l(340));Rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));Rn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Xe),null;case 4:return Re(),null;case 10:return ka(t.type),null;case 22:case 23:return qt(t),_o(),e!==null&&H(Dn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ka(Ze),null;case 25:return null;default:return null}}function Hh(e,t){switch(io(t),t.tag){case 3:ka(Ze),Re();break;case 26:case 27:case 5:xa(t);break;case 4:Re();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:H(Xe);break;case 10:ka(t.type);break;case 22:case 23:qt(t),_o(),e!==null&&H(Dn);break;case 24:ka(Ze)}}function Nr(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var o=s.next;a=o;do{if((a.tag&e)===e){s=void 0;var u=a.create,m=a.inst;s=u(),m.destroy=s}a=a.next}while(a!==o)}}catch(y){Oe(t,t.return,y)}}function nn(e,t,a){try{var s=t.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var u=o.next;s=u;do{if((s.tag&e)===e){var m=s.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,o=t;var _=a,A=y;try{A()}catch(L){Oe(o,_,L)}}}s=s.next}while(s!==u)}}catch(L){Oe(t,t.return,L)}}function Ih(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Rd(t,a)}catch(s){Oe(e,e.return,s)}}}function $h(e,t,a){a.props=qn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Oe(e,t,s)}}function Er(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(o){Oe(e,t,o)}}function ba(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(o){Oe(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Oe(e,t,o)}else a.current=null}function Vh(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(o){Oe(e,e.return,o)}}function ec(e,t,a){try{var s=e.stateNode;rg(s,e.type,a,t),s[Tt]=t}catch(o){Oe(e,e.return,o)}}function Gh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dn(e.type)||e.tag===4}function tc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ac(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Sa));else if(s!==4&&(s===27&&dn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(ac(e,t,a),e=e.sibling;e!==null;)ac(e,t,a),e=e.sibling}function Ii(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&dn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ii(e,t,a),e=e.sibling;e!==null;)Ii(e,t,a),e=e.sibling}function Yh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ht(t,s,a),t[ot]=e,t[Tt]=a}catch(u){Oe(e,e.return,u)}}var Ua=!1,Fe=!1,nc=!1,Kh=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Lp(e,t){if(e=e.containerInfo,jc=ol,e=sd(e),Ql(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var o=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var m=0,y=-1,_=-1,A=0,L=0,I=e,O=null;t:for(;;){for(var U;I!==a||o!==0&&I.nodeType!==3||(y=m+o),I!==u||s!==0&&I.nodeType!==3||(_=m+s),I.nodeType===3&&(m+=I.nodeValue.length),(U=I.firstChild)!==null;)O=I,I=U;for(;;){if(I===e)break t;if(O===a&&++A===o&&(y=m),O===u&&++L===s&&(_=m),(U=I.nextSibling)!==null)break;I=O,O=I.parentNode}I=U}a=y===-1||_===-1?null:{start:y,end:_}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nc={focusedElem:e,selectionRange:a},ol=!1,lt=t;lt!==null;)if(t=lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,lt=e;else for(;lt!==null;){switch(t=lt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,o=u.memoizedProps,u=u.memoizedState,s=a.stateNode;try{var W=qn(a.type,o);e=s.getSnapshotBeforeUpdate(W,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(ie){Oe(a,a.return,ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)kc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,lt=e;break}lt=t.return}}function Xh(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:za(e,a),s&4&&Nr(5,a);break;case 1:if(za(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(m){Oe(a,a.return,m)}else{var o=qn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){Oe(a,a.return,m)}}s&64&&Ih(a),s&512&&Er(a,a.return);break;case 3:if(za(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Rd(e,t)}catch(m){Oe(a,a.return,m)}}break;case 27:t===null&&s&4&&Yh(a);case 26:case 5:za(e,a),t===null&&s&4&&Vh(a),s&512&&Er(a,a.return);break;case 12:za(e,a);break;case 31:za(e,a),s&4&&Zh(e,a);break;case 13:za(e,a),s&4&&Ph(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=Xp.bind(null,a),fg(e,a))));break;case 22:if(s=a.memoizedState!==null||Ua,!s){t=t!==null&&t.memoizedState!==null||Fe,o=Ua;var u=Fe;Ua=s,(Fe=t)&&!u?Ma(e,a,(a.subtreeFlags&8772)!==0):za(e,a),Ua=o,Fe=u}break;case 30:break;default:za(e,a)}}function Jh(e){var t=e.alternate;t!==null&&(e.alternate=null,Jh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,At=!1;function Da(e,t,a){for(a=a.child;a!==null;)Qh(e,t,a),a=a.sibling}function Qh(e,t,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(_n,a)}catch{}switch(a.tag){case 26:Fe||ba(a,t),Da(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Fe||ba(a,t);var s=He,o=At;dn(a.type)&&(He=a.stateNode,At=!1),Da(e,t,a),zr(a.stateNode),He=s,At=o;break;case 5:Fe||ba(a,t);case 6:if(s=He,o=At,He=null,Da(e,t,a),He=s,At=o,He!==null)if(At)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(u){Oe(a,t,u)}else try{He.removeChild(a.stateNode)}catch(u){Oe(a,t,u)}break;case 18:He!==null&&(At?(e=He,$f(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),zs(e)):$f(He,a.stateNode));break;case 4:s=He,o=At,He=a.stateNode.containerInfo,At=!0,Da(e,t,a),He=s,At=o;break;case 0:case 11:case 14:case 15:nn(2,a,t),Fe||nn(4,a,t),Da(e,t,a);break;case 1:Fe||(ba(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&$h(a,t,s)),Da(e,t,a);break;case 21:Da(e,t,a);break;case 22:Fe=(s=Fe)||a.memoizedState!==null,Da(e,t,a),Fe=s;break;default:Da(e,t,a)}}function Zh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zs(e)}catch(a){Oe(t,t.return,a)}}}function Ph(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zs(e)}catch(a){Oe(t,t.return,a)}}function qp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Kh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Kh),t;default:throw Error(l(435,e.tag))}}function $i(e,t){var a=qp(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var o=Jp.bind(null,e,s);s.then(o,o)}})}function Ot(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var o=a[s],u=e,m=t,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(dn(y.type)){He=y.stateNode,At=!1;break e}break;case 5:He=y.stateNode,At=!1;break e;case 3:case 4:He=y.stateNode.containerInfo,At=!0;break e}y=y.return}if(He===null)throw Error(l(160));Qh(u,m,o),He=null,At=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Wh(t,e),t=t.sibling}var ia=null;function Wh(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ot(t,e),Rt(e),s&4&&(nn(3,e,e.return),Nr(3,e),nn(5,e,e.return));break;case 1:Ot(t,e),Rt(e),s&512&&(Fe||a===null||ba(a,a.return)),s&64&&Ua&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var o=ia;if(Ot(t,e),Rt(e),s&512&&(Fe||a===null||ba(a,a.return)),s&4){var u=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(s){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Fs]||u[ot]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(s),o.head.insertBefore(u,o.querySelector("head > title"))),ht(u,s,a),u[ot]=e,it(u),s=u;break e;case"link":var m=Ff("link","href",o).get(s+(a.href||""));if(m){for(var y=0;y<m.length;y++)if(u=m[y],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(y,1);break t}}u=o.createElement(s),ht(u,s,a),o.head.appendChild(u);break;case"meta":if(m=Ff("meta","content",o).get(s+(a.content||""))){for(y=0;y<m.length;y++)if(u=m[y],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(y,1);break t}}u=o.createElement(s),ht(u,s,a),o.head.appendChild(u);break;default:throw Error(l(468,s))}u[ot]=e,it(u),s=u}e.stateNode=s}else em(o,e.type,e.stateNode);else e.stateNode=Wf(o,s,e.memoizedProps);else u!==s?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,s===null?em(o,e.type,e.stateNode):Wf(o,s,e.memoizedProps)):s===null&&e.stateNode!==null&&ec(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ot(t,e),Rt(e),s&512&&(Fe||a===null||ba(a,a.return)),a!==null&&s&4&&ec(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ot(t,e),Rt(e),s&512&&(Fe||a===null||ba(a,a.return)),e.flags&32){o=e.stateNode;try{ss(o,"")}catch(W){Oe(e,e.return,W)}}s&4&&e.stateNode!=null&&(o=e.memoizedProps,ec(e,o,a!==null?a.memoizedProps:o)),s&1024&&(nc=!0);break;case 6:if(Ot(t,e),Rt(e),s&4){if(e.stateNode===null)throw Error(l(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(W){Oe(e,e.return,W)}}break;case 3:if(sl=null,o=ia,ia=al(t.containerInfo),Ot(t,e),ia=o,Rt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{zs(t.containerInfo)}catch(W){Oe(e,e.return,W)}nc&&(nc=!1,Fh(e));break;case 4:s=ia,ia=al(e.stateNode.containerInfo),Ot(t,e),Rt(e),ia=s;break;case 12:Ot(t,e),Rt(e);break;case 31:Ot(t,e),Rt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,$i(e,s)));break;case 13:Ot(t,e),Rt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gi=wt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,$i(e,s)));break;case 22:o=e.memoizedState!==null;var _=a!==null&&a.memoizedState!==null,A=Ua,L=Fe;if(Ua=A||o,Fe=L||_,Ot(t,e),Fe=L,Ua=A,Rt(e),s&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||_||Ua||Fe||Hn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){_=a=t;try{if(u=_.stateNode,o)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=_.stateNode;var I=_.memoizedProps.style,O=I!=null&&I.hasOwnProperty("display")?I.display:null;y.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(W){Oe(_,_.return,W)}}}else if(t.tag===6){if(a===null){_=t;try{_.stateNode.nodeValue=o?"":_.memoizedProps}catch(W){Oe(_,_.return,W)}}}else if(t.tag===18){if(a===null){_=t;try{var U=_.stateNode;o?Vf(U,!0):Vf(_.stateNode,!1)}catch(W){Oe(_,_.return,W)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,$i(e,a))));break;case 19:Ot(t,e),Rt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,$i(e,s)));break;case 30:break;case 21:break;default:Ot(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Gh(s)){a=s;break}s=s.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var o=a.stateNode,u=tc(e);Ii(e,u,o);break;case 5:var m=a.stateNode;a.flags&32&&(ss(m,""),a.flags&=-33);var y=tc(e);Ii(e,y,m);break;case 3:case 4:var _=a.stateNode.containerInfo,A=tc(e);ac(e,A,_);break;default:throw Error(l(161))}}catch(L){Oe(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Fh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function za(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xh(e,t.alternate,t),t=t.sibling}function Hn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:nn(4,t,t.return),Hn(t);break;case 1:ba(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&$h(t,t.return,a),Hn(t);break;case 27:zr(t.stateNode);case 26:case 5:ba(t,t.return),Hn(t);break;case 22:t.memoizedState===null&&Hn(t);break;case 30:Hn(t);break;default:Hn(t)}e=e.sibling}}function Ma(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,o=e,u=t,m=u.flags;switch(u.tag){case 0:case 11:case 15:Ma(o,u,a),Nr(4,u);break;case 1:if(Ma(o,u,a),s=u,o=s.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(A){Oe(s,s.return,A)}if(s=u,o=s.updateQueue,o!==null){var y=s.stateNode;try{var _=o.shared.hiddenCallbacks;if(_!==null)for(o.shared.hiddenCallbacks=null,o=0;o<_.length;o++)Od(_[o],y)}catch(A){Oe(s,s.return,A)}}a&&m&64&&Ih(u),Er(u,u.return);break;case 27:Yh(u);case 26:case 5:Ma(o,u,a),a&&s===null&&m&4&&Vh(u),Er(u,u.return);break;case 12:Ma(o,u,a);break;case 31:Ma(o,u,a),a&&m&4&&Zh(o,u);break;case 13:Ma(o,u,a),a&&m&4&&Ph(o,u);break;case 22:u.memoizedState===null&&Ma(o,u,a),Er(u,u.return);break;case 30:break;default:Ma(o,u,a)}t=t.sibling}}function sc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hr(a))}function rc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hr(e))}function la(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ef(e,t,a,s),t=t.sibling}function ef(e,t,a,s){var o=t.flags;switch(t.tag){case 0:case 11:case 15:la(e,t,a,s),o&2048&&Nr(9,t);break;case 1:la(e,t,a,s);break;case 3:la(e,t,a,s),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hr(e)));break;case 12:if(o&2048){la(e,t,a,s),e=t.stateNode;try{var u=t.memoizedProps,m=u.id,y=u.onPostCommit;typeof y=="function"&&y(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(_){Oe(t,t.return,_)}}else la(e,t,a,s);break;case 31:la(e,t,a,s);break;case 13:la(e,t,a,s);break;case 23:break;case 22:u=t.stateNode,m=t.alternate,t.memoizedState!==null?u._visibility&2?la(e,t,a,s):Tr(e,t):u._visibility&2?la(e,t,a,s):(u._visibility|=2,js(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),o&2048&&sc(m,t);break;case 24:la(e,t,a,s),o&2048&&rc(t.alternate,t);break;default:la(e,t,a,s)}}function js(e,t,a,s,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,m=t,y=a,_=s,A=m.flags;switch(m.tag){case 0:case 11:case 15:js(u,m,y,_,o),Nr(8,m);break;case 23:break;case 22:var L=m.stateNode;m.memoizedState!==null?L._visibility&2?js(u,m,y,_,o):Tr(u,m):(L._visibility|=2,js(u,m,y,_,o)),o&&A&2048&&sc(m.alternate,m);break;case 24:js(u,m,y,_,o),o&&A&2048&&rc(m.alternate,m);break;default:js(u,m,y,_,o)}t=t.sibling}}function Tr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,o=s.flags;switch(s.tag){case 22:Tr(a,s),o&2048&&sc(s.alternate,s);break;case 24:Tr(a,s),o&2048&&rc(s.alternate,s);break;default:Tr(a,s)}t=t.sibling}}var kr=8192;function Ns(e,t,a){if(e.subtreeFlags&kr)for(e=e.child;e!==null;)tf(e,t,a),e=e.sibling}function tf(e,t,a){switch(e.tag){case 26:Ns(e,t,a),e.flags&kr&&e.memoizedState!==null&&Ng(a,ia,e.memoizedState,e.memoizedProps);break;case 5:Ns(e,t,a);break;case 3:case 4:var s=ia;ia=al(e.stateNode.containerInfo),Ns(e,t,a),ia=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=kr,kr=16777216,Ns(e,t,a),kr=s):Ns(e,t,a));break;default:Ns(e,t,a)}}function af(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ar(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];lt=s,sf(s,e)}af(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nf(e),e=e.sibling}function nf(e){switch(e.tag){case 0:case 11:case 15:Ar(e),e.flags&2048&&nn(9,e,e.return);break;case 3:Ar(e);break;case 12:Ar(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vi(e)):Ar(e);break;default:Ar(e)}}function Vi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];lt=s,sf(s,e)}af(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:nn(8,t,t.return),Vi(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Vi(t));break;default:Vi(t)}e=e.sibling}}function sf(e,t){for(;lt!==null;){var a=lt;switch(a.tag){case 0:case 11:case 15:nn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:hr(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,lt=s;else e:for(a=e;lt!==null;){s=lt;var o=s.sibling,u=s.return;if(Jh(s),s===a){lt=null;break e}if(o!==null){o.return=u,lt=o;break e}lt=u}}}var Hp={getCacheForType:function(e){var t=ut(Ze),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return ut(Ze).controller.signal}},Ip=typeof WeakMap=="function"?WeakMap:Map,Ee=0,ze=null,ve=null,we=0,Ae=0,Ht=null,sn=!1,Es=!1,ic=!1,Ba=0,Ye=0,rn=0,In=0,lc=0,It=0,Ts=0,Or=null,Ct=null,oc=!1,Gi=0,rf=0,Yi=1/0,Ki=null,ln=null,nt=0,on=null,ks=null,La=0,cc=0,uc=null,lf=null,Rr=0,dc=null;function $t(){return(Ee&2)!==0&&we!==0?we&-we:C.T!==null?bc():Ol()}function of(){if(It===0)if((we&536870912)===0||Se){var e=Zn;Zn<<=1,(Zn&3932160)===0&&(Zn=262144),It=e}else It=536870912;return e=Lt.current,e!==null&&(e.flags|=32),It}function Ut(e,t,a){(e===ze&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(As(e,0),cn(e,we,It,!1)),Ie(e,a),((Ee&2)===0||e!==ze)&&(e===ze&&((Ee&2)===0&&(In|=a),Ye===4&&cn(e,we,It,!1)),va(e))}function cf(e,t,a){if((Ee&6)!==0)throw Error(l(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||qe(e,t),o=s?Gp(e,t):fc(e,t,!0),u=s;do{if(o===0){Es&&!s&&cn(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!$p(a)){o=fc(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var y=e;o=Or;var _=y.current.memoizedState.isDehydrated;if(_&&(As(y,m).flags|=256),m=fc(y,m,!1),m!==2){if(ic&&!_){y.errorRecoveryDisabledLanes|=u,In|=u,o=4;break e}u=Ct,Ct=o,u!==null&&(Ct===null?Ct=u:Ct.push.apply(Ct,u))}o=m}if(u=!1,o!==2)continue}}if(o===1){As(e,0),cn(e,t,0,!0);break}e:{switch(s=e,u=o,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:cn(s,t,It,!sn);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(o=Gi+300-wt(),10<o)){if(cn(s,t,It,!sn),ue(s,0,!0)!==0)break e;La=t,s.timeoutHandle=Hf(uf.bind(null,s,a,Ct,Ki,oc,t,It,In,Ts,sn,u,"Throttled",-0,0),o);break e}uf(s,a,Ct,Ki,oc,t,It,In,Ts,sn,u,null,-0,0)}}break}while(!0);va(e)}function uf(e,t,a,s,o,u,m,y,_,A,L,I,O,U){if(e.timeoutHandle=-1,I=t.subtreeFlags,I&8192||(I&16785408)===16785408){I={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sa},tf(t,u,I);var W=(u&62914560)===u?Gi-wt():(u&4194048)===u?rf-wt():0;if(W=Eg(I,W),W!==null){La=u,e.cancelPendingCommit=W(vf.bind(null,e,t,u,a,s,o,m,y,_,L,I,null,O,U)),cn(e,u,m,!A);return}}vf(e,t,u,a,s,o,m,y,_)}function $p(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var o=a[s],u=o.getSnapshot;o=o.value;try{if(!Mt(u(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cn(e,t,a,s){t&=~lc,t&=~In,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var o=t;0<o;){var u=31-pt(o),m=1<<u;s[u]=-1,o&=~m}a!==0&&jn(e,a,t)}function Xi(){return(Ee&6)===0?(Cr(0),!1):!0}function hc(){if(ve!==null){if(Ae===0)var e=ve.return;else e=ve,Ta=Cn=null,ko(e),ys=null,mr=0,e=ve;for(;e!==null;)Hh(e.alternate,e),e=e.return;ve=null}}function As(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,og(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),La=0,hc(),ze=e,ve=a=Na(e.current,null),we=t,Ae=0,Ht=null,sn=!1,Es=qe(e,t),ic=!1,Ts=It=lc=In=rn=Ye=0,Ct=Or=null,oc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var o=31-pt(s),u=1<<o;t|=e[o],s&=~u}return Ba=t,mi(),a}function df(e,t){fe=null,C.H=_r,t===vs||t===_i?(t=Ed(),Ae=3):t===go?(t=Ed(),Ae=4):Ae=t===Go?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ht=t,ve===null&&(Ye=1,Mi(e,Qt(t,e.current)))}function hf(){var e=Lt.current;return e===null?!0:(we&4194048)===we?Ft===null:(we&62914560)===we||(we&536870912)!==0?e===Ft:!1}function ff(){var e=C.H;return C.H=_r,e===null?_r:e}function mf(){var e=C.A;return C.A=Hp,e}function Ji(){Ye=4,sn||(we&4194048)!==we&&Lt.current!==null||(Es=!0),(rn&134217727)===0&&(In&134217727)===0||ze===null||cn(ze,we,It,!1)}function fc(e,t,a){var s=Ee;Ee|=2;var o=ff(),u=mf();(ze!==e||we!==t)&&(Ki=null,As(e,t)),t=!1;var m=Ye;e:do try{if(Ae!==0&&ve!==null){var y=ve,_=Ht;switch(Ae){case 8:hc(),m=6;break e;case 3:case 2:case 9:case 6:Lt.current===null&&(t=!0);var A=Ae;if(Ae=0,Ht=null,Os(e,y,_,A),a&&Es){m=0;break e}break;default:A=Ae,Ae=0,Ht=null,Os(e,y,_,A)}}Vp(),m=Ye;break}catch(L){df(e,L)}while(!0);return t&&e.shellSuspendCounter++,Ta=Cn=null,Ee=s,C.H=o,C.A=u,ve===null&&(ze=null,we=0,mi()),m}function Vp(){for(;ve!==null;)pf(ve)}function Gp(e,t){var a=Ee;Ee|=2;var s=ff(),o=mf();ze!==e||we!==t?(Ki=null,Yi=wt()+500,As(e,t)):Es=qe(e,t);e:do try{if(Ae!==0&&ve!==null){t=ve;var u=Ht;t:switch(Ae){case 1:Ae=0,Ht=null,Os(e,t,u,1);break;case 2:case 9:if(jd(u)){Ae=0,Ht=null,gf(t);break}t=function(){Ae!==2&&Ae!==9||ze!==e||(Ae=7),va(e)},u.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:jd(u)?(Ae=0,Ht=null,gf(t)):(Ae=0,Ht=null,Os(e,t,u,7));break;case 5:var m=null;switch(ve.tag){case 26:m=ve.memoizedState;case 5:case 27:var y=ve;if(m?tm(m):y.stateNode.complete){Ae=0,Ht=null;var _=y.sibling;if(_!==null)ve=_;else{var A=y.return;A!==null?(ve=A,Qi(A)):ve=null}break t}}Ae=0,Ht=null,Os(e,t,u,5);break;case 6:Ae=0,Ht=null,Os(e,t,u,6);break;case 8:hc(),Ye=6;break e;default:throw Error(l(462))}}Yp();break}catch(L){df(e,L)}while(!0);return Ta=Cn=null,C.H=s,C.A=o,Ee=a,ve!==null?0:(ze=null,we=0,mi(),Ye)}function Yp(){for(;ve!==null&&!xt();)pf(ve)}function pf(e){var t=Lh(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,t===null?Qi(e):ve=t}function gf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Ch(a,t,t.pendingProps,t.type,void 0,we);break;case 11:t=Ch(a,t,t.pendingProps,t.type.render,t.ref,we);break;case 5:ko(t);default:Hh(a,t),t=ve=fd(t,Ba),t=Lh(a,t,Ba)}e.memoizedProps=e.pendingProps,t===null?Qi(e):ve=t}function Os(e,t,a,s){Ta=Cn=null,ko(t),ys=null,mr=0;var o=t.return;try{if(Up(e,o,t,a,we)){Ye=1,Mi(e,Qt(a,e.current)),ve=null;return}}catch(u){if(o!==null)throw ve=o,u;Ye=1,Mi(e,Qt(a,e.current)),ve=null;return}t.flags&32768?(Se||s===1?e=!0:Es||(we&536870912)!==0?e=!1:(sn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Lt.current,s!==null&&s.tag===13&&(s.flags|=16384))),bf(t,e)):Qi(t)}function Qi(e){var t=e;do{if((t.flags&32768)!==0){bf(t,sn);return}e=t.return;var a=Mp(t.alternate,t,Ba);if(a!==null){ve=a;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);Ye===0&&(Ye=5)}function bf(e,t){do{var a=Bp(e.alternate,e);if(a!==null){a.flags&=32767,ve=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ve=e;return}ve=e=a}while(e!==null);Ye=6,ve=null}function vf(e,t,a,s,o,u,m,y,_){e.cancelPendingCommit=null;do Zi();while(nt!==0);if((Ee&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=eo,jt(e,a,u,m,y,_),e===ze&&(ve=ze=null,we=0),ks=t,on=e,La=a,cc=u,uc=o,lf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Qp(wn,function(){return Sf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=C.T,C.T=null,o=K.p,K.p=2,m=Ee,Ee|=4;try{Lp(e,t,a)}finally{Ee=m,K.p=o,C.T=s}}nt=1,yf(),xf(),wf()}}function yf(){if(nt===1){nt=0;var e=on,t=ks,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var s=K.p;K.p=2;var o=Ee;Ee|=4;try{Wh(t,e);var u=Nc,m=sd(e.containerInfo),y=u.focusedElem,_=u.selectionRange;if(m!==y&&y&&y.ownerDocument&&nd(y.ownerDocument.documentElement,y)){if(_!==null&&Ql(y)){var A=_.start,L=_.end;if(L===void 0&&(L=A),"selectionStart"in y)y.selectionStart=A,y.selectionEnd=Math.min(L,y.value.length);else{var I=y.ownerDocument||document,O=I&&I.defaultView||window;if(O.getSelection){var U=O.getSelection(),W=y.textContent.length,ie=Math.min(_.start,W),De=_.end===void 0?ie:Math.min(_.end,W);!U.extend&&ie>De&&(m=De,De=ie,ie=m);var T=ad(y,ie),E=ad(y,De);if(T&&E&&(U.rangeCount!==1||U.anchorNode!==T.node||U.anchorOffset!==T.offset||U.focusNode!==E.node||U.focusOffset!==E.offset)){var k=I.createRange();k.setStart(T.node,T.offset),U.removeAllRanges(),ie>De?(U.addRange(k),U.extend(E.node,E.offset)):(k.setEnd(E.node,E.offset),U.addRange(k))}}}}for(I=[],U=y;U=U.parentNode;)U.nodeType===1&&I.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<I.length;y++){var q=I[y];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}ol=!!jc,Nc=jc=null}finally{Ee=o,K.p=s,C.T=a}}e.current=t,nt=2}}function xf(){if(nt===2){nt=0;var e=on,t=ks,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var s=K.p;K.p=2;var o=Ee;Ee|=4;try{Xh(e,t.alternate,t)}finally{Ee=o,K.p=s,C.T=a}}nt=3}}function wf(){if(nt===4||nt===3){nt=0,Va();var e=on,t=ks,a=La,s=lf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?nt=5:(nt=0,ks=on=null,_f(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(ln=null),sa(a),t=t.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(_n,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=C.T,o=K.p,K.p=2,C.T=null;try{for(var u=e.onRecoverableError,m=0;m<s.length;m++){var y=s[m];u(y.value,{componentStack:y.stack})}}finally{C.T=t,K.p=o}}(La&3)!==0&&Zi(),va(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===dc?Rr++:(Rr=0,dc=e):Rr=0,Cr(0)}}function _f(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hr(t)))}function Zi(){return yf(),xf(),wf(),Sf()}function Sf(){if(nt!==5)return!1;var e=on,t=cc;cc=0;var a=sa(La),s=C.T,o=K.p;try{K.p=32>a?32:a,C.T=null,a=uc,uc=null;var u=on,m=La;if(nt=0,ks=on=null,La=0,(Ee&6)!==0)throw Error(l(331));var y=Ee;if(Ee|=4,nf(u.current),ef(u,u.current,m,a),Ee=y,Cr(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(_n,u)}catch{}return!0}finally{K.p=o,C.T=s,_f(e,t)}}function jf(e,t,a){t=Qt(a,t),t=Vo(e.stateNode,t,2),e=en(e,t,2),e!==null&&(Ie(e,2),va(e))}function Oe(e,t,a){if(e.tag===3)jf(e,e,a);else for(;t!==null;){if(t.tag===3){jf(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ln===null||!ln.has(s))){e=Qt(a,e),a=jh(2),s=en(t,a,2),s!==null&&(Nh(a,s,t,e),Ie(s,2),va(s));break}}t=t.return}}function mc(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new Ip;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(a)||(ic=!0,o.add(a),e=Kp.bind(null,e,t,a),t.then(e,e))}function Kp(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ze===e&&(we&a)===a&&(Ye===4||Ye===3&&(we&62914560)===we&&300>wt()-Gi?(Ee&2)===0&&As(e,0):lc|=a,Ts===we&&(Ts=0)),va(e)}function Nf(e,t){t===0&&(t=gt()),e=An(e,t),e!==null&&(Ie(e,t),va(e))}function Xp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),Nf(e,a)}function Jp(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(t),Nf(e,a)}function Qp(e,t){return Qs(e,t)}var Pi=null,Rs=null,pc=!1,Wi=!1,gc=!1,un=0;function va(e){e!==Rs&&e.next===null&&(Rs===null?Pi=Rs=e:Rs=Rs.next=e),Wi=!0,pc||(pc=!0,Pp())}function Cr(e,t){if(!gc&&Wi){gc=!0;do for(var a=!1,s=Pi;s!==null;){if(e!==0){var o=s.pendingLanes;if(o===0)var u=0;else{var m=s.suspendedLanes,y=s.pingedLanes;u=(1<<31-pt(42|e)+1)-1,u&=o&~(m&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,Af(s,u))}else u=we,u=ue(s,s===ze?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||qe(s,u)||(a=!0,Af(s,u));s=s.next}while(a);gc=!1}}function Zp(){Ef()}function Ef(){Wi=pc=!1;var e=0;un!==0&&lg()&&(e=un);for(var t=wt(),a=null,s=Pi;s!==null;){var o=s.next,u=Tf(s,t);u===0?(s.next=null,a===null?Pi=o:a.next=o,o===null&&(Rs=a)):(a=s,(e!==0||(u&3)!==0)&&(Wi=!0)),s=o}nt!==0&&nt!==5||Cr(e),un!==0&&(un=0)}function Tf(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-pt(u),y=1<<m,_=o[m];_===-1?((y&a)===0||(y&s)!==0)&&(o[m]=rt(y,t)):_<=t&&(e.expiredLanes|=y),u&=~y}if(t=ze,a=we,a=ue(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Zs(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||qe(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&Zs(s),sa(a)){case 2:case 8:a=ti;break;case 32:a=wn;break;case 268435456:a=wa;break;default:a=wn}return s=kf.bind(null,e),a=Qs(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&Zs(s),e.callbackPriority=2,e.callbackNode=null,2}function kf(e,t){if(nt!==0&&nt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Zi()&&e.callbackNode!==a)return null;var s=we;return s=ue(e,e===ze?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(cf(e,s,t),Tf(e,wt()),e.callbackNode!=null&&e.callbackNode===a?kf.bind(null,e):null)}function Af(e,t){if(Zi())return null;cf(e,t,!0)}function Pp(){cg(function(){(Ee&6)!==0?Qs(xn,Zp):Ef()})}function bc(){if(un===0){var e=gs;e===0&&(e=Qn,Qn<<=1,(Qn&261888)===0&&(Qn=256)),un=e}return un}function Of(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ii(""+e)}function Rf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Wp(e,t,a,s,o){if(t==="submit"&&a&&a.stateNode===o){var u=Of((o[Tt]||null).action),m=s.submitter;m&&(t=(t=m[Tt]||null)?Of(t.formAction):m.getAttribute("formAction"),t!==null&&(u=t,m=null));var y=new ui("action","action",null,s,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(un!==0){var _=m?Rf(o,m):new FormData(o);Bo(a,{pending:!0,data:_,method:o.method,action:u},null,_)}}else typeof u=="function"&&(y.preventDefault(),_=m?Rf(o,m):new FormData(o),Bo(a,{pending:!0,data:_,method:o.method,action:u},u,_))},currentTarget:o}]})}}for(var vc=0;vc<Fl.length;vc++){var yc=Fl[vc],Fp=yc.toLowerCase(),eg=yc[0].toUpperCase()+yc.slice(1);ra(Fp,"on"+eg)}ra(ld,"onAnimationEnd"),ra(od,"onAnimationIteration"),ra(cd,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(gp,"onTransitionRun"),ra(bp,"onTransitionStart"),ra(vp,"onTransitionCancel"),ra(ud,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),Nn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ur));function Cf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],o=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var m=s.length-1;0<=m;m--){var y=s[m],_=y.instance,A=y.currentTarget;if(y=y.listener,_!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=A;try{u(o)}catch(L){fi(L)}o.currentTarget=null,u=_}else for(m=0;m<s.length;m++){if(y=s[m],_=y.instance,A=y.currentTarget,y=y.listener,_!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=A;try{u(o)}catch(L){fi(L)}o.currentTarget=null,u=_}}}}function ye(e,t){var a=t[Rl];a===void 0&&(a=t[Rl]=new Set);var s=e+"__bubble";a.has(s)||(Uf(t,e,2,!1),a.add(s))}function xc(e,t,a){var s=0;t&&(s|=4),Uf(a,e,s,t)}var Fi="_reactListening"+Math.random().toString(36).slice(2);function wc(e){if(!e[Fi]){e[Fi]=!0,Nu.forEach(function(a){a!=="selectionchange"&&(tg.has(a)||xc(a,!1,e),xc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fi]||(t[Fi]=!0,xc("selectionchange",!1,t))}}function Uf(e,t,a,s){switch(om(t)){case 2:var o=Ag;break;case 8:o=Og;break;default:o=Mc}a=o.bind(null,t,a,e),o=void 0,!Hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function _c(e,t,a,s,o){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var m=s.tag;if(m===3||m===4){var y=s.stateNode.containerInfo;if(y===o)break;if(m===4)for(m=s.return;m!==null;){var _=m.tag;if((_===3||_===4)&&m.stateNode.containerInfo===o)return;m=m.return}for(;y!==null;){if(m=Fn(y),m===null)return;if(_=m.tag,_===5||_===6||_===26||_===27){s=u=m;continue e}y=y.parentNode}}s=s.return}Bu(function(){var A=u,L=Ll(a),I=[];e:{var O=dd.get(e);if(O!==void 0){var U=ui,W=e;switch(e){case"keypress":if(oi(a)===0)break e;case"keydown":case"keyup":U=J0;break;case"focusin":W="focus",U=Gl;break;case"focusout":W="blur",U=Gl;break;case"beforeblur":case"afterblur":U=Gl;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=Hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=M0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=P0;break;case ld:case od:case cd:U=q0;break;case ud:U=F0;break;case"scroll":case"scrollend":U=D0;break;case"wheel":U=tp;break;case"copy":case"cut":case"paste":U=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=$u;break;case"toggle":case"beforetoggle":U=np}var ie=(t&4)!==0,De=!ie&&(e==="scroll"||e==="scrollend"),T=ie?O!==null?O+"Capture":null:O;ie=[];for(var E=A,k;E!==null;){var q=E;if(k=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||k===null||T===null||(q=tr(E,T),q!=null&&ie.push(Dr(E,q,k))),De)break;E=E.return}0<ie.length&&(O=new U(O,W,null,a,L),I.push({event:O,listeners:ie}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",U=e==="mouseout"||e==="pointerout",O&&a!==Bl&&(W=a.relatedTarget||a.fromElement)&&(Fn(W)||W[Wn]))break e;if((U||O)&&(O=L.window===L?L:(O=L.ownerDocument)?O.defaultView||O.parentWindow:window,U?(W=a.relatedTarget||a.toElement,U=A,W=W?Fn(W):null,W!==null&&(De=h(W),ie=W.tag,W!==De||ie!==5&&ie!==27&&ie!==6)&&(W=null)):(U=null,W=A),U!==W)){if(ie=Hu,q="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ie=$u,q="onPointerLeave",T="onPointerEnter",E="pointer"),De=U==null?O:er(U),k=W==null?O:er(W),O=new ie(q,E+"leave",U,a,L),O.target=De,O.relatedTarget=k,q=null,Fn(L)===A&&(ie=new ie(T,E+"enter",W,a,L),ie.target=k,ie.relatedTarget=De,q=ie),De=q,U&&W)t:{for(ie=ag,T=U,E=W,k=0,q=T;q;q=ie(q))k++;q=0;for(var ne=E;ne;ne=ie(ne))q++;for(;0<k-q;)T=ie(T),k--;for(;0<q-k;)E=ie(E),q--;for(;k--;){if(T===E||E!==null&&T===E.alternate){ie=T;break t}T=ie(T),E=ie(E)}ie=null}else ie=null;U!==null&&Df(I,O,U,ie,!1),W!==null&&De!==null&&Df(I,De,W,ie,!0)}}e:{if(O=A?er(A):window,U=O.nodeName&&O.nodeName.toLowerCase(),U==="select"||U==="input"&&O.type==="file")var je=Zu;else if(Ju(O))if(Pu)je=fp;else{je=dp;var ee=up}else U=O.nodeName,!U||U.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?A&&Ml(A.elementType)&&(je=Zu):je=hp;if(je&&(je=je(e,A))){Qu(I,je,a,L);break e}ee&&ee(e,O,A),e==="focusout"&&A&&O.type==="number"&&A.memoizedProps.value!=null&&zl(O,"number",O.value)}switch(ee=A?er(A):window,e){case"focusin":(Ju(ee)||ee.contentEditable==="true")&&(os=ee,Zl=A,cr=null);break;case"focusout":cr=Zl=os=null;break;case"mousedown":Pl=!0;break;case"contextmenu":case"mouseup":case"dragend":Pl=!1,rd(I,a,L);break;case"selectionchange":if(pp)break;case"keydown":case"keyup":rd(I,a,L)}var me;if(Kl)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ls?Ku(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Vu&&a.locale!=="ko"&&(ls||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ls&&(me=Lu()):(Xa=L,Il="value"in Xa?Xa.value:Xa.textContent,ls=!0)),ee=el(A,_e),0<ee.length&&(_e=new Iu(_e,e,null,a,L),I.push({event:_e,listeners:ee}),me?_e.data=me:(me=Xu(a),me!==null&&(_e.data=me)))),(me=rp?ip(e,a):lp(e,a))&&(_e=el(A,"onBeforeInput"),0<_e.length&&(ee=new Iu("onBeforeInput","beforeinput",null,a,L),I.push({event:ee,listeners:_e}),ee.data=me)),Wp(I,e,A,a,L)}Cf(I,t)})}function Dr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function el(e,t){for(var a=t+"Capture",s=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=tr(e,a),o!=null&&s.unshift(Dr(e,o,u)),o=tr(e,t),o!=null&&s.push(Dr(e,o,u))),e.tag===3)return s;e=e.return}return[]}function ag(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Df(e,t,a,s,o){for(var u=t._reactName,m=[];a!==null&&a!==s;){var y=a,_=y.alternate,A=y.stateNode;if(y=y.tag,_!==null&&_===s)break;y!==5&&y!==26&&y!==27||A===null||(_=A,o?(A=tr(a,u),A!=null&&m.unshift(Dr(a,A,_))):o||(A=tr(a,u),A!=null&&m.push(Dr(a,A,_)))),a=a.return}m.length!==0&&e.push({event:t,listeners:m})}var ng=/\r\n?/g,sg=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(ng,`
`).replace(sg,"")}function Mf(e,t){return t=zf(t),zf(e)===t}function Ue(e,t,a,s,o,u){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||ss(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&ss(e,""+s);break;case"className":si(e,"class",s);break;case"tabIndex":si(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":si(e,a,s);break;case"style":zu(e,s,u);break;case"data":if(t!=="object"){si(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ii(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&Ue(e,t,"name",o.name,o,null),Ue(e,t,"formEncType",o.formEncType,o,null),Ue(e,t,"formMethod",o.formMethod,o,null),Ue(e,t,"formTarget",o.formTarget,o,null)):(Ue(e,t,"encType",o.encType,o,null),Ue(e,t,"method",o.method,o,null),Ue(e,t,"target",o.target,o,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ii(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Sa);break;case"onScroll":s!=null&&ye("scroll",e);break;case"onScrollEnd":s!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(a=s.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=ii(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ye("beforetoggle",e),ye("toggle",e),ni(e,"popover",s);break;case"xlinkActuate":_a(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":_a(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":_a(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":_a(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":_a(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":_a(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":_a(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":_a(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":_a(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ni(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=C0.get(a)||a,ni(e,a,s))}}function Sc(e,t,a,s,o,u){switch(a){case"style":zu(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(a=s.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof s=="string"?ss(e,s):(typeof s=="number"||typeof s=="bigint")&&ss(e,""+s);break;case"onScroll":s!=null&&ye("scroll",e);break;case"onScrollEnd":s!=null&&ye("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Sa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),u=e[Tt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof s=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,o);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):ni(e,a,s)}}}function ht(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var s=!1,o=!1,u;for(u in a)if(a.hasOwnProperty(u)){var m=a[u];if(m!=null)switch(u){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ue(e,t,u,m,a,null)}}o&&Ue(e,t,"srcSet",a.srcSet,a,null),s&&Ue(e,t,"src",a.src,a,null);return;case"input":ye("invalid",e);var y=u=m=o=null,_=null,A=null;for(s in a)if(a.hasOwnProperty(s)){var L=a[s];if(L!=null)switch(s){case"name":o=L;break;case"type":m=L;break;case"checked":_=L;break;case"defaultChecked":A=L;break;case"value":u=L;break;case"defaultValue":y=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(l(137,t));break;default:Ue(e,t,s,L,a,null)}}Ru(e,u,y,_,A,m,o,!1);return;case"select":ye("invalid",e),s=m=u=null;for(o in a)if(a.hasOwnProperty(o)&&(y=a[o],y!=null))switch(o){case"value":u=y;break;case"defaultValue":m=y;break;case"multiple":s=y;default:Ue(e,t,o,y,a,null)}t=u,a=m,e.multiple=!!s,t!=null?ns(e,!!s,t,!1):a!=null&&ns(e,!!s,a,!0);return;case"textarea":ye("invalid",e),u=o=s=null;for(m in a)if(a.hasOwnProperty(m)&&(y=a[m],y!=null))switch(m){case"value":s=y;break;case"defaultValue":o=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(l(91));break;default:Ue(e,t,m,y,a,null)}Uu(e,s,o,u);return;case"option":for(_ in a)a.hasOwnProperty(_)&&(s=a[_],s!=null)&&(_==="selected"?e.selected=s&&typeof s!="function"&&typeof s!="symbol":Ue(e,t,_,s,a,null));return;case"dialog":ye("beforetoggle",e),ye("toggle",e),ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(s=0;s<Ur.length;s++)ye(Ur[s],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(A in a)if(a.hasOwnProperty(A)&&(s=a[A],s!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Ue(e,t,A,s,a,null)}return;default:if(Ml(t)){for(L in a)a.hasOwnProperty(L)&&(s=a[L],s!==void 0&&Sc(e,t,L,s,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(s=a[y],s!=null&&Ue(e,t,y,s,a,null))}function rg(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,m=null,y=null,_=null,A=null,L=null;for(U in a){var I=a[U];if(a.hasOwnProperty(U)&&I!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":_=I;default:s.hasOwnProperty(U)||Ue(e,t,U,null,s,I)}}for(var O in s){var U=s[O];if(I=a[O],s.hasOwnProperty(O)&&(U!=null||I!=null))switch(O){case"type":u=U;break;case"name":o=U;break;case"checked":A=U;break;case"defaultChecked":L=U;break;case"value":m=U;break;case"defaultValue":y=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,t));break;default:U!==I&&Ue(e,t,O,U,s,I)}}Dl(e,m,y,_,A,L,u,o);return;case"select":U=m=y=O=null;for(u in a)if(_=a[u],a.hasOwnProperty(u)&&_!=null)switch(u){case"value":break;case"multiple":U=_;default:s.hasOwnProperty(u)||Ue(e,t,u,null,s,_)}for(o in s)if(u=s[o],_=a[o],s.hasOwnProperty(o)&&(u!=null||_!=null))switch(o){case"value":O=u;break;case"defaultValue":y=u;break;case"multiple":m=u;default:u!==_&&Ue(e,t,o,u,s,_)}t=y,a=m,s=U,O!=null?ns(e,!!a,O,!1):!!s!=!!a&&(t!=null?ns(e,!!a,t,!0):ns(e,!!a,a?[]:"",!1));return;case"textarea":U=O=null;for(y in a)if(o=a[y],a.hasOwnProperty(y)&&o!=null&&!s.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ue(e,t,y,null,s,o)}for(m in s)if(o=s[m],u=a[m],s.hasOwnProperty(m)&&(o!=null||u!=null))switch(m){case"value":O=o;break;case"defaultValue":U=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(l(91));break;default:o!==u&&Ue(e,t,m,o,s,u)}Cu(e,O,U);return;case"option":for(var W in a)O=a[W],a.hasOwnProperty(W)&&O!=null&&!s.hasOwnProperty(W)&&(W==="selected"?e.selected=!1:Ue(e,t,W,null,s,O));for(_ in s)O=s[_],U=a[_],s.hasOwnProperty(_)&&O!==U&&(O!=null||U!=null)&&(_==="selected"?e.selected=O&&typeof O!="function"&&typeof O!="symbol":Ue(e,t,_,O,s,U));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in a)O=a[ie],a.hasOwnProperty(ie)&&O!=null&&!s.hasOwnProperty(ie)&&Ue(e,t,ie,null,s,O);for(A in s)if(O=s[A],U=a[A],s.hasOwnProperty(A)&&O!==U&&(O!=null||U!=null))switch(A){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(l(137,t));break;default:Ue(e,t,A,O,s,U)}return;default:if(Ml(t)){for(var De in a)O=a[De],a.hasOwnProperty(De)&&O!==void 0&&!s.hasOwnProperty(De)&&Sc(e,t,De,void 0,s,O);for(L in s)O=s[L],U=a[L],!s.hasOwnProperty(L)||O===U||O===void 0&&U===void 0||Sc(e,t,L,O,s,U);return}}for(var T in a)O=a[T],a.hasOwnProperty(T)&&O!=null&&!s.hasOwnProperty(T)&&Ue(e,t,T,null,s,O);for(I in s)O=s[I],U=a[I],!s.hasOwnProperty(I)||O===U||O==null&&U==null||Ue(e,t,I,O,s,U)}function Bf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ig(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var o=a[s],u=o.transferSize,m=o.initiatorType,y=o.duration;if(u&&y&&Bf(m)){for(m=0,y=o.responseEnd,s+=1;s<a.length;s++){var _=a[s],A=_.startTime;if(A>y)break;var L=_.transferSize,I=_.initiatorType;L&&Bf(I)&&(_=_.responseEnd,m+=L*(_<y?1:(y-A)/(_-A)))}if(--s,t+=8*(u+m)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var jc=null,Nc=null;function tl(e){return e.nodeType===9?e:e.ownerDocument}function Lf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tc=null;function lg(){var e=window.event;return e&&e.type==="popstate"?e===Tc?!1:(Tc=e,!0):(Tc=null,!1)}var Hf=typeof setTimeout=="function"?setTimeout:void 0,og=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,cg=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(e){return If.resolve(null).then(e).catch(ug)}:Hf;function ug(e){setTimeout(function(){throw e})}function dn(e){return e==="head"}function $f(e,t){var a=t,s=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(o),zs(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")zr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,zr(a);for(var u=a.firstChild;u;){var m=u.nextSibling,y=u.nodeName;u[Fs]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=m}}else a==="body"&&zr(e.ownerDocument.body);a=o}while(a);zs(t)}function Vf(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function kc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":kc(a),Cl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function dg(e,t,a,s){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Fs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=ea(e.nextSibling),e===null)break}return null}function hg(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ea(e.nextSibling),e===null))return null;return e}function Gf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ea(e.nextSibling),e===null))return null;return e}function Ac(e){return e.data==="$?"||e.data==="$~"}function Oc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function fg(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Rc=null;function Yf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return ea(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Kf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Xf(e,t,a){switch(t=tl(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function zr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cl(e)}var ta=new Map,Jf=new Set;function al(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var qa=K.d;K.d={f:mg,r:pg,D:gg,C:bg,L:vg,m:yg,X:wg,S:xg,M:_g};function mg(){var e=qa.f(),t=Xi();return e||t}function pg(e){var t=es(e);t!==null&&t.tag===5&&t.type==="form"?uh(t):qa.r(e)}var Cs=typeof document>"u"?null:document;function Qf(e,t,a){var s=Cs;if(s&&typeof t=="string"&&t){var o=Xt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),Jf.has(o)||(Jf.add(o),e={rel:e,crossOrigin:a,href:t},s.querySelector(o)===null&&(t=s.createElement("link"),ht(t,"link",e),it(t),s.head.appendChild(t)))}}function gg(e){qa.D(e),Qf("dns-prefetch",e,null)}function bg(e,t){qa.C(e,t),Qf("preconnect",e,t)}function vg(e,t,a){qa.L(e,t,a);var s=Cs;if(s&&e&&t){var o='link[rel="preload"][as="'+Xt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Xt(a.imageSizes)+'"]')):o+='[href="'+Xt(e)+'"]';var u=o;switch(t){case"style":u=Us(e);break;case"script":u=Ds(e)}ta.has(u)||(e=v({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ta.set(u,e),s.querySelector(o)!==null||t==="style"&&s.querySelector(Mr(u))||t==="script"&&s.querySelector(Br(u))||(t=s.createElement("link"),ht(t,"link",e),it(t),s.head.appendChild(t)))}}function yg(e,t){qa.m(e,t);var a=Cs;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Xt(s)+'"][href="'+Xt(e)+'"]',u=o;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Ds(e)}if(!ta.has(u)&&(e=v({rel:"modulepreload",href:e},t),ta.set(u,e),a.querySelector(o)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Br(u)))return}s=a.createElement("link"),ht(s,"link",e),it(s),a.head.appendChild(s)}}}function xg(e,t,a){qa.S(e,t,a);var s=Cs;if(s&&e){var o=ts(s).hoistableStyles,u=Us(e);t=t||"default";var m=o.get(u);if(!m){var y={loading:0,preload:null};if(m=s.querySelector(Mr(u)))y.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ta.get(u))&&Cc(e,a);var _=m=s.createElement("link");it(_),ht(_,"link",e),_._p=new Promise(function(A,L){_.onload=A,_.onerror=L}),_.addEventListener("load",function(){y.loading|=1}),_.addEventListener("error",function(){y.loading|=2}),y.loading|=4,nl(m,t,s)}m={type:"stylesheet",instance:m,count:1,state:y},o.set(u,m)}}}function wg(e,t){qa.X(e,t);var a=Cs;if(a&&e){var s=ts(a).hoistableScripts,o=Ds(e),u=s.get(o);u||(u=a.querySelector(Br(o)),u||(e=v({src:e,async:!0},t),(t=ta.get(o))&&Uc(e,t),u=a.createElement("script"),it(u),ht(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(o,u))}}function _g(e,t){qa.M(e,t);var a=Cs;if(a&&e){var s=ts(a).hoistableScripts,o=Ds(e),u=s.get(o);u||(u=a.querySelector(Br(o)),u||(e=v({src:e,async:!0,type:"module"},t),(t=ta.get(o))&&Uc(e,t),u=a.createElement("script"),it(u),ht(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(o,u))}}function Zf(e,t,a,s){var o=(o=le.current)?al(o):null;if(!o)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Us(a.href),a=ts(o).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Us(a.href);var u=ts(o).hoistableStyles,m=u.get(e);if(m||(o=o.ownerDocument||o,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=o.querySelector(Mr(e)))&&!u._p&&(m.instance=u,m.state.loading=5),ta.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ta.set(e,a),u||Sg(o,e,a,m.state))),t&&s===null)throw Error(l(528,""));return m}if(t&&s!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ds(a),a=ts(o).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Us(e){return'href="'+Xt(e)+'"'}function Mr(e){return'link[rel="stylesheet"]['+e+"]"}function Pf(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Sg(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),ht(t,"link",a),it(t),e.head.appendChild(t))}function Ds(e){return'[src="'+Xt(e)+'"]'}function Br(e){return"script[async]"+e}function Wf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Xt(a.href)+'"]');if(s)return t.instance=s,it(s),s;var o=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),it(s),ht(s,"style",o),nl(s,a.precedence,e),t.instance=s;case"stylesheet":o=Us(a.href);var u=e.querySelector(Mr(o));if(u)return t.state.loading|=4,t.instance=u,it(u),u;s=Pf(a),(o=ta.get(o))&&Cc(s,o),u=(e.ownerDocument||e).createElement("link"),it(u);var m=u;return m._p=new Promise(function(y,_){m.onload=y,m.onerror=_}),ht(u,"link",s),t.state.loading|=4,nl(u,a.precedence,e),t.instance=u;case"script":return u=Ds(a.src),(o=e.querySelector(Br(u)))?(t.instance=o,it(o),o):(s=a,(o=ta.get(u))&&(s=v({},a),Uc(s,o)),e=e.ownerDocument||e,o=e.createElement("script"),it(o),ht(o,"link",s),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,nl(s,a.precedence,e));return t.instance}function nl(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=s.length?s[s.length-1]:null,u=o,m=0;m<s.length;m++){var y=s[m];if(y.dataset.precedence===t)u=y;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Cc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Uc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var sl=null;function Ff(e,t,a){if(sl===null){var s=new Map,o=sl=new Map;o.set(a,s)}else o=sl,s=o.get(a),s||(s=new Map,o.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var u=a[o];if(!(u[Fs]||u[ot]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(t)||"";m=e+m;var y=s.get(m);y?y.push(u):s.set(m,[u])}}return s}function em(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function jg(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function tm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Ng(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=Us(s.href),u=t.querySelector(Mr(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=rl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,it(u);return}u=t.ownerDocument||t,s=Pf(s),(o=ta.get(o))&&Cc(s,o),u=u.createElement("link"),it(u);var m=u;m._p=new Promise(function(y,_){m.onload=y,m.onerror=_}),ht(u,"link",s),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=rl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Dc=0;function Eg(e,t){return e.stylesheets&&e.count===0&&ll(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&ll(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Dc===0&&(Dc=62500*ig());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ll(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Dc?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(o)}}:null}function rl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ll(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var il=null;function ll(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,il=new Map,t.forEach(Tg,e),il=null,rl.call(e))}function Tg(e,t){if(!(t.state.loading&4)){var a=il.get(e);if(a)var s=a.get(null);else{a=new Map,il.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var m=o[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),s=m)}s&&a.set(null,s)}o=t.instance,m=o.getAttribute("data-precedence"),u=a.get(m)||s,u===s&&a.set(null,o),a.set(m,o),this.count++,s=rl.bind(this),o.addEventListener("load",s),o.addEventListener("error",s),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Lr={$$typeof:D,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function kg(e,t,a,s,o,u,m,y,_){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ya(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.hiddenUpdates=Ya(null),this.identifierPrefix=s,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function am(e,t,a,s,o,u,m,y,_,A,L,I){return e=new kg(e,t,a,m,_,A,L,I,y),t=1,u===!0&&(t|=24),u=Bt(3,null,null,t),e.current=u,u.stateNode=e,t=fo(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:a,cache:t},bo(u),e}function nm(e){return e?(e=ds,e):ds}function sm(e,t,a,s,o,u){o=nm(o),s.context===null?s.context=o:s.pendingContext=o,s=Fa(t),s.payload={element:a},u=u===void 0?null:u,u!==null&&(s.callback=u),a=en(e,s,t),a!==null&&(Ut(a,e,t),gr(a,e,t))}function rm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function zc(e,t){rm(e,t),(e=e.alternate)&&rm(e,t)}function im(e){if(e.tag===13||e.tag===31){var t=An(e,67108864);t!==null&&Ut(t,e,67108864),zc(e,67108864)}}function lm(e){if(e.tag===13||e.tag===31){var t=$t();t=Pn(t);var a=An(e,t);a!==null&&Ut(a,e,t),zc(e,t)}}var ol=!0;function Ag(e,t,a,s){var o=C.T;C.T=null;var u=K.p;try{K.p=2,Mc(e,t,a,s)}finally{K.p=u,C.T=o}}function Og(e,t,a,s){var o=C.T;C.T=null;var u=K.p;try{K.p=8,Mc(e,t,a,s)}finally{K.p=u,C.T=o}}function Mc(e,t,a,s){if(ol){var o=Bc(s);if(o===null)_c(e,t,s,cl,a),cm(e,s);else if(Cg(o,e,t,a,s))s.stopPropagation();else if(cm(e,s),t&4&&-1<Rg.indexOf(e)){for(;o!==null;){var u=es(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=ma(u.pendingLanes);if(m!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var _=1<<31-pt(m);y.entanglements[1]|=_,m&=~_}va(u),(Ee&6)===0&&(Yi=wt()+500,Cr(0))}}break;case 31:case 13:y=An(u,2),y!==null&&Ut(y,u,2),Xi(),zc(u,2)}if(u=Bc(s),u===null&&_c(e,t,s,cl,a),u===o)break;o=u}o!==null&&s.stopPropagation()}else _c(e,t,s,null,a)}}function Bc(e){return e=Ll(e),Lc(e)}var cl=null;function Lc(e){if(cl=null,e=Fn(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=f(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cl=e,null}function om(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kl()){case xn:return 2;case ti:return 8;case wn:case Ps:return 32;case wa:return 268435456;default:return 32}default:return 32}}var qc=!1,hn=null,fn=null,mn=null,qr=new Map,Hr=new Map,pn=[],Rg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cm(e,t){switch(e){case"focusin":case"focusout":hn=null;break;case"dragenter":case"dragleave":fn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":qr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(t.pointerId)}}function Ir(e,t,a,s,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:u,targetContainers:[o]},t!==null&&(t=es(t),t!==null&&im(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Cg(e,t,a,s,o){switch(t){case"focusin":return hn=Ir(hn,e,t,a,s,o),!0;case"dragenter":return fn=Ir(fn,e,t,a,s,o),!0;case"mouseover":return mn=Ir(mn,e,t,a,s,o),!0;case"pointerover":var u=o.pointerId;return qr.set(u,Ir(qr.get(u)||null,e,t,a,s,o)),!0;case"gotpointercapture":return u=o.pointerId,Hr.set(u,Ir(Hr.get(u)||null,e,t,a,s,o)),!0}return!1}function um(e){var t=Fn(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=f(a),t!==null){e.blockedOn=t,Su(e.priority,function(){lm(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Su(e.priority,function(){lm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Bc(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Bl=s,a.target.dispatchEvent(s),Bl=null}else return t=es(a),t!==null&&im(t),e.blockedOn=a,!1;t.shift()}return!0}function dm(e,t,a){ul(e)&&a.delete(t)}function Ug(){qc=!1,hn!==null&&ul(hn)&&(hn=null),fn!==null&&ul(fn)&&(fn=null),mn!==null&&ul(mn)&&(mn=null),qr.forEach(dm),Hr.forEach(dm)}function dl(e,t){e.blockedOn===t&&(e.blockedOn=null,qc||(qc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ug)))}var hl=null;function hm(e){hl!==e&&(hl=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){hl===e&&(hl=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],o=e[t+2];if(typeof s!="function"){if(Lc(s||a)===null)continue;break}var u=es(a);u!==null&&(e.splice(t,3),t-=3,Bo(u,{pending:!0,data:o,method:a.method,action:s},s,o))}}))}function zs(e){function t(_){return dl(_,e)}hn!==null&&dl(hn,e),fn!==null&&dl(fn,e),mn!==null&&dl(mn,e),qr.forEach(t),Hr.forEach(t);for(var a=0;a<pn.length;a++){var s=pn[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<pn.length&&(a=pn[0],a.blockedOn===null);)um(a),a.blockedOn===null&&pn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var o=a[s],u=a[s+1],m=o[Tt]||null;if(typeof u=="function")m||hm(a);else if(m){var y=null;if(u&&u.hasAttribute("formAction")){if(o=u,m=u[Tt]||null)y=m.formAction;else if(Lc(o)!==null)continue}else y=m.action;typeof y=="function"?a[s+1]=y:(a.splice(s,3),s-=3),hm(a)}}}function fm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return o=m})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Hc(e){this._internalRoot=e}fl.prototype.render=Hc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,s=$t();sm(a,s,e,t,null,null)},fl.prototype.unmount=Hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sm(e.current,2,null,e,null,null),Xi(),t[Wn]=null}};function fl(e){this._internalRoot=e}fl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ol();e={blockedOn:null,target:e,priority:t};for(var a=0;a<pn.length&&t!==0&&t<pn[a].priority;a++);pn.splice(a,0,e),a===0&&um(e)}};var mm=n.version;if(mm!=="19.2.3")throw Error(l(527,mm,"19.2.3"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=b(t),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var Dg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{_n=ml.inject(Dg),_t=ml}catch{}}return Vr.createRoot=function(e,t){if(!d(e))throw Error(l(299));var a=!1,s="",o=xh,u=wh,m=_h;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=am(e,1,!1,null,null,a,s,null,o,u,m,fm),e[Wn]=t.current,wc(e),new Hc(t)},Vr.hydrateRoot=function(e,t,a){if(!d(e))throw Error(l(299));var s=!1,o="",u=xh,m=wh,y=_h,_=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.formState!==void 0&&(_=a.formState)),t=am(e,1,!0,t,a??null,s,o,_,u,m,y,fm),t.context=nm(null),a=t.current,s=$t(),s=Pn(s),o=Fa(s),o.callback=null,en(a,o,s),a=s,t.current.lanes=a,Ie(t,a),va(t),e[Wn]=t.current,wc(e),new fl(t)},Vr.version="19.2.3",Vr}var jm;function Vg(){if(jm)return Vc.exports;jm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),Vc.exports=$g(),Vc.exports}var Gg=Vg();const Yg=({children:i,user:n,onLogout:r,onToggleView:l,isUserMode:d,onAdminUsers:h})=>{const[f,g]=Q.useState(!1);return c.jsxs("div",{className:"flex min-h-screen font-sans relative overflow-x-hidden",children:[c.jsxs("div",{className:"md:hidden fixed top-0 left-0 right-0 z-[100] bg-black border-b border-white/10 flex items-center justify-between px-4 pt-[env(safe-area-inset-top,20px)] h-[calc(5rem+env(safe-area-inset-top,20px))] shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-brand-orange/20 to-brand-purple/20 flex items-center justify-center border border-white/10 shadow-inner",children:n?.avatarUrl?c.jsx("img",{src:n.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover rounded-2xl"}):c.jsx("span",{className:"text-2xl",children:""})}),c.jsx("div",{className:"flex flex-col",children:c.jsx("span",{className:"text-sm font-display font-black text-white italic truncate max-w-[120px] uppercase",children:n?.username||"GUEST"})})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex flex-col items-end bg-white/5 px-3 py-1.5 rounded-xl border border-white/10 shadow-inner",children:[c.jsx("span",{className:"text-[6px] text-gray-500 font-black uppercase tracking-widest leading-none mb-0.5",children:"Balance"}),c.jsxs("div",{className:"flex items-baseline gap-1",children:[c.jsx("span",{className:"text-lg font-mono font-black text-brand-gold drop-shadow-[0_0_10px_rgba(255,204,0,0.3)]",children:n?.tokens||0}),c.jsx("span",{className:"text-[7px] font-black text-brand-gold/60",children:"FTK"})]})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[n?.role==="ADMIN"&&h&&c.jsx("button",{onClick:h,className:"w-10 h-10 flex items-center justify-center bg-brand-diamond/10 rounded-xl border border-brand-diamond/30 text-brand-diamond text-lg hover:bg-brand-diamond/20 transition-all touch-target",title:"Admin Panel",children:""}),c.jsx("button",{onClick:()=>g(!f),className:"w-10 h-10 flex items-center justify-center bg-white/5 rounded-xl border border-white/10 text-white shadow-xl touch-target",children:f?"":""})]})]})]}),c.jsxs("aside",{className:`
                fixed md:static inset-y-0 left-0 z-40 w-64 sm:w-72 md:w-64 liquid-glass m-3 md:m-0 md:mr-0 flex flex-col border-white/5 shadow-2xl transition-transform duration-500
                ${f?"translate-x-0":"-translate-x-full md:translate-x-0"}
            `,children:[c.jsx("div",{className:"hidden md:block p-8 md:p-10 border-b border-white/5",children:c.jsxs("h1",{className:"text-[0.98rem] md:text-[1.46rem] modern-title",children:["FANNY",c.jsx("span",{className:"text-brand-orange drop-shadow-[0_0_10px_rgba(255,106,0,0.5)]",children:"BET"})]})}),c.jsxs("div",{className:"flex-1 px-4 py-6 md:py-20 flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-white/5 border border-white/10 flex items-center justify-center mb-4 animate-pulse-slow",children:c.jsx("span",{className:"text-4xl md:text-5xl text-brand-orange",children:""})}),c.jsx("p",{className:"text-[9px] text-gray-400 font-black uppercase tracking-[0.4em] mb-2",children:"Core Protocol"}),c.jsx("p",{className:"text-[11px] text-gray-500 italic px-3 leading-relaxed opacity-60",children:"Seleziona una categoria per visualizzare i mercati attivi."})]}),n&&c.jsx("div",{className:"p-4 md:p-6 mt-auto",children:c.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 md:gap-3 py-3 md:py-4 border border-white/5 bg-white/[0.02] text-gray-400 rounded-2xl hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/20 transition-all font-black text-[9px] md:text-[10px] uppercase tracking-[0.2em] touch-target",children:[c.jsx("span",{className:"text-lg",children:""})," ",c.jsx("span",{className:"hidden sm:inline",children:"ESCI"})]})})]}),f&&c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 md:hidden",onClick:()=>g(!1)}),c.jsxs("div",{className:"flex-1 flex flex-col p-2 md:p-6 space-y-2 md:space-y-6 max-h-screen pt-20 md:pt-6 overflow-hidden",children:[c.jsxs("header",{className:"hidden md:flex liquid-glass px-6 md:px-10 py-5 items-center justify-between border-white/5 h-24 md:h-28 shadow-2xl",children:[c.jsxs("div",{className:"flex items-center gap-3 md:gap-5 min-w-0",children:[c.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-xl md:rounded-2xl bg-gradient-to-br from-brand-orange/20 to-brand-purple/20 flex items-center justify-center border border-white/10 shadow-inner flex-shrink-0 overflow-hidden",children:n?.avatarUrl?c.jsx("img",{src:n.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-2xl md:text-3xl animate-glow",children:""})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-[0.4em] mb-1",children:"Authenticated As"}),c.jsx("h2",{className:"text-xl md:text-3xl font-display font-black tracking-tight text-white/90 truncate",children:n?.username||"GUEST_USER"})]})]}),c.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-[10px] text-gray-500 font-black uppercase tracking-[0.4em] mb-2",children:"Credits"}),c.jsxs("div",{className:"flex items-baseline gap-1 md:gap-2",children:[c.jsx("span",{className:"text-xl md:text-3xl font-display font-black text-brand-orange drop-shadow-[0_0_15px_rgba(255,106,0,0.3)]",children:n?.tokens||0}),c.jsx("span",{className:"text-[10px] md:text-xs font-black text-white/30 tracking-widest italic",children:"TK"})]})]}),c.jsx("div",{className:"h-10 md:h-12 w-[1px] bg-white/10"}),n?.role==="ADMIN"&&h&&c.jsxs("button",{onClick:h,className:"bg-brand-diamond/10 hover:bg-brand-diamond/20 p-3 md:p-4 rounded-xl md:rounded-2xl transition-all border border-brand-diamond/30 group relative touch-target",title:"Gestisci Utenti",children:[c.jsx("div",{className:"absolute inset-0 bg-brand-diamond/5 rounded-2xl blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:scale-110 transition-transform duration-500 relative z-10 text-brand-diamond/70 group-hover:text-brand-diamond",children:[c.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"9",cy:"7",r:"4"}),c.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),c.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})]}),c.jsx("div",{className:"h-10 md:h-12 w-[1px] bg-white/10"}),l&&c.jsxs("button",{onClick:l,className:"bg-white/5 hover:bg-white/10 p-3 md:p-4 rounded-xl md:rounded-2xl transition-all border border-white/10 group relative touch-target",title:d?"Activate Admin Matrix":"Return to User Grid",children:[c.jsx("div",{className:"absolute inset-0 bg-brand-orange/5 rounded-2xl blur-md opacity-0 group-hover:opacity-100 transition-opacity"}),c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:rotate-90 transition-transform duration-500 relative z-10 text-white/70 group-hover:text-brand-orange",children:[c.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),c.jsx("circle",{cx:"12",cy:"12",r:"3"})]})]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-1 md:pr-2 no-scrollbar",children:c.jsx("div",{className:"max-w-6xl mx-auto py-1 md:py-4 px-1 md:px-0",children:i})})]})]})};function Nl(i,n){var r={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(r[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(i);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(i,l[d])&&(r[l[d]]=i[l[d]]);return r}function Kg(i,n,r,l){function d(h){return h instanceof r?h:new r(function(f){f(h)})}return new(r||(r=Promise))(function(h,f){function g(w){try{b(l.next(w))}catch(v){f(v)}}function p(w){try{b(l.throw(w))}catch(v){f(v)}}function b(w){w.done?h(w.value):d(w.value).then(g,p)}b((l=l.apply(i,n||[])).next())})}const Xg=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class gu extends Error{constructor(n,r="FunctionsError",l){super(n),this.name=r,this.context=l}}class Jg extends gu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Nm extends gu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Em extends gu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var nu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(nu||(nu={}));class Qg{constructor(n,{headers:r={},customFetch:l,region:d=nu.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=Xg(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Kg(this,arguments,void 0,function*(r,l={}){var d;let h,f;try{const{headers:g,method:p,body:b,signal:w,timeout:v}=l;let x={},{region:S}=l;S||(S=this.region);const j=new URL(`${this.url}/${r}`);S&&S!=="any"&&(x["x-region"]=S,j.searchParams.set("forceFunctionRegion",S));let R;b&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",R=b):typeof b=="string"?(x["Content-Type"]="text/plain",R=b):typeof FormData<"u"&&b instanceof FormData?R=b:(x["Content-Type"]="application/json",R=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?R=JSON.stringify(b):R=b;let z=w;v&&(f=new AbortController,h=setTimeout(()=>f.abort(),v),w?(z=f.signal,w.addEventListener("abort",()=>f.abort())):z=f.signal);const B=yield this.fetch(j.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),g),body:R,signal:z}).catch(he=>{throw new Jg(he)}),X=B.headers.get("x-relay-error");if(X&&X==="true")throw new Nm(B);if(!B.ok)throw new Em(B);let D=((d=B.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),Z;return D==="application/json"?Z=yield B.json():D==="application/octet-stream"||D==="application/pdf"?Z=yield B.blob():D==="text/event-stream"?Z=B:D==="multipart/form-data"?Z=yield B.formData():Z=yield B.text(),{data:Z,error:null,response:B}}catch(g){return{data:null,error:g,response:g instanceof Em||g instanceof Nm?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var Zg=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},Pg=class{constructor(i){var n,r;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(r=i.isMaybeSingle)!==null&&r!==void 0?r:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,g=null,p=null,b=h.status,w=h.statusText;if(h.ok){var v,x;if(r.method!=="HEAD"){var S;const B=await h.text();B===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((S=r.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?g=B:g=JSON.parse(B))}const R=(v=r.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),z=(x=h.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");R&&z&&z.length>1&&(p=parseInt(z[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,p=null,b=406,w="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var j;const R=await h.text();try{f=JSON.parse(R),Array.isArray(f)&&h.status===404&&(g=[],f=null,b=200,w="OK")}catch{h.status===404&&R===""?(b=204,w="No Content"):f={message:R}}if(f&&r.isMaybeSingle&&(!(f==null||(j=f.details)===null||j===void 0)&&j.includes("0 rows"))&&(f=null,b=200,w="OK"),f&&r.shouldThrowOnError)throw new Zg(f)}return{error:f,data:g,count:p,status:b,statusText:w}});return this.shouldThrowOnError||(d=d.catch(h=>{var f;let g="";const p=h?.cause;if(p){var b,w,v,x;const j=(b=p?.message)!==null&&b!==void 0?b:"",R=(w=p?.code)!==null&&w!==void 0?w:"";g=`${(v=h?.name)!==null&&v!==void 0?v:"FetchError"}: ${h?.message}`,g+=`

Caused by: ${(x=p?.name)!==null&&x!==void 0?x:"Error"}: ${j}`,R&&(g+=` (${R})`),p?.stack&&(g+=`
${p.stack}`)}else{var S;g=(S=h?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(i,n)}returns(){return this}overrideTypes(){return this}},Wg=class extends Pg{select(i){let n=!1;const r=(i??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:r,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${i}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,n,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(h,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:r=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var f;const g=[i?"analyze":null,n?"verbose":null,r?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${p}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const Tm=new RegExp("[,()]");var $s=class extends Wg{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&Tm.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}notIn(i,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&Tm.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`not.in.(${r})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:r,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${d}fts${h}.${n}`),this}match(i){return Object.entries(i).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(i,n,r){return this.url.searchParams.append(i,`not.${n}.${r}`),this}or(i,{foreignTable:n,referencedTable:r=n}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,n,r){return this.url.searchParams.append(i,`${n}.${r}`),this}},Fg=class{constructor(i,{headers:n={},schema:r,fetch:l}){this.url=i,this.headers=new Headers(n),this.schema=r,this.fetch=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:r=!1,count:l}=n??{},d=r?"HEAD":"GET";let h=!1;const f=(i??"*").split("").map(b=>/\s/.test(b)&&!h?"":(b==='"'&&(h=!h),b)).join(""),{url:g,headers:p}=this.cloneRequestState();return g.searchParams.set("select",f),l&&p.append("Prefer",`count=${l}`),new $s({method:d,url:g,headers:p,schema:this.schema,fetch:this.fetch})}insert(i,{count:n,defaultToNull:r=!0}={}){var l;const d="POST",{url:h,headers:f}=this.cloneRequestState();if(n&&f.append("Prefer",`count=${n}`),r||f.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((p,b)=>p.concat(Object.keys(b)),[]);if(g.length>0){const p=[...new Set(g)].map(b=>`"${b}"`);h.searchParams.set("columns",p.join(","))}}return new $s({method:d,url:h,headers:f,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:n,ignoreDuplicates:r=!1,count:l,defaultToNull:d=!0}={}){var h;const f="POST",{url:g,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&g.searchParams.set("on_conflict",n),l&&p.append("Prefer",`count=${l}`),d||p.append("Prefer","missing=default"),Array.isArray(i)){const b=i.reduce((w,v)=>w.concat(Object.keys(v)),[]);if(b.length>0){const w=[...new Set(b)].map(v=>`"${v}"`);g.searchParams.set("columns",w.join(","))}}return new $s({method:f,url:g,headers:p,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(i,{count:n}={}){var r;const l="PATCH",{url:d,headers:h}=this.cloneRequestState();return n&&h.append("Prefer",`count=${n}`),new $s({method:l,url:d,headers:h,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:i}={}){var n;const r="DELETE",{url:l,headers:d}=this.cloneRequestState();return i&&d.append("Prefer",`count=${i}`),new $s({method:r,url:l,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},eb=class n0{constructor(n,{headers:r={},schema:l,fetch:d}={}){this.url=n,this.headers=new Headers(r),this.schemaName=l,this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Fg(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new n0(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:l=!1,get:d=!1,count:h}={}){var f;let g;const p=new URL(`${this.url}/rpc/${n}`);let b;const w=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(w)),v=l&&Object.values(r).some(w);v?(g="POST",b=r):l||d?(g=l?"HEAD":"GET",Object.entries(r).filter(([S,j])=>j!==void 0).map(([S,j])=>[S,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([S,j])=>{p.searchParams.append(S,j)})):(g="POST",b=r);const x=new Headers(this.headers);return v?x.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&x.set("Prefer",`count=${h}`),new $s({method:g,url:p,headers:x,schema:this.schemaName,body:b,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class tb{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const d=l.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const l=this.getWebSocketConstructor();return new l(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const ab="2.90.1",nb=`realtime-js/${ab}`,s0="1.0.0",sb="2.0.0",km=s0,su=1e4,rb=1e3,ib=100;var bn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(bn||(bn={}));var st;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(st||(st={}));var ua;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(ua||(ua={}));var ru;(function(i){i.websocket="websocket"})(ru||(ru={}));var Yn;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Yn||(Yn={}));class lb{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(n,r,l){var d,h;const f=n.topic,g=(d=n.ref)!==null&&d!==void 0?d:"",p=(h=n.join_ref)!==null&&h!==void 0?h:"",b=n.payload.event,w=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},v=Object.keys(w).length===0?"":JSON.stringify(w);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+g.length+f.length+b.length+v.length,S=new ArrayBuffer(this.HEADER_LENGTH+x);let j=new DataView(S),R=0;j.setUint8(R++,this.KINDS.userBroadcastPush),j.setUint8(R++,p.length),j.setUint8(R++,g.length),j.setUint8(R++,f.length),j.setUint8(R++,b.length),j.setUint8(R++,v.length),j.setUint8(R++,r),Array.from(p,B=>j.setUint8(R++,B.charCodeAt(0))),Array.from(g,B=>j.setUint8(R++,B.charCodeAt(0))),Array.from(f,B=>j.setUint8(R++,B.charCodeAt(0))),Array.from(b,B=>j.setUint8(R++,B.charCodeAt(0))),Array.from(v,B=>j.setUint8(R++,B.charCodeAt(0)));var z=new Uint8Array(S.byteLength+l.byteLength);return z.set(new Uint8Array(S),0),z.set(new Uint8Array(l),S.byteLength),z.buffer}decode(n,r){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return r(l)}if(typeof n=="string"){const l=JSON.parse(n),[d,h,f,g,p]=l;return r({join_ref:d,ref:h,topic:f,event:g,payload:p})}return r({})}_binaryDecode(n){const r=new DataView(n),l=r.getUint8(0),d=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(n,r,d)}_decodeUserBroadcast(n,r,l){const d=r.getUint8(1),h=r.getUint8(2),f=r.getUint8(3),g=r.getUint8(4);let p=this.HEADER_LENGTH+4;const b=l.decode(n.slice(p,p+d));p=p+d;const w=l.decode(n.slice(p,p+h));p=p+h;const v=l.decode(n.slice(p,p+f));p=p+f;const x=n.slice(p,n.byteLength),S=g===this.JSON_ENCODING?JSON.parse(l.decode(x)):x,j={type:this.BROADCAST_EVENT,event:w,payload:S};return f>0&&(j.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>r.includes(l)))}}class r0{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Me;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Me||(Me={}));const Am=(i,n,r={})=>{var l;const d=(l=r.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((h,f)=>(h[f]=ob(f,i,n,d),h),{}):{}},ob=(i,n,r,l)=>{const d=n.find(g=>g.name===i),h=d?.type,f=r[i];return h&&!l.includes(h)?i0(h,f):iu(f)},i0=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return hb(n,r)}switch(i){case Me.bool:return cb(n);case Me.float4:case Me.float8:case Me.int2:case Me.int4:case Me.int8:case Me.numeric:case Me.oid:return ub(n);case Me.json:case Me.jsonb:return db(n);case Me.timestamp:return fb(n);case Me.abstime:case Me.date:case Me.daterange:case Me.int4range:case Me.int8range:case Me.money:case Me.reltime:case Me.text:case Me.time:case Me.timestamptz:case Me.timetz:case Me.tsrange:case Me.tstzrange:return iu(n);default:return iu(n)}},iu=i=>i,cb=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},ub=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},db=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},hb=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,l=i[r];if(i[0]==="{"&&l==="}"){let h;const f=i.slice(1,r);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>i0(n,g))}return i},fb=i=>typeof i=="string"?i.replace(" ","T"):i,l0=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Xc{constructor(n,r,l={},d=su){this.channel=n,this.event=r,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var l;return this._hasReceived(n)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Om;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Om||(Om={}));class Yr{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yr.syncState(this.state,d,h,f),this.pendingDiffs.forEach(p=>{this.state=Yr.syncDiff(this.state,p,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Yr.syncDiff(this.state,d,h,f),g())}),this.onJoin((d,h,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:f})}),this.onLeave((d,h,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,l,d){const h=this.cloneDeep(n),f=this.transformState(r),g={},p={};return this.map(h,(b,w)=>{f[b]||(p[b]=w)}),this.map(f,(b,w)=>{const v=h[b];if(v){const x=w.map(z=>z.presence_ref),S=v.map(z=>z.presence_ref),j=w.filter(z=>S.indexOf(z.presence_ref)<0),R=v.filter(z=>x.indexOf(z.presence_ref)<0);j.length>0&&(g[b]=j),R.length>0&&(p[b]=R)}else g[b]=w}),this.syncDiff(h,{joins:g,leaves:p},l,d)}static syncDiff(n,r,l,d){const{joins:h,leaves:f}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(h,(g,p)=>{var b;const w=(b=n[g])!==null&&b!==void 0?b:[];if(n[g]=this.cloneDeep(p),w.length>0){const v=n[g].map(S=>S.presence_ref),x=w.filter(S=>v.indexOf(S.presence_ref)<0);n[g].unshift(...x)}l(g,w,p)}),this.map(f,(g,p)=>{let b=n[g];if(!b)return;const w=p.map(v=>v.presence_ref);b=b.filter(v=>w.indexOf(v.presence_ref)<0),n[g]=b,d(g,b,p),b.length===0&&delete n[g]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(l=>r(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,l)=>{const d=n[l];return"metas"in d?r[l]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[l]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rm;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Rm||(Rm={}));var Kr;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Kr||(Kr={}));var Ia;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ia||(Ia={}));class Ys{constructor(n,r={config:{}},l){var d,h;if(this.topic=n,this.params=r,this.socket=l,this.bindings={},this.state=st.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Xc(this,ua.join,this.params,this.timeout),this.rejoinTimer=new r0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=st.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=st.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=st.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ua.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new Yr(this),this.broadcastEndpointURL=l0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var l,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==st.closed){const{config:{broadcast:f,presence:g,private:p}}=this.params,b=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(S=>S.filter))!==null&&d!==void 0?d:[],w=!!this.bindings[Kr.PRESENCE]&&this.bindings[Kr.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,v={},x={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:w}),postgres_changes:b,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(S=>n?.(Ia.CHANNEL_ERROR,S)),this._onClose(()=>n?.(Ia.CLOSED)),this.updateJoinPayload(Object.assign({config:x},v)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:S})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){n?.(Ia.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,z=(j=R?.length)!==null&&j!==void 0?j:0,B=[];for(let X=0;X<z;X++){const D=R[X],{filter:{event:Z,schema:he,table:M,filter:G}}=D,re=S&&S[X];if(re&&re.event===Z&&Ys.isFilterValueEqual(re.schema,he)&&Ys.isFilterValueEqual(re.table,M)&&Ys.isFilterValueEqual(re.filter,G))B.push(Object.assign(Object.assign({},D),{id:re.id}));else{this.unsubscribe(),this.state=st.errored,n?.(Ia.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=B,n&&n(Ia.SUBSCRIBED);return}}).receive("error",S=>{this.state=st.errored,n?.(Ia.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{n?.(Ia.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,l){return this.state===st.joined&&n===Kr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,l)}async httpSend(n,r,l={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let p=g.statusText;try{const b=await g.json();p=b.error||b.message||p}catch{}return Promise.reject(new Error(p))}async send(n,r={}){var l,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=n,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=b.body)===null||d===void 0?void 0:d.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,p;const b=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((p=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||p===void 0)&&p.ack)&&h("ok"),b.receive("ok",()=>h("ok")),b.receive("error",()=>h("error")),b.receive("timeout",()=>h("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=st.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ua.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new Xc(this,ua.leave,{},n),l.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=st.closed,this.bindings={}}async _fetchWithTimeout(n,r,l){const d=new AbortController,h=setTimeout(()=>d.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),f}_push(n,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new Xc(this,n,r,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>ib){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,l){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,l){var d,h;const f=n.toLocaleLowerCase(),{close:g,error:p,leave:b,join:w}=ua;if(l&&[g,p,b,w].indexOf(f)>=0&&l!==this._joinRef())return;let x=this._onMessage(f,r,l);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(S=>{var j,R,z;return((j=S.filter)===null||j===void 0?void 0:j.event)==="*"||((z=(R=S.filter)===null||R===void 0?void 0:R.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===f}).map(S=>S.callback(x,l)):(h=this.bindings[f])===null||h===void 0||h.filter(S=>{var j,R,z,B,X,D,Z,he;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in S){const M=S.id,G=(j=S.filter)===null||j===void 0?void 0:j.event;return M&&((R=r.ids)===null||R===void 0?void 0:R.includes(M))&&(G==="*"||G?.toLocaleLowerCase()===((z=r.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))&&(!(!((B=S.filter)===null||B===void 0)&&B.table)||S.filter.table===((X=r.data)===null||X===void 0?void 0:X.table))}else{const M=(Z=(D=S?.filter)===null||D===void 0?void 0:D.event)===null||Z===void 0?void 0:Z.toLocaleLowerCase();return M==="*"||M===((he=r?.event)===null||he===void 0?void 0:he.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===f}).map(S=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:R,table:z,commit_timestamp:B,type:X,errors:D}=j;x=Object.assign(Object.assign({},{schema:R,table:z,commit_timestamp:B,eventType:X,new:{},old:{},errors:D}),this._getPayloadRecords(j))}S.callback(x,l)})}_isClosed(){return this.state===st.closed}_isJoined(){return this.state===st.joined}_isJoining(){return this.state===st.joining}_isLeaving(){return this.state===st.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,l){const d=n.toLocaleLowerCase(),h={type:d,filter:r,callback:l};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(n,r){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===l&&Ys.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const l in n)if(n[l]!==r[l])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(ua.close,{},n)}_onError(n){this._on(ua.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=st.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Am(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Am(n.columns,n.old_record)),r}}const Jc=()=>{},pl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mb=[1e3,2e3,5e3,1e4],pb=1e4,gb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bb{constructor(n,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=su,this.transport=null,this.heartbeatIntervalMs=pl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jc,this.ref=0,this.reconnectTimer=null,this.vsn=km,this.logger=Jc,this.conn=null,this.sendBuffer=[],this.serializer=new lb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((l=r?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${ru.websocket}`,this.httpEndpoint=l0(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tb.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,l){this.logger(n,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case bn.connecting:return Yn.Connecting;case bn.open:return Yn.Open;case bn.closing:return Yn.Closing;default:return Yn.Closed}}isConnected(){return this.connectionState()===Yn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const l=`realtime:${n}`,d=this.getChannels().find(h=>h.topic===l);if(d)return d;{const h=new Ys(`realtime:${n}`,r,this);return this.channels.push(h),h}}push(n){const{topic:r,event:l,payload:d,ref:h}=n,f=()=>{this.encode(n,g=>{var p;(p=this.conn)===null||p===void 0||p.send(g)})};this.log("push",`${r} ${l} (${h})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(rb,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",b)}catch(w){this.log("error","error in heartbeat callback",w)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:d,payload:h,ref:f}=r,g=f?`(${f})`:"",p=h.status||"";this.log("receive",`${p} ${l} ${d} ${g}`.trim(),h),this.channels.filter(b=>b._isMember(l)).forEach(b=>b._trigger(d,h,f)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===bn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bn.open||this.conn.readyState===bn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(ua.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const l=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${l}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const l=new Blob([gb],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,l=!1;if(n)r=n,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const h={access_token:r,version:nb};r&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(ua.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new r0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,l,d,h,f,g,p,b,w,v,x,S;switch(this.transport=(r=n?.transport)!==null&&r!==void 0?r:null,this.timeout=(l=n?.timeout)!==null&&l!==void 0?l:su,this.heartbeatIntervalMs=(d=n?.heartbeatIntervalMs)!==null&&d!==void 0?d:pl.HEARTBEAT_INTERVAL,this.worker=(h=n?.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=n?.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=n?.heartbeatCallback)!==null&&g!==void 0?g:Jc,this.vsn=(p=n?.vsn)!==null&&p!==void 0?p:km,n?.params&&(this.params=n.params),n?.logger&&(this.logger=n.logger),(n?.logLevel||n?.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=n?.reconnectAfterMs)!==null&&b!==void 0?b:(j=>mb[j-1]||pb),this.vsn){case s0:this.encode=(w=n?.encode)!==null&&w!==void 0?w:((j,R)=>R(JSON.stringify(j))),this.decode=(v=n?.decode)!==null&&v!==void 0?v:((j,R)=>R(JSON.parse(j)));break;case sb:this.encode=(x=n?.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(S=n?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n?.workerUrl}}}var Xr=class extends Error{constructor(i,n){super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&n.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function vb(i,n,r){const l=new URL(n,i);if(r)for(const[d,h]of Object.entries(r))h!==void 0&&l.searchParams.set(d,h);return l.toString()}async function yb(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function xb(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:d,body:h,headers:f}){const g=vb(i.baseUrl,l,d),p=await yb(i.auth),b=await n(g,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...p,...f},body:h?JSON.stringify(h):void 0}),w=await b.text(),v=(b.headers.get("content-type")||"").includes("application/json"),x=v&&w?JSON.parse(w):w;if(!b.ok){const S=v?x:void 0,j=S?.error;throw new Xr(j?.message??`Request failed with status ${b.status}`,{status:b.status,icebergType:j?.type,icebergCode:j?.code,details:S})}return{status:b.status,headers:b.headers,data:x}}}}function gl(i){return i.join("")}var wb=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:gl(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(i,n){const r={namespace:i.namespace,properties:n?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gl(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gl(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gl(i.namespace)}`}),!0}catch(n){if(n instanceof Xr&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(r){if(r instanceof Xr&&r.status===409)return;throw r}}};function Ms(i){return i.join("")}var _b=class{constructor(i,n="",r){this.client=i,this.prefix=n,this.accessDelegation=r}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ms(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ms(i.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(i,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ms(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ms(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(n?.purge??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ms(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ms(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(r){if(r instanceof Xr&&r.status===404)return!1;throw r}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(r){if(r instanceof Xr&&r.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw r}}},Sb=class{constructor(i){let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const r=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=xb({baseUrl:r,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new wb(this.client,n),this.tableOps=new _b(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},El=class extends Error{constructor(i){super(i),this.__isStorageError=!0,this.name="StorageError"}};function $e(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var jb=class extends El{constructor(i,n,r){super(i),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},lu=class extends El{constructor(i,n){super(i),this.name="StorageUnknownError",this.originalError=n}};const bu=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Nb=()=>Response,ou=i=>{if(Array.isArray(i))return i.map(r=>ou(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,l])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));n[d]=ou(l)}),n},Eb=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Tb=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function Jr(i){"@babel/helpers - typeof";return Jr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jr(i)}function kb(i,n){if(Jr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,n);if(Jr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Ab(i){var n=kb(i,"string");return Jr(n)=="symbol"?n:n+""}function Ob(i,n,r){return(n=Ab(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Cm(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,l)}return r}function ce(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Cm(Object(r),!0).forEach(function(l){Ob(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}const Qc=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},Rb=async(i,n,r)=>{i instanceof await Nb()&&!r?.noResolveJson?i.json().then(l=>{const d=i.status||500,h=l?.statusCode||d+"";n(new jb(Qc(l),d,h))}).catch(l=>{n(new lu(Qc(l),l))}):n(new lu(Qc(i),i))},Cb=(i,n,r,l)=>{const d={method:i,headers:n?.headers||{}};return i==="GET"||!l?d:(Eb(l)?(d.headers=ce({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,n?.duplex&&(d.duplex=n.duplex),ce(ce({},d),r))};async function Fr(i,n,r,l,d,h){return new Promise((f,g)=>{i(r,Cb(n,l,d,h)).then(p=>{if(!p.ok)throw p;return l?.noResolveJson?p:p.json()}).then(p=>f(p)).catch(p=>Rb(p,g,l))})}async function Qr(i,n,r,l){return Fr(i,"GET",n,r,l)}async function ca(i,n,r,l,d){return Fr(i,"POST",n,l,d,r)}async function cu(i,n,r,l,d){return Fr(i,"PUT",n,l,d,r)}async function Ub(i,n,r,l){return Fr(i,"HEAD",n,ce(ce({},r),{},{noResolveJson:!0}),l)}async function vu(i,n,r,l,d){return Fr(i,"DELETE",n,l,d,r)}var Db=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}};let o0;o0=Symbol.toStringTag;var zb=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[o0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Db(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if($e(n))return{data:null,error:n};throw n}}};const Mb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Um={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Bb=class{constructor(i,n={},r,l){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.bucketId=r,this.fetch=bu(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(i,n,r,l){var d=this;try{let h;const f=ce(ce({},Um),l);let g=ce(ce({},d.headers),i==="POST"&&{"x-upsert":String(f.upsert)});const p=f.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),p&&h.append("metadata",d.encodeMetadata(p)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),p&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(p))):(h=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,p&&(g["x-metadata"]=d.toBase64(d.encodeMetadata(p))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),l?.headers&&(g=ce(ce({},g),l.headers));const b=d._removeEmptyFolders(n),w=d._getFinalPath(b),v=await(i=="PUT"?cu:ca)(d.fetch,`${d.url}/object/${w}`,h,ce({headers:g},f?.duplex?{duplex:f.duplex}:{}));return{data:{path:b,id:v.Id,fullPath:v.Key},error:null}}catch(h){if(d.shouldThrowOnError)throw h;if($e(h))return{data:null,error:h};throw h}}async upload(i,n,r){return this.uploadOrUpdate("POST",i,n,r)}async uploadToSignedUrl(i,n,r,l){var d=this;const h=d._removeEmptyFolders(i),f=d._getFinalPath(h),g=new URL(d.url+`/object/upload/sign/${f}`);g.searchParams.set("token",n);try{let p;const b=ce({upsert:Um.upsert},l),w=ce(ce({},d.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&r instanceof Blob?(p=new FormData,p.append("cacheControl",b.cacheControl),p.append("",r)):typeof FormData<"u"&&r instanceof FormData?(p=r,p.append("cacheControl",b.cacheControl)):(p=r,w["cache-control"]=`max-age=${b.cacheControl}`,w["content-type"]=b.contentType),{data:{path:h,fullPath:(await cu(d.fetch,g.toString(),p,{headers:w})).Key},error:null}}catch(p){if(d.shouldThrowOnError)throw p;if($e(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(i,n){var r=this;try{let l=r._getFinalPath(i);const d=ce({},r.headers);n?.upsert&&(d["x-upsert"]="true");const h=await ca(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:d}),f=new URL(r.url+h.url),g=f.searchParams.get("token");if(!g)throw new El("No token returned by API");return{data:{signedUrl:f.toString(),path:i,token:g},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async update(i,n,r){return this.uploadOrUpdate("PUT",i,n,r)}async move(i,n,r){var l=this;try{return{data:await ca(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers}),error:null}}catch(d){if(l.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}}async copy(i,n,r){var l=this;try{return{data:{path:(await ca(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:l.headers})).Key},error:null}}catch(d){if(l.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}}async createSignedUrl(i,n,r){var l=this;try{let d=l._getFinalPath(i),h=await ca(l.fetch,`${l.url}/object/sign/${d}`,ce({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:l.headers});const f=r?.download?`&download=${r.download===!0?"":r.download}`:"";return h={signedUrl:encodeURI(`${l.url}${h.signedURL}${f}`)},{data:h,error:null}}catch(d){if(l.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}}async createSignedUrls(i,n,r){var l=this;try{const d=await ca(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:i},{headers:l.headers}),h=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:d.map(f=>ce(ce({},f),{},{signedUrl:f.signedURL?encodeURI(`${l.url}${f.signedURL}${h}`):null})),error:null}}catch(d){if(l.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}}download(i,n){const r=typeof n?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(n?.transform||{}),d=l?`?${l}`:"",h=this._getFinalPath(i),f=()=>Qr(this.fetch,`${this.url}/${r}/${h}${d}`,{headers:this.headers,noResolveJson:!0});return new zb(f,this.shouldThrowOnError)}async info(i){var n=this;const r=n._getFinalPath(i);try{return{data:ou(await Qr(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(l){if(n.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async exists(i){var n=this;const r=n._getFinalPath(i);try{return await Ub(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if($e(l)&&l instanceof lu){const d=l.originalError;if([400,404].includes(d?.status))return{data:!1,error:l}}throw l}}getPublicUrl(i,n){const r=this._getFinalPath(i),l=[],d=n?.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&l.push(d);const h=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&l.push(f);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${g}`)}}}async remove(i){var n=this;try{return{data:await vu(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async list(i,n,r){var l=this;try{const d=ce(ce(ce({},Mb),n),{},{prefix:i||""});return{data:await ca(l.fetch,`${l.url}/object/list/${l.bucketId}`,d,{headers:l.headers},r),error:null}}catch(d){if(l.shouldThrowOnError)throw d;if($e(d))return{data:null,error:d};throw d}}async listV2(i,n){var r=this;try{const l=ce({},i);return{data:await ca(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},n),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const c0="2.90.1",u0={"X-Client-Info":`storage-js/${c0}`};var Lb=class{constructor(i,n={},r,l){this.shouldThrowOnError=!1;const d=new URL(i);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=ce(ce({},u0),n),this.fetch=bu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(i){var n=this;try{const r=n.listBucketOptionsToQueryString(i);return{data:await Qr(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async getBucket(i){var n=this;try{return{data:await Qr(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async createBucket(i,n={public:!1}){var r=this;try{return{data:await ca(r.fetch,`${r.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async updateBucket(i,n){var r=this;try{return{data:await cu(r.fetch,`${r.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if($e(l))return{data:null,error:l};throw l}}async emptyBucket(i){var n=this;try{return{data:await ca(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await vu(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},qb=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ce(ce({},u0),n),this.fetch=bu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await ca(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async listBuckets(i){var n=this;try{const r=new URLSearchParams;i?.limit!==void 0&&r.set("limit",i.limit.toString()),i?.offset!==void 0&&r.set("offset",i.offset.toString()),i?.sortColumn&&r.set("sortColumn",i.sortColumn),i?.sortOrder&&r.set("sortOrder",i.sortOrder),i?.search&&r.set("search",i.search);const l=r.toString(),d=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return{data:await Qr(n.fetch,d,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await vu(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($e(r))return{data:null,error:r};throw r}}from(i){var n=this;if(!Tb(i))throw new El("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Sb({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const f=d[h];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(d,g),error:null}}catch(p){if(l)throw p;return{data:null,error:p}}}}})}};const yu={"X-Client-Info":`storage-js/${c0}`,"Content-Type":"application/json"};var d0=class extends Error{constructor(i){super(i),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Gt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}var Zc=class extends d0{constructor(i,n,r){super(i),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Hb=class extends d0{constructor(i,n){super(i),this.name="StorageVectorsUnknownError",this.originalError=n}};const xu=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Ib=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Dm=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),$b=async(i,n,r)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!r?.noResolveJson){const l=i.status||500,d=i;if(typeof d.json=="function")d.json().then(h=>{const f=h?.statusCode||h?.code||l+"";n(new Zc(Dm(h),l,f))}).catch(()=>{const h=l+"";n(new Zc(d.statusText||`HTTP ${l} error`,l,h))});else{const h=l+"";n(new Zc(d.statusText||`HTTP ${l} error`,l,h))}}else n(new Hb(Dm(i),i))},Vb=(i,n,r,l)=>{const d={method:i,headers:n?.headers||{}};return l?(Ib(l)?(d.headers=ce({"Content-Type":"application/json"},n?.headers),d.body=JSON.stringify(l)):d.body=l,ce(ce({},d),r)):d};async function Gb(i,n,r,l,d,h){return new Promise((f,g)=>{i(r,Vb(n,l,d,h)).then(p=>{if(!p.ok)throw p;if(l?.noResolveJson)return p;const b=p.headers.get("content-type");return!b||!b.includes("application/json")?{}:p.json()}).then(p=>f(p)).catch(p=>$b(p,g,l))})}async function Yt(i,n,r,l,d){return Gb(i,"POST",n,l,d,r)}var Yb=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ce(ce({},yu),n),this.fetch=xu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async getIndex(i,n){var r=this;try{return{data:await Yt(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers}),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Gt(l))return{data:null,error:l};throw l}}async listIndexes(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async deleteIndex(i,n){var r=this;try{return{data:await Yt(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers})||{},error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Gt(l))return{data:null,error:l};throw l}}},Kb=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ce(ce({},yu),n),this.fetch=xu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(i){var n=this;try{if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Yt(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async getVectors(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async listVectors(i){var n=this;try{if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return{data:await Yt(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async queryVectors(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async deleteVectors(i){var n=this;try{if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Yt(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}},Xb=class{constructor(i,n={},r){this.shouldThrowOnError=!1,this.url=i.replace(/\/$/,""),this.headers=ce(ce({},yu),n),this.fetch=xu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async getBucket(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async listBuckets(i={}){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}async deleteBucket(i){var n=this;try{return{data:await Yt(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gt(r))return{data:null,error:r};throw r}}},Jb=class extends Xb{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new Qb(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,r=this;return n().call(r,i)}async getBucket(i){var n=()=>super.getBucket,r=this;return n().call(r,i)}async listBuckets(i={}){var n=()=>super.listBuckets,r=this;return n().call(r,i)}async deleteBucket(i){var n=()=>super.deleteBucket,r=this;return n().call(r,i)}},Qb=class extends Yb{constructor(i,n,r,l){super(i,n,l),this.vectorBucketName=r}async createIndex(i){var n=()=>super.createIndex,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,i)}index(i){return new Zb(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},Zb=class extends Kb{constructor(i,n,r,l,d){super(i,n,d),this.vectorBucketName=r,this.indexName=l}async putVectors(i){var n=()=>super.putVectors,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(i){var n=()=>super.getVectors,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,r=this;return n().call(r,ce(ce({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Pb=class extends Lb{constructor(i,n={},r,l){super(i,n,r,l)}from(i){return new Bb(this.url,this.headers,i,this.fetch)}get vectors(){return new Jb(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qb(this.url+"/iceberg",this.headers,this.fetch)}};const h0="2.90.1",Vs=30*1e3,uu=3,Pc=uu*Vs,Wb="http://localhost:9999",Fb="supabase.auth.token",ev={"X-Client-Info":`gotrue-js/${h0}`},du="X-Supabase-Api-Version",f0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,av=600*1e3;class Zr extends Error{constructor(n,r,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function te(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class nv extends Zr{constructor(n,r,l){super(n,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function sv(i){return te(i)&&i.name==="AuthApiError"}class Kn extends Zr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class $a extends Zr{constructor(n,r,l,d){super(n,l,d),this.name=r,this.status=l}}class Vt extends $a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rv(i){return te(i)&&i.name==="AuthSessionMissingError"}class Bs extends $a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bl extends $a{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class vl extends $a{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iv(i){return te(i)&&i.name==="AuthImplicitGrantRedirectError"}class zm extends $a{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lv extends $a{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class hu extends $a{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Wc(i){return te(i)&&i.name==="AuthRetryableFetchError"}class Mm extends $a{constructor(n,r,l){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class fu extends $a{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bm=` 	
\r=`.split(""),ov=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Bm.length;n+=1)i[Bm[n].charCodeAt(0)]=-2;for(let n=0;n<wl.length;n+=1)i[wl[n].charCodeAt(0)]=n;return i})();function Lm(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(wl[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(wl[l]),n.queuedBits-=6}}function m0(i,n,r){const l=ov[i];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function qm(i){const n=[],r=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=f=>{dv(f,l,r)};for(let f=0;f<i.length;f+=1)m0(i.charCodeAt(f),d,h);return n.join("")}function cv(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function uv(i,n){for(let r=0;r<i.length;r+=1){let l=i.charCodeAt(r);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(i.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}cv(l,n)}}function dv(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Ks(i){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};for(let d=0;d<i.length;d+=1)m0(i.charCodeAt(d),r,l);return new Uint8Array(n)}function hv(i){const n=[];return uv(i,r=>n.push(r)),new Uint8Array(n)}function Xn(i){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};return i.forEach(d=>Lm(d,r,l)),Lm(null,r,l),n.join("")}function fv(i){return Math.round(Date.now()/1e3)+i}function mv(){return Symbol("auth-callback")}const mt=()=>typeof window<"u"&&typeof document<"u",$n={tested:!1,writable:!1},p0=()=>{if(!mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($n.tested)return $n.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),$n.tested=!0,$n.writable=!0}catch{$n.tested=!0,$n.writable=!1}return $n.writable};function pv(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{n[h]=d})}catch{}return r.searchParams.forEach((l,d)=>{n[d]=l}),n}const g0=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),gv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Gs=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},Vn=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ft=async(i,n)=>{await i.removeItem(n)};class Tl{constructor(){this.promise=new Tl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Tl.promiseConstructor=Promise;function Fc(i){const n=i.split(".");if(n.length!==3)throw new fu("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!tv.test(n[l]))throw new fu("JWT not in base64url format");return{header:JSON.parse(qm(n[0])),payload:JSON.parse(qm(n[1])),signature:Ks(n[2]),raw:{header:n[0],payload:n[1]}}}async function bv(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function vv(i,n){return new Promise((l,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await i(h);if(!n(h,null,f)){l(f);return}}catch(f){if(!n(h,f)){d(f);return}}})()})}function yv(i){return("0"+i.toString(16)).substr(-2)}function xv(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(n),Array.from(n,yv).join("")}async function wv(i){const r=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(l);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function _v(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await wv(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ls(i,n,r=!1){const l=xv();let d=l;r&&(d+="/PASSWORD_RECOVERY"),await Gs(i,`${n}-code-verifier`,d);const h=await _v(l);return[h,l===h?"plain":"s256"]}const Sv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function jv(i){const n=i.headers.get(du);if(!n||!n.match(Sv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Nv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function Ev(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Tv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qs(i){if(!Tv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eu(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kv(i,n){return new Proxy(i,{get:(r,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,d)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,l,d)}})}function Hm(i){return JSON.parse(JSON.stringify(i))}const Gn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Av=[502,503,504];async function Im(i){var n;if(!gv(i))throw new hu(Gn(i),0);if(Av.includes(i.status))throw new hu(Gn(i),i.status);let r;try{r=await i.json()}catch(h){throw new Kn(Gn(h),h)}let l;const d=jv(i);if(d&&d.getTime()>=f0["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new Mm(Gn(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new Vt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new Mm(Gn(r),i.status,r.weak_password.reasons);throw new nv(Gn(r),i.status||500,l)}const Ov=(i,n,r,l)=>{const d={method:i,headers:n?.headers||{}};return i==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n?.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),r))};async function oe(i,n,r,l){var d;const h=Object.assign({},l?.headers);h[du]||(h[du]=f0["2024-01-01"].name),l?.jwt&&(h.Authorization=`Bearer ${l.jwt}`);const f=(d=l?.query)!==null&&d!==void 0?d:{};l?.redirectTo&&(f.redirect_to=l.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",p=await Rv(i,n,r+g,{headers:h,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(p):{data:Object.assign({},p),error:null}}async function Rv(i,n,r,l,d,h){const f=Ov(n,l,d,h);let g;try{g=await i(r,Object.assign({},f))}catch(p){throw console.error(p),new hu(Gn(p),0)}if(g.ok||await Im(g),l?.noResolveJson)return g;try{return await g.json()}catch(p){await Im(p)}}function oa(i){var n;let r=null;Dv(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=fv(i.expires_in)));const l=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:l},error:null}}function $m(i){const n=oa(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(n.data.weak_password=i.weak_password),n}function vn(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function Cv(i){return{data:i,error:null}}function Uv(i){const{action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h}=i,f=Nl(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h},p=Object.assign({},f);return{data:{properties:g,user:p},error:null}}function Vm(i){return i}function Dv(i){return i.access_token&&i.refresh_token&&i.expires_in}const tu=["global","local","others"];class zv{constructor({url:n="",headers:r={},fetch:l}){this.url=n,this.headers=r,this.fetch=g0(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=tu[0]){if(tu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tu.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(te(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,r={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:vn})}catch(l){if(te(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:r}=n,l=Nl(n,["options"]),d=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(d.new_email=l?.newEmail,delete d.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:Uv,redirectTo:r?.redirectTo})}catch(r){if(te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:vn})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,l,d,h,f,g,p;try{const b={nextPage:null,lastPage:0,total:0},w=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:Vm});if(w.error)throw w.error;const v=await w.json(),x=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(p=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(j=>{const R=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(j.split(";")[1].split("=")[1]);b[`${z}Page`]=R}),b.total=parseInt(x)),{data:Object.assign(Object.assign({},v),b),error:null}}catch(b){if(te(b))return{data:{users:[]},error:b};throw b}}async getUserById(n){qs(n);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:vn})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){qs(n);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:vn})}catch(l){if(te(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,r=!1){qs(n);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:vn})}catch(l){if(te(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){qs(n.userId);try{const{data:r,error:l}=await oe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:l}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _deleteFactor(n){qs(n.userId),qs(n.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,l,d,h,f,g,p;try{const b={nextPage:null,lastPage:0,total:0},w=await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n?.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n?.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:Vm});if(w.error)throw w.error;const v=await w.json(),x=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,S=(p=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&p!==void 0?p:[];return S.length>0&&(S.forEach(j=>{const R=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(j.split(";")[1].split("=")[1]);b[`${z}Page`]=R}),b.total=parseInt(x)),{data:Object.assign(Object.assign({},v),b),error:null}}catch(b){if(te(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(n){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(te(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}}function Gm(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}const Hs={debug:!!(globalThis&&p0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class b0 extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Mv extends b0{}async function Bv(i,n,r){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,d.name);try{return await r()}finally{Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,d.name)}}else{if(n===0)throw Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Mv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Hs.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Lv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function v0(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function qv(i){return parseInt(i,16)}function Hv(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function Iv(i){var n;const{chainId:r,domain:l,expirationTime:d,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:p,resources:b,scheme:w,uri:v,version:x}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const S=v0(i.address),j=w?`${w}://${l}`:l,R=i.statement?`${i.statement}
`:"",z=`${j} wants you to sign in with your Ethereum account:
${S}

${R}`;let B=`URI: ${v}
Version: ${x}
Chain ID: ${r}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(d&&(B+=`
Expiration Time: ${d.toISOString()}`),g&&(B+=`
Not Before: ${g.toISOString()}`),p&&(B+=`
Request ID: ${p}`),b){let X=`
Resources:`;for(const D of b){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);X+=`
- ${D}`}B+=X}return`${z}
${B}`}class et extends Error{constructor({message:n,code:r,cause:l,name:d}){var h;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(h=d??(l instanceof Error?l.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class _l extends et{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function $v({error:i,options:n}){var r,l,d;const{publicKey:h}=n;if(!h)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((l=h.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new et({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const f=window.location.hostname;if(y0(f)){if(h.rp.id!==f)return new et({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Vv({error:i,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new et({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const l=window.location.hostname;if(y0(l)){if(r.rpId!==l)return new et({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Gv{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Yv=new Gv;function Kv(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:r,excludeCredentials:l}=i,d=Nl(i,["challenge","user","excludeCredentials"]),h=Ks(n).buffer,f=Object.assign(Object.assign({},r),{id:Ks(r.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:h,user:f});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let p=0;p<l.length;p++){const b=l[p];g.excludeCredentials[p]=Object.assign(Object.assign({},b),{id:Ks(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return g}function Xv(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:r}=i,l=Nl(i,["challenge","allowCredentials"]),d=Ks(n).buffer,h=Object.assign(Object.assign({},l),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let f=0;f<r.length;f++){const g=r[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:Ks(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function Jv(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:Xn(new Uint8Array(i.response.attestationObject)),clientDataJSON:Xn(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Qv(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,l=i.getClientExtensionResults(),d=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Xn(new Uint8Array(d.authenticatorData)),clientDataJSON:Xn(new Uint8Array(d.clientDataJSON)),signature:Xn(new Uint8Array(d.signature)),userHandle:d.userHandle?Xn(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function y0(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Ym(){var i,n;return!!(mt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Zv(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new _l("Browser returned unexpected credential type",n)}:{data:null,error:new _l("Empty credential response",n)}}catch(n){return{data:null,error:$v({error:n,options:i})}}}async function Pv(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new _l("Browser returned unexpected credential type",n)}:{data:null,error:new _l("Empty credential response",n)}}catch(n){return{data:null,error:Vv({error:n,options:i})}}}const Wv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Fv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Sl(...i){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of i)if(d)for(const h in d){const f=d[h];if(f!==void 0)if(Array.isArray(f))l[h]=f;else if(r(f))l[h]=f;else if(n(f)){const g=l[h];n(g)?l[h]=Sl(g,f):l[h]=Sl(f)}else l[h]=f}return l}function ey(i,n){return Sl(Wv,i,n||{})}function ty(i,n){return Sl(Fv,i,n||{})}class ay{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:l,signal:d},h){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:g};const p=d??Yv.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:b}=f.webauthn.credential_options.publicKey;b.name||(b.name=`${b.id}:${l}`),b.displayName||(b.displayName=b.name)}switch(f.webauthn.type){case"create":{const b=ey(f.webauthn.credential_options.publicKey,h?.create),{data:w,error:v}=await Zv({publicKey:b,signal:p});return w?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:v}}case"request":{const b=ty(f.webauthn.credential_options.publicKey,h?.request),{data:w,error:v}=await Pv(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:b,signal:p}));return w?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:w}},error:null}:{data:null,error:v}}}}catch(f){return te(f)?{data:null,error:f}:{data:null,error:new Kn("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new Zr("rpId is required for WebAuthn authentication")};try{if(!Ym())return{data:null,error:new Kn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:l},signal:d},{request:h});if(!f)return{data:null,error:g};const{webauthn:p}=f;return this._verify({factorId:n,challengeId:f.challengeId,webauthn:{type:p.type,rpId:r,rpOrigins:l,credential_response:p.credential_response}})}catch(f){return te(f)?{data:null,error:f}:{data:null,error:new Kn("Unexpected error in authenticate",f)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new Zr("rpId is required for WebAuthn registration")};try{if(!Ym())return{data:null,error:new Kn("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:n});if(!f)return await this.client.mfa.listFactors().then(w=>{var v;return(v=w.data)===null||v===void 0?void 0:v.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===n&&x.status!=="unverified")}).then(w=>w?this.client.mfa.unenroll({factorId:w?.id}):void 0),{data:null,error:g};const{data:p,error:b}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:d},{create:h});return p?this._verify({factorId:f.id,challengeId:p.challengeId,webauthn:{rpId:r,rpOrigins:l,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:b}}catch(f){return te(f)?{data:null,error:f}:{data:null,error:new Kn("Unexpected error in register",f)}}}}Lv();const ny={url:Wb,storageKey:Fb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ev,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Km(i,n,r){return await r()}const Is={};class Pr{get jwks(){var n,r;return(r=(n=Is[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Is[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Is[this.storageKey]=Object.assign(Object.assign({},Is[this.storageKey]),{cachedAt:n})}constructor(n){var r,l,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},ny),n);if(this.storageKey=h.storageKey,this.instanceID=(r=Pr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Pr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&mt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new zv({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=g0(h.fetch),this.lock=h.lock||Km,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&mt()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=Bv:this.lock=Km,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ay(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:p0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gm(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=Gm(this.memoryStorage)),mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${h0}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},l="none";if(mt()&&(r=pv(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),mt()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,l);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),iv(h)){const p=(n=h.details)===null||n===void 0?void 0:n.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return te(r)?this._returnResult({error:r}):this._returnResult({error:new Kn("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,l,d;try{const h=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=n?.options)===null||d===void 0?void 0:d.captchaToken}},xform:oa}),{data:f,error:g}=h;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const p=f.session,b=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:b,session:p},error:null})}catch(h){if(te(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(n){var r,l,d;try{let h;if("email"in n){const{email:w,password:v,options:x}=n;let S=null,j=null;this.flowType==="pkce"&&([S,j]=await Ls(this.storage,this.storageKey)),h=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:w,password:v,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:S,code_challenge_method:j},xform:oa})}else if("phone"in n){const{phone:w,password:v,options:x}=n;h=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:v,data:(l=x?.data)!==null&&l!==void 0?l:{},channel:(d=x?.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:oa})}else throw new bl("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return await ft(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const p=f.session,b=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:b,session:p},error:null})}catch(h){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(n){try{let r;if("email"in n){const{email:h,password:f,options:g}=n;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:$m})}else if("phone"in n){const{phone:h,password:f,options:g}=n;r=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:$m})}else throw new bl("You must provide either an email or phone number and a password");const{data:l,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const h=new Bs;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,l,d,h;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=n.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,l,d,h,f,g,p,b,w,v,x;let S,j;if("message"in n)S=n.message,j=n.signature;else{const{chain:R,wallet:z,statement:B,options:X}=n;let D;if(mt())if(typeof z=="object")D=z;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")D=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!X?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=z}const Z=new URL((r=X?.url)!==null&&r!==void 0?r:window.location.href),he=await D.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!he||he.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=v0(he[0]);let G=(l=X?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!G){const V=await D.request({method:"eth_chainId"});G=qv(V)}const re={domain:Z.host,address:M,statement:B,uri:Z.href,version:"1",chainId:G,nonce:(d=X?.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(h=X?.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=X?.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(p=X?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(b=X?.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(w=X?.signInWithEthereum)===null||w===void 0?void 0:w.resources};S=Iv(re),j=await D.request({method:"personal_sign",params:[Hv(S),M]})}try{const{data:R,error:z}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:j},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=n.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:oa});if(z)throw z;if(!R||!R.session||!R.user){const B=new Bs;return this._returnResult({data:{user:null,session:null},error:B})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:z})}catch(R){if(te(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(n){var r,l,d,h,f,g,p,b,w,v,x,S;let j,R;if("message"in n)j=n.message,R=n.signature;else{const{chain:z,wallet:B,statement:X,options:D}=n;let Z;if(mt())if(typeof B=="object")Z=B;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))Z=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=B}const he=new URL((r=D?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in Z&&Z.signIn){const M=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},D?.signInWithSolana),{version:"1",domain:he.host,uri:he.href}),X?{statement:X}:null));let G;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")G=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)G=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)j=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),R=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${he.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...X?["",X,""]:[""],"Version: 1",`URI: ${he.href}`,`Issued At: ${(d=(l=D?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=D?.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${D.signInWithSolana.notBefore}`]:[],...!((f=D?.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${D.signInWithSolana.expirationTime}`]:[],...!((g=D?.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${D.signInWithSolana.chainId}`]:[],...!((p=D?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${D.signInWithSolana.nonce}`]:[],...!((b=D?.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${D.signInWithSolana.requestId}`]:[],...!((v=(w=D?.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||v===void 0)&&v.length?["Resources",...D.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const M=await Z.signMessage(new TextEncoder().encode(j),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=M}}try{const{data:z,error:B}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Xn(R)},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(S=n.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:oa});if(B)throw B;if(!z||!z.session||!z.user){const X=new Bs;return this._returnResult({data:{user:null,session:null},error:X})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:B})}catch(z){if(te(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async _exchangeCodeForSession(n){const r=await Vn(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new lv;const{data:h,error:f}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:oa});if(await ft(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const g=new Bs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:f})}catch(h){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(n){try{const{options:r,provider:l,token:d,access_token:h,nonce:f}=n,g=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:oa}),{data:p,error:b}=g;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!p||!p.session||!p.user){const w=new Bs;return this._returnResult({data:{user:null,session:null},error:w})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:b})}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,l,d,h,f;try{if("email"in n){const{email:g,options:p}=n;let b=null,w=null;this.flowType==="pkce"&&([b,w]=await Ls(this.storage,this.storageKey));const{error:v}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=p?.data)!==null&&r!==void 0?r:{},create_user:(l=p?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:b,code_challenge_method:w},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in n){const{phone:g,options:p}=n,{data:b,error:w}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=p?.data)!==null&&d!==void 0?d:{},create_user:(h=p?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(f=p?.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:w})}throw new bl("You must provide either an email or phone number.")}catch(g){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(n){var r,l;try{let d,h;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,h=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:g}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:oa});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const p=f.session,b=f.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:b,session:p},error:null})}catch(d){if(te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,l,d,h,f;try{let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Ls(this.storage,this.storageKey));const b=await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=n?.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:p}),headers:this.headers,xform:Cv});return!((h=b.data)===null||h===void 0)&&h.url&&mt()&&!(!((f=n.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(g){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;if(l)throw l;if(!r)throw new Vt;const{error:d}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:l,type:d,options:h}=n,{error:f}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},redirectTo:h?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in n){const{phone:l,type:d,options:h}=n,{data:f,error:g}=await oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:h?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:g})}throw new bl("You must provide either an email or phone number and a type")}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Vn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<Pc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await Vn(this.userStorage,this.storageKey+"-user");f?.user?n.user=f.user:n.user=eu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};n.user=kv(n.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:vn}):await this._useSession(async r=>{var l,d,h;const{data:f,error:g}=r;if(g)throw g;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vt}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:vn})})}catch(r){if(te(r))return rv(r)&&(await this._removeSession(),await ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async l=>{const{data:d,error:h}=l;if(h)throw h;if(!d.session)throw new Vt;const f=d.session;let g=null,p=null;this.flowType==="pkce"&&n.email!=null&&([g,p]=await Ls(this.storage,this.storageKey));const{data:b,error:w}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:p}),jwt:f.access_token,xform:vn});if(w)throw w;return f.user=b.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(l){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Vt;const r=Date.now()/1e3;let l=r,d=!0,h=null;const{payload:f}=Fc(n.access_token);if(f.exp&&(l=f.exp,d=l<=r),d){const{data:g,error:p}=await this._callRefreshToken(n.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:p}=await this._getUser(n.access_token);if(p)throw p;h={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var l;if(!n){const{data:f,error:g}=r;if(g)throw g;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!n?.refresh_token)throw new Vt;const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!mt())throw new vl("No browser detected.");if(n.error||n.error_description||n.error_code)throw new vl(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new zm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vl("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new zm("No code detected.");const{data:X,error:D}=await this._exchangeCodeForSession(n.code);if(D)throw D;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:X.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:h,refresh_token:f,expires_in:g,expires_at:p,token_type:b}=n;if(!h||!g||!f||!b)throw new vl("No session defined in URL");const w=Math.round(Date.now()/1e3),v=parseInt(g);let x=w+v;p&&(x=parseInt(p));const S=x-w;S*1e3<=Vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const j=x-v;w-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,w):w-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,w);const{data:R,error:z}=await this._getUser(h);if(z)throw z;const B={provider_token:l,provider_refresh_token:d,access_token:h,expires_in:v,expires_at:x,refresh_token:f,token_type:b,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:B,redirectType:n.type},error:null})}catch(l){if(te(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Vn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({error:h});const f=(l=d.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:g}=await this.admin.signOut(f,n);if(g&&!(sv(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return n!=="others"&&(await this._removeSession(),await ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=mv(),l={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async r=>{var l,d;try{const{data:{session:h},error:f}=r;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",n,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",h),console.error(h)}})}async resetPasswordForEmail(n,r={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await Ls(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var n;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:l,error:d}=await this._useSession(async h=>{var f,g,p,b,w;const{data:v,error:x}=h;if(x)throw x;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(p=n.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",S,{headers:this.headers,jwt:(w=(b=v.session)===null||b===void 0?void 0:b.access_token)!==null&&w!==void 0?w:void 0})});if(d)throw d;return mt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:n.provider,url:l?.url},error:null})}catch(l){if(te(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var l;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:f,provider:g,token:p,access_token:b,nonce:w}=n,v=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=h?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:p,access_token:b,nonce:w,link_identity:!0,gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:oa}),{data:x,error:S}=v;return S?this._returnResult({data:{user:null,session:null},error:S}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Bs}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:S}))}catch(d){if(await ft(this.storage,`${this.storageKey}-code-verifier`),te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)throw f;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await vv(async d=>(d>0&&await bv(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:oa})),(d,h)=>{const f=200*Math.pow(2,d);return h&&Wc(h)&&Date.now()+f-l<Vs})}catch(l){if(this._debug(r,"error",l),te(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",l),mt()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await Vn(this.storage,this.storageKey);if(d&&this.userStorage){let f=await Vn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await Gs(this.userStorage,this.storageKey+"-user",f)),d.user=(n=f?.user)!==null&&n!==void 0?n:eu()}else if(d&&!d.user&&!d.user){const f=await Vn(this.storage,this.storageKey+"-user");f&&f?.user?(d.user=f.user,await ft(this.storage,this.storageKey+"-user"),await Gs(this.storage,this.storageKey,d)):d.user=eu()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pc;if(this._debug(l,`session has${h?"":" not"} expired with margin of ${Pc}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),Wc(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(d.access_token);!g&&f?.user?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var r,l;if(!n)throw new Vt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Tl;const{data:h,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!h.session)throw new Vt;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(d,"error",h),te(h)){const f={data:null,error:h};return Wc(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,l=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:r});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,r)}catch(p){h.push(p)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await ft(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await Gs(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=Hm(d);await Gs(this.storage,this.storageKey,h)}else{const d=Hm(r);await Gs(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ft(this.storage,this.storageKey),await ft(this.storage,this.storageKey+"-code-verifier"),await ft(this.storage,this.storageKey+"-user"),this.userStorage&&await ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&mt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Vs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-n)/Vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${Vs}ms, refresh threshold is ${uu} ticks`),d<=uu&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof b0)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,l){const d=[`provider=${encodeURIComponent(r)}`];if(l?.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[h,f]=await Ls(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(g.toString())}if(l?.queryParams){const h=new URLSearchParams(l.queryParams);d.push(h.toString())}return l?.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await oe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:f}=r;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:p,error:b}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=h?.session)===null||l===void 0?void 0:l.access_token});return b?this._returnResult({data:null,error:b}):(n.factorType==="totp"&&p.type==="totp"&&(!((d=p?.totp)===null||d===void 0)&&d.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Jv(n.webauthn.credential_response):Qv(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:p}=await oe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:f,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:p}))})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=await oe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=d?.session)===null||l===void 0?void 0:l.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Kv(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Xv(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(n=r?.factors)!==null&&n!==void 0?n:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:l},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Fc(l.access_token);let f=null;h.aal&&(f=h.aal);let g=f;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(w=>w.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const b=h.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:b},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Vt});const f=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&mt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Vt});const f=await oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&mt()&&!r?.skipBrowserRedirect&&window.location.assign(f.data.redirect_url),f})}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;return l?this._returnResult({data:null,error:l}):r?await oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Vt})})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?(await oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Vt})})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let l=r.keys.find(g=>g.kid===n);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(g=>g.kid===n),l&&this.jwks_cached_at+av>d)return l;const{data:h,error:f}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,l=h.keys.find(g=>g.kid===n),!l)?null:l}async getClaims(n,r={}){try{let l=n;if(!l){const{data:S,error:j}=await this.getSession();if(j||!S.session)return this._returnResult({data:null,error:j});l=S.session.access_token}const{header:d,payload:h,signature:f,raw:{header:g,payload:p}}=Fc(l);r?.allowExpired||Nv(h.exp);const b=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!b){const{error:S}=await this.getUser(l);if(S)throw S;return{data:{claims:h,header:d,signature:f},error:null}}const w=Ev(d.alg),v=await crypto.subtle.importKey("jwk",b,w,!0,["verify"]);if(!await crypto.subtle.verify(w,v,f,hv(`${g}.${p}`)))throw new fu("Invalid JWT signature");return{data:{claims:h,header:d,signature:f},error:null}}catch(l){if(te(l))return this._returnResult({data:null,error:l});throw l}}}Pr.nextInstanceID={};const sy=Pr,ry="2.90.1";let Gr="";typeof Deno<"u"?Gr="deno":typeof document<"u"?Gr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Gr="react-native":Gr="node";const iy={"X-Client-Info":`supabase-js-${Gr}/${ry}`},ly={headers:iy},oy={schema:"public"},cy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uy={};function Wr(i){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wr(i)}function dy(i,n){if(Wr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,n);if(Wr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function hy(i){var n=dy(i,"string");return Wr(n)=="symbol"?n:n+""}function fy(i,n,r){return(n=hy(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Xm(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,l)}return r}function Ke(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Xm(Object(r),!0).forEach(function(l){fy(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Xm(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}const my=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),py=()=>Headers,gy=(i,n,r)=>{const l=my(r),d=py();return async(h,f)=>{var g;const p=(g=await n())!==null&&g!==void 0?g:i;let b=new d(f?.headers);return b.has("apikey")||b.set("apikey",i),b.has("Authorization")||b.set("Authorization",`Bearer ${p}`),l(h,Ke(Ke({},f),{},{headers:b}))}};function by(i){return i.endsWith("/")?i:i+"/"}function vy(i,n){var r,l;const{db:d,auth:h,realtime:f,global:g}=i,{db:p,auth:b,realtime:w,global:v}=n,x={db:Ke(Ke({},p),d),auth:Ke(Ke({},b),h),realtime:Ke(Ke({},w),f),storage:{},global:Ke(Ke(Ke({},v),g),{},{headers:Ke(Ke({},(r=v?.headers)!==null&&r!==void 0?r:{}),(l=g?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return i.accessToken?x.accessToken=i.accessToken:delete x.accessToken,x}function yy(i){const n=i?.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(by(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var xy=class extends sy{constructor(i){super(i)}},wy=class{constructor(i,n,r){var l,d;this.supabaseUrl=i,this.supabaseKey=n;const h=yy(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:oy,realtime:uy,auth:Ke(Ke({},cy),{},{storageKey:f}),global:ly},p=vy(r??{},g);if(this.storageKey=(l=p.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(d=p.global.headers)!==null&&d!==void 0?d:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(w,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=p.auth)!==null&&b!==void 0?b:{},this.headers,p.global.fetch)}this.fetch=gy(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Ke({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new eb(new URL("rest/v1",h).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Pb(this.storageUrl.href,this.headers,this.fetch,r?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new Qg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,r)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,r;if(i.accessToken)return await i.accessToken();const{data:l}=await i.auth.getSession();return(n=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,storageKey:h,flowType:f,lock:g,debug:p,throwOnError:b},w,v){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xy({url:this.authUrl.href,headers:Ke(Ke({},x),w),storageKey:h,autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,flowType:f,lock:g,debug:p,throwOnError:b,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new bb(this.realtimeUrl.href,Ke(Ke({},i),{},{params:Ke(Ke({},{apikey:this.supabaseKey}),i?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n?.access_token)})}_handleTokenChanged(i,n,r){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const _y=(i,n,r)=>new wy(i,n,r);function Sy(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Sy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jy="https://rzyscsvzentuplsgoipv.supabase.co",Ny="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6eXNjc3Z6ZW50dXBsc2dvaXB2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0ODgwNTAsImV4cCI6MjA4NDA2NDA1MH0.5n-iXvz7L3VgGhr20l54AQ_HScFmYStEu9co2gElKsU",F=_y(jy,Ny),Ey={login:async(i,n)=>{const{data:r,error:l}=await F.auth.signInWithPassword({email:i,password:n});if(l)return{user:null,error:l.message};if(!r.user)return{user:null,error:"No user data"};const{data:d}=await F.from("profiles").select("*").eq("id",r.user.id).single();return d?{user:{id:d.id,username:d.username,role:d.role,tokens:d.tokens,email:r.user.email,createdAt:d.created_at,avatarUrl:d.avatar_url,wins1x2:d.wins_1x2,winsSurvival:d.wins_survival,level:d.level,predictionAccuracy:d.prediction_accuracy,betsPlaced:d.bets_placed,totalTokensWon:d.total_tokens_won,totalPoints:d.total_points},error:null}:{user:null,error:"Profile not found"}},signUp:async(i,n,r)=>{const{data:l,error:d}=await F.auth.signUp({email:n,password:r,options:{data:{username:i}}});return d?{user:null,error:d.message}:l.user?{user:{id:l.user.id,username:i,role:"USER",tokens:100,email:l.user.email,wins1x2:0,winsSurvival:0,level:1,predictionAccuracy:0,betsPlaced:0,totalTokensWon:0,totalPoints:0},error:null}:{user:null,error:"Signup failed"}},logout:async()=>{await F.auth.signOut()},getCurrentUser:async()=>{const{data:{user:i}}=await F.auth.getUser();if(!i)return null;const{data:n}=await F.from("profiles").select("*").eq("id",i.id).single();return n?{id:n.id,username:n.username,role:n.role,tokens:n.tokens,email:i.email,createdAt:n.created_at,avatarUrl:n.avatar_url,wins1x2:n.wins_1x2,winsSurvival:n.wins_survival,level:n.level,predictionAccuracy:n.prediction_accuracy,betsPlaced:n.bets_placed,totalTokensWon:n.total_tokens_won,totalPoints:n.total_points}:null},updateProfile:async(i,n)=>{const{data:{user:r}}=await F.auth.getUser();if(!r)return{success:!1,message:"Non loggato"};const l={username:i,updated_at:new Date().toISOString()};n&&(l.avatar_url=n);const{error:d}=await F.from("profiles").update(l).eq("id",r.id);return d?{success:!1,message:d.message}:{success:!0,message:"Profilo aggiornato con successo"}},uploadAvatar:async i=>{const{data:{user:n}}=await F.auth.getUser();if(!n)return{success:!1,message:"Non loggato"};const r=i.name.split(".").pop(),l=`${Math.random()}.${r}`,d=`${n.id}/${l}`,{error:h}=await F.storage.from("avatars").upload(d,i);if(h)return{success:!1,message:"Caricamento fallito: "+h.message};const{data:{publicUrl:f}}=F.storage.from("avatars").getPublicUrl(d);return{success:!0,url:f,message:"Immagine caricata"}},getAllUsers:async()=>{const{data:i,error:n}=await F.from("profiles").select("id, username, email, tokens, role, created_at").order("created_at",{ascending:!1});return n?(console.error("Error fetching users:",n),[]):i||[]},updateUserTokens:async(i,n)=>{const{data:r}=await F.from("profiles").select("tokens").eq("id",i).single();if(!r)return!1;const l=Math.max(0,(r.tokens||0)+n),{error:d}=await F.from("profiles").update({tokens:l}).eq("id",i);return!d},deleteUserProfile:async i=>{const{error:n}=await F.rpc("delete_user_by_admin",{target_user_id:i});return n?(console.error("Error deleting user:",n),!1):!0},updateUserRole:async(i,n)=>{const{error:r}=await F.rpc("update_user_role",{target_user_id:i,new_role:n});return r?(console.error("Error updating role:",r),!1):!0},syncEmails:async()=>{await F.rpc("sync_user_emails")}},wu={getSurvivalState:async()=>{const{data:i}=await F.from("survival_seasons").select("*").in("status",["OPEN","ACTIVE"]).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(console.log("[getSurvivalState] Current Active Season:",i),!i)return{season:null,players:[]};console.log("[getSurvivalState] Fetching players for season:",i.id);const{data:n,error:r}=await F.from("survival_players").select("*, profiles(username, avatar_url, tokens)").eq("season_id",i.id);r&&console.error("Error fetching survival players:",r),console.log("Raw players from DB:",n);const l=await vt.getMatchday();let d=[];if(l){const{data:p}=await F.from("survival_picks").select("player_id, team, result").eq("matchday_id",l.id);d=p||[]}const h=(n||[]).map(p=>{const b=d.find(v=>v.player_id===p.id),w=Array.isArray(p.profiles)?p.profiles[0]:p.profiles;return{id:p.id,userId:p.user_id,username:w?.username||"Sconosciuto",avatarUrl:w?.avatar_url,tokens:w?.tokens||0,status:p.status||"ALIVE",usedTeams:p.used_teams||[],eliminatedAt:p.eliminated_at_matchday,currentPick:b?.team}}),{data:{user:f}}=await F.auth.getUser();let g;if(f&&l){const p=h.find(b=>b.userId===f.id||b.username===f.user_metadata?.username);if(console.log('[getSurvivalState] Finding "Me":',p),p&&p.currentPick){const b=d.find(w=>w.player_id===p.id);b&&(g={myPick:b.team,myStatus:b.result})}}return{season:{id:i.id,status:i.status,prizePool:i.prize_pool,startMatchdayId:i.start_matchday_id,currentMatch:g},players:h}},joinSurvival:async i=>{const{data:n,error:r}=await F.rpc("join_survival",{p_season_id:i});return r?{success:!1,message:r.message}:n},submitSurvivalPick:async(i,n)=>{const{data:r,error:l}=await F.rpc("submit_survival_pick",{p_season_id:i,p_team:n});return l?{success:!1,message:l.message}:r},processSurvivalRound:async i=>{const n=await vt.getMatchday();if(!n||n.id!==i)return{success:!1,message:"Matchday not found or not active"};const{season:r,players:l}=await wu.getSurvivalState();if(!r)return{success:!1,message:"No active season"};const{data:d}=await F.from("survival_picks").select("*").eq("matchday_id",i);if(!d)return{success:!1,message:"No picks found"};const h=[];let f=0;for(const p of l){if(p.status==="ELIMINATED")continue;const b=d.find(j=>j.player_id===p.id);if(!b){h.push(p.id);continue}const w=n.matches.findIndex(j=>j.home===b.team||j.away===b.team);if(w===-1){console.warn(`Player ${p.username} picked team ${b.team} not found in matchday.`);continue}const v=n.results[w];if(!v)return{success:!1,message:"Not all matches have results"};const x=n.matches[w];x.home===b.team&&v==="1"||x.away===b.team&&v==="2"?f++:h.push(p.id)}if(h.length>0){const{error:p}=await F.rpc("eliminate_survival_players",{p_player_ids:h});if(p)return{success:!1,message:p.message}}const{error:g}=await F.rpc("update_survivors_teams",{p_matchday_id:i});return g?(console.error("Failed to update survivor teams",g),{success:!1,message:"Round processed but failed to update survivor teams"}):{success:!0,message:"Round processed",eliminated:h.length,advanced:f}},closeSurvivalSeason:async i=>{const{data:n,error:r}=await F.rpc("close_survival_season",{p_season_id:i});return r?{success:!1,message:r.message}:n},startNewSurvivalSeason:async()=>{const{data:i,error:n}=await F.rpc("start_new_survival_season");return n?{success:!1,message:n.message}:i}},vt={getMatchday:async()=>{const{data:i,error:n}=await F.from("matchdays").select("*").eq("status","OPEN").order("id",{ascending:!1}).limit(1).single();return n||!i?null:{id:i.id,matches:i.matches,results:i.results,superJackpot:i.super_jackpot,currentPot:i.current_pot,rolloverPot:i.rollover_pot,status:i.status,deadline:i.deadline,betsLocked:i.bets_locked||!1}},getArchivedMatchdays:async()=>{const{data:i}=await F.from("matchdays").select("*").eq("status","ARCHIVED").order("id",{ascending:!1});return i?i.map(n=>({id:n.id,matches:n.matches,results:n.results,superJackpot:n.super_jackpot,currentPot:n.current_pot,rolloverPot:n.rollover_pot,status:n.status,deadline:n.deadline,betsLocked:n.bets_locked||!1})):[]},getGlobalRanking:async()=>{const{data:i}=await F.from("profiles").select("username, total_points, avatar_url").order("total_points",{ascending:!1}).limit(100);return i?i.map(n=>({username:n.username,totalPoints:n.total_points||0,avatarUrl:n.avatar_url})):[]},getAllBets:async()=>{const{data:i}=await F.from("bets").select(`
                *,
                profiles (username, avatar_url, level)
            `);return i?i.map(n=>{const r=Array.isArray(n.profiles)?n.profiles[0]:n.profiles;return{id:n.id,username:r?.username||"Sconosciuto",avatarUrl:r?.avatar_url,level:r?.level||1,matchdayId:n.matchday_id,predictions:n.predictions,includeSuperJackpot:n.include_super_jackpot,timestamp:n.timestamp}}):[]},getUserBet:async i=>{const n=await vt.getMatchday();if(!n)return;const{data:r}=await F.from("profiles").select("id").eq("username",i).single();if(!r)return;const{data:l}=await F.from("bets").select("*").eq("user_id",r.id).eq("matchday_id",n.id).single();if(l)return{id:l.id,username:i,matchdayId:l.matchday_id,predictions:l.predictions,includeSuperJackpot:l.include_super_jackpot,timestamp:l.timestamp}},placeBet:async(i,n)=>{const{data:{user:r}}=await F.auth.getUser();if(!r)return{success:!1,message:"Not logged in"};const l=await vt.getMatchday();if(!l)return{success:!1,message:"No active matchday"};if(l.deadline){const p=new Date(l.deadline).getTime();if(isNaN(p)||Date.now()>=p)return{success:!1,message:"Scommesse chiuse per la giornata (deadline raggiunta)."}}const d=n?2:1,{data:h}=await F.from("profiles").select("tokens").eq("id",r.id).single();if(!h||h.tokens<d)return{success:!1,message:"Insufficient tokens"};const{error:f}=await F.from("profiles").update({tokens:h.tokens-d}).eq("id",r.id);if(f)return{success:!1,message:"Token deduction failed"};await F.from("matchdays").update({current_pot:l.currentPot+1}).eq("id",l.id);const{error:g}=await F.from("bets").insert({user_id:r.id,matchday_id:l.id,predictions:i,include_super_jackpot:n});return g?{success:!1,message:g.message}:{success:!0,message:n?"Schedina + SuperJackpot Giocata!":"Schedina Base Giocata!"}},createMatchday:async()=>{const{data:i,error:n}=await F.rpc("admin_create_matchday");return n?{success:!1,message:n.message}:i},updateMatch:async(i,n)=>{const r=await vt.getMatchday();if(!r)return;const l=[...r.matches];l[i]=n,await F.from("matchdays").update({matches:l}).eq("id",r.id)},updateMatchResult:async(i,n)=>{const r=await vt.getMatchday();if(!r)return;const l=[...r.results];l[i]=n,await F.from("matchdays").update({results:l}).eq("id",r.id)},updateSuperJackpot:async i=>{const n=await vt.getMatchday();n&&await F.from("matchdays").update({super_jackpot:i}).eq("id",n.id)},updateDeadline:async i=>{const n=await vt.getMatchday();n&&await F.from("matchdays").update({deadline:i}).eq("id",n.id)},setBetLock:async i=>{const n=await vt.getMatchday();if(!n)return{success:!1,message:"No active matchday"};const{error:r}=await F.from("matchdays").update({bets_locked:i}).eq("id",n.id);return r?{success:!1,message:r.message}:{success:!0}},resetMatchday:async()=>{const i=await vt.getMatchday();i&&(await F.from("matchdays").update({results:Array(12).fill(null)}).eq("id",i.id),await F.from("bets").delete().eq("matchday_id",i.id))},archiveMatchday:async()=>{const i=await vt.getMatchday();if(!i)return{success:!1,message:"Nessuna giornata attiva"};let n;try{console.log("Auto-processing Survival Round...");const p=await wu.processSurvivalRound(i.id);p.success?(console.log("Survival Round Processed:",p),n={eliminated:p.eliminated||0,advanced:p.advanced||0}):console.warn("Survival Process Warning:",p.message)}catch(p){console.error("Survival Process Error:",p)}const l=(await vt.getAllBets()).filter(p=>p.matchdayId===i.id);let d=0;l.forEach(p=>{let b=0;i.results.forEach((w,v)=>{w&&w===p.predictions[v]&&b++}),b>d&&(d=b)});const h=i.currentPot;let f=0,g="";d>=7?(console.log("WINNER FOUND"),g="VINCITORI TROVATI!",f=0):(console.log("NO WINNER, ROLLOVER"),g="NESSUN VINCITORE (Rollover)",f=h);for(const p of l){let b=0;if(i.results.forEach((w,v)=>{w&&w===p.predictions[v]&&b++}),b>0){const{data:w}=await F.from("profiles").select("total_points").eq("username",p.username).single(),v=w?.total_points||0;await F.from("profiles").update({total_points:v+b}).eq("username",p.username)}}return await F.from("matchdays").update({status:"ARCHIVED",rollover_pot:f}).eq("id",i.id),{success:!0,message:`Giornata Archiviata. ${g}`,survivalStats:n}},resetSystem:async()=>{const{error:i}=await F.rpc("reset_fanny_system");return i?{success:!1,message:i.message}:{success:!0,message:"Sistema resettato con successo. Tutti i dati di gioco sono stati ripuliti."}}},Ty={getChallengeableUsers:async()=>{const i=await vt.getMatchday();if(!i)return[];const{data:n,error:r}=await F.rpc("get_challengeable_users",{p_matchday_id:i.id});return r?(console.error("Error fetching opponents:",r),[]):(n||[]).map(l=>({id:l.id,username:l.username,avatarUrl:l.avatar_url}))},createDuel:async i=>{const{data:{user:n}}=await F.auth.getUser();if(!n)return{success:!1,message:"Non loggato"};const r=await vt.getMatchday();if(!r)return{success:!1,message:"Nessuna giornata attiva"};const{error:l}=await F.from("duels").insert({matchday_id:r.id,challenger_id:n.id,opponent_id:i,status:"PENDING"});return l?{success:!1,message:l.message}:{success:!0,message:"Sfida inviata!"}},getMyDuels:async()=>{const{data:{user:i}}=await F.auth.getUser();if(!i)return[];const{data:n,error:r}=await F.from("duels").select(`
                *,
                challenger:profiles!challenger_id(id, username, avatar_url),
                opponent:profiles!opponent_id(id, username, avatar_url)
            `).or(`challenger_id.eq.${i.id},opponent_id.eq.${i.id}`).order("created_at",{ascending:!1});return r?(console.error("Error fetching duels:",r),[]):(n||[]).map(l=>({id:l.id,matchdayId:l.matchday_id,challenger:{id:l.challenger.id,username:l.challenger.username,avatarUrl:l.challenger.avatar_url},opponent:{id:l.opponent.id,username:l.opponent.username,avatarUrl:l.opponent.avatar_url},status:l.status,scores:l.scores?{challenger_score:l.scores.challenger_score??0,opponent_score:l.scores.opponent_score??0}:void 0,winnerId:l.winner_id,createdAt:l.created_at}))},respondToDuel:async(i,n)=>{const r=n?"ACCEPTED":"DECLINED",{error:l}=await F.from("duels").update({status:r}).eq("id",i);return l?{success:!1,message:l.message}:{success:!0,message:n?"Sfida Accettata!":"Sfida Rifiutata"}},getAllDuels:async()=>{const i=await vt.getMatchday();if(!i)return[];const{data:n,error:r}=await F.from("duels").select(`
                *,
                challenger:profiles!challenger_id(id, username, avatar_url),
                opponent:profiles!opponent_id(id, username, avatar_url)
            `).eq("matchday_id",i.id).order("created_at",{ascending:!1});return r?(console.error("Error fetching all duels:",r),[]):(n||[]).map(l=>({id:l.id,matchdayId:l.matchday_id,challenger:{id:l.challenger.id,username:l.challenger.username,avatarUrl:l.challenger.avatar_url},opponent:{id:l.opponent.id,username:l.opponent.username,avatarUrl:l.opponent.avatar_url},status:l.status,scores:l.scores?{challenger_score:l.scores.challenger_score??0,opponent_score:l.scores.opponent_score??0}:void 0,winnerId:l.winner_id,createdAt:l.created_at}))},updateDuelScores:async(i,n)=>{const{error:r}=await F.from("duels").update({scores:n}).eq("id",i);return r?(console.error("Error updating duel scores:",r),{success:!1,message:r.message}):{success:!0}}},se={...Ey,...vt,...wu,...Ty},ky=({onLogin:i})=>{const[n,r]=Y.useState(!0),[l,d]=Y.useState(""),[h,f]=Y.useState(""),[g,p]=Y.useState(""),[b,w]=Y.useState(null),[v,x]=Y.useState(!1),[S,j]=Y.useState(!1),[R,z]=Y.useState(null),B=async X=>{X.preventDefault(),w(null),x(!0);try{if(n){const{user:D,error:Z}=await se.login(l,h);if(Z)throw new Error(Z);D&&i(D)}else{if(!g.trim())throw new Error("Username richiesto");const{user:D,error:Z}=await se.signUp(g,l,h);if(Z)throw new Error(Z);D&&(z(D),j(!0))}}catch(D){w(D instanceof Error?D.message:"Errore sconosciuto")}finally{x(!1)}};return S&&R?c.jsxs("div",{className:"fixed inset-0 z-[100] flex flex-col items-center justify-center p-6 bg-black/90 backdrop-blur-md overflow-hidden animate-fade-in",children:[c.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[c.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-brand-orange/10 blur-[100px] animate-pulse-slow"}),c.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-brand-purple/10 blur-[100px] animate-pulse-slow"})]}),c.jsxs("div",{className:"relative z-10 text-center space-y-8 animate-[popIn_0.8s_ease-out_forwards]",children:[c.jsx("div",{className:"mx-auto w-24 h-24 bg-gradient-to-br from-brand-gold via-brand-orange to-brand-purple rounded-3xl flex items-center justify-center shadow-[0_0_50px_rgba(255,106,0,0.5)] rotate-12 animate-float",children:c.jsx("span",{className:"text-5xl",children:""})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h1",{className:"text-4xl md:text-7xl font-display font-black italic tracking-tighter leading-none text-white uppercase drop-shadow-[0_0_20px_rgba(255,255,255,0.4)]",children:"COMPLIMENTI!"}),c.jsx("div",{className:"h-0.5 w-32 mx-auto bg-gradient-to-r from-transparent via-brand-gold to-transparent"}),c.jsx("p",{className:"text-2xl md:text-5xl font-display font-black italic tracking-tight uppercase leading-none bg-gradient-to-r from-brand-gold via-white to-brand-gold bg-[length:200%_auto] text-transparent bg-clip-text animate-[shimmerText_3s_linear_infinite]",children:"ORA SEI UN FANNIES"})]}),c.jsxs("p",{className:"text-gray-400 font-bold uppercase tracking-[0.2em] text-xs md:text-sm",children:["Prepara le tue scommesse, ",R.username,"."]}),c.jsx("button",{onClick:()=>i(R),className:"btn-primary !px-16 !text-2xl !py-6 !rounded-[2rem] shadow-[0_0_40px_rgba(255,106,0,0.3)] hover:shadow-[0_0_60px_rgba(255,106,0,0.5)] transition-all hover:scale-105",children:"ENTRA NELL'ARENA"})]})]}):c.jsx("div",{className:"flex flex-col items-center justify-center min-h-[60vh] animate-fade-in",children:c.jsxs("div",{className:"glass-panel w-full max-w-md p-8 text-center relative overflow-hidden group border border-white/10",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-orange to-brand-purple"}),c.jsx("h2",{className:"text-3xl font-display font-bold mb-2 text-white",children:n?"BENTORNATO":"CREA ACCOUNT"}),c.jsx("p",{className:"text-gray-400 text-sm mb-8",children:n?"Inserisci le credenziali per entrare.":"Registrati per iniziare a giocare."}),b&&c.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 text-red-500 p-3 rounded mb-4 text-sm font-bold",children:[" ",b]}),c.jsxs("form",{onSubmit:B,className:"space-y-4 text-left",children:[!n&&c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Username"}),c.jsx("input",{type:"text",placeholder:"Il tuo nome in campo...",value:g,onChange:X=>p(X.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-gray-700 focus:outline-none focus:border-brand-orange transition-colors"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Email"}),c.jsx("input",{type:"email",placeholder:"tu@esempio.com",value:l,onChange:X=>d(X.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-gray-700 focus:outline-none focus:border-brand-orange transition-colors",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase ml-1",children:"Password"}),c.jsx("input",{type:"password",placeholder:"******",value:h,onChange:X=>f(X.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-gray-700 focus:outline-none focus:border-brand-orange transition-colors",required:!0})]}),c.jsx("button",{type:"submit",disabled:v,className:"w-full btn-primary py-4 mt-6 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:v?"CARICAMENTO...":n?"ENTRA IN CAMPO":"ISCRIVITI ORA"})]}),c.jsx("div",{className:"mt-6 pt-6 border-t border-white/5",children:c.jsx("button",{onClick:()=>{r(!n),w(null)},className:"text-sm text-gray-400 hover:text-white transition-colors underline",children:n?"Non hai un account? Registrati":"Hai gi un account? Accedi"})})]})})},Ay=({matchday:i,userBet:n,user:r,onBetPlaced:l,onViewChange:d})=>{const[h,f]=Y.useState(Array(12).fill("")),[g,p]=Y.useState(!1),[b,w]=Y.useState(""),v=(S,j)=>{f(R=>{const z=[...R];return z[S]=j,z})},x=async S=>{if(h.some(R=>R==="")){w("Devi completare tutti i pronostici!");return}p(!0);const j=await se.placeBet(h,S);w(j.message),p(!1),j.success&&l()};return c.jsxs("div",{className:"space-y-6 md:space-y-12 animate-fade-in pb-20 bg-gradient-to-br from-[#2d1b4d] via-[#120a1f] to-black min-h-screen p-0 md:p-10 border border-white/5",children:[n&&c.jsx("div",{className:"flex justify-center px-4 md:px-0",children:c.jsxs("button",{onClick:()=>d("SPY"),className:"glass-card card-bright-yellow !py-1.5 !px-4 flex items-center gap-2 rounded-full border-acid-glow/40 bg-acid-glow/10 hover:bg-acid-glow/20 transition-all group shadow-[0_0_20px_rgba(191,255,0,0.2)]",children:[c.jsx("span",{className:"relative flex h-2 w-2",children:c.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-acid-glow"})}),c.jsxs("span",{className:"text-[10px] md:text-xs font-mono font-black text-acid-glow uppercase tracking-widest leading-none",children:["GIOCATA ATTIVA RILEVATA ",c.jsx("span",{className:"text-white/40 ml-1",children:"|"})," ",c.jsx("span",{className:"text-white group-hover:text-acid-glow transition-colors ml-1",children:"VEDI DETTAGLI"})]}),c.jsx("span",{className:"text-xs group-hover:translate-x-1 transition-transform",children:""})]})}),c.jsxs("div",{className:"glass-panel !bg-black/40 !p-1 md:!p-12 border-0 md:border-2 border-white/10 shadow-[0_0_50px_rgba(157,0,255,0.15)]",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-12 px-4 md:px-0 mt-6 md:mt-0",children:[c.jsx("div",{className:"bg-acid-glow px-6 py-2 md:py-3 skew-x-[-12deg] shadow-[0_0_30px_rgba(191,255,0,0.4)]",children:c.jsxs("h3",{className:"text-2xl md:text-4xl font-display font-black italic tracking-tighter text-black skew-x-[12deg]",children:["ARENA ",c.jsx("span",{className:"text-black/60",children:"1X2"})]})}),c.jsxs("div",{className:"flex items-center gap-4 bg-white/5 px-6 py-2 rounded-2xl border border-white/10 overflow-x-auto whitespace-nowrap",children:[c.jsx("span",{className:"text-[10px] font-mono text-gray-500 uppercase tracking-widest",children:"MONTEPREMI"}),c.jsxs("span",{className:"text-xl md:text-2xl font-mono font-black text-brand-gold",children:[i.currentPot," FTK"]})]})]}),c.jsx("div",{className:"flex flex-col gap-1.5 md:gap-3",children:i.matches.map((S,j)=>c.jsxs("div",{className:`relative overflow-hidden p-6 md:p-6 rounded-none md:rounded-lg border-y md:border-2 transition-all duration-500 group ${j>=10?"bg-brand-purple/20 border-brand-purple/40 hover:border-brand-purple":"bg-white/[0.03] border-white/5 md:border-white/10 hover:border-white/30"}`,children:[c.jsxs("div",{className:"absolute top-3 left-6 text-[#00a2ff] font-mono text-[9px] font-black tracking-widest drop-shadow-[0_0_8px_#00a2ff] opacity-80 uppercase",children:["MATCH_",j+1]}),c.jsxs("div",{className:"flex items-center justify-between gap-2 md:gap-12 mt-4 px-0 md:px-8",children:[c.jsx("div",{className:"flex-1 text-right",children:c.jsx("h4",{className:`text-[14px] md:text-xl font-display font-black italic uppercase tracking-tight leading-none ${j>=10?"text-brand-purple":"text-white"}`,children:S.home})}),c.jsxs("div",{className:"flex flex-col items-center flex-shrink-0",children:[c.jsx("div",{className:"w-5 md:w-10 h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent mb-1"}),c.jsx("span",{className:"text-[9px] font-mono text-gray-500 font-bold tracking-tighter",children:"VS"}),c.jsx("div",{className:"w-5 md:w-10 h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent mt-1"})]}),c.jsx("div",{className:"flex-1 text-left",children:c.jsx("h4",{className:`text-[14px] md:text-xl font-display font-black italic uppercase tracking-tight leading-none ${j>=10?"text-brand-purple":"text-white"}`,children:S.away})})]}),c.jsx("div",{className:"flex justify-center gap-2 md:gap-6 mt-6",children:["1","X","2"].map(R=>c.jsx("button",{onClick:()=>v(j,R),className:`w-full max-w-[125px] h-10 md:h-12 rounded-md text-sm md:text-xl font-mono font-black transition-all duration-300 border-2 ${h[j]===R?"bg-acid-glow text-black border-acid-glow shadow-[0_0_15px_#bfff00] scale-105":"bg-black/60 text-gray-400 border-white/5 hover:border-white/30 hover:text-white"}`,children:R},R))})]},j))}),c.jsxs("div",{className:"mt-8 p-6 md:p-10 border-t border-white/10 flex flex-col items-center gap-6 bg-black/40",children:[b&&c.jsx("div",{className:`text-center text-[10px] md:text-base font-mono font-black uppercase tracking-[0.2em] px-6 py-4 rounded-2xl border-2 animate-bounce ${b.includes("Giocata")?"text-acid-glow border-acid-glow/40 bg-acid-glow/5":"text-red-500 border-red-500/40 bg-red-500/5"}`,children:b}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-3xl",children:[c.jsxs("button",{onClick:()=>x(!1),disabled:g||(r?.tokens||0)<1,className:`py-4 md:py-6 rounded-2xl text-lg md:text-xl font-display font-black italic tracking-tighter uppercase transition-all hover:scale-[0.98] active:scale-95 shadow-[0_0_20px_rgba(255,204,0,0.2)] relative overflow-hidden group ${g||(r?.tokens||0)<1?"bg-gray-800 text-gray-500 cursor-not-allowed opacity-50":"bg-brand-gold text-black border-2 border-white/20"}`,children:[c.jsx("div",{className:"absolute inset-0 bg-white/20 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 pointer-events-none"}),g?"...":"MONTEPREMI 1FT"]}),c.jsxs("button",{onClick:()=>x(!0),disabled:g||(r?.tokens||0)<2,className:`py-4 md:py-6 rounded-2xl text-lg md:text-xl font-display font-black italic tracking-tighter uppercase transition-all hover:scale-[0.98] active:scale-95 shadow-[0_0_30px_rgba(185,242,255,0.4)] relative overflow-hidden group ${g||(r?.tokens||0)<2?"bg-gray-800 text-gray-500 cursor-not-allowed opacity-50":"bg-gradient-to-r from-brand-diamond via-white to-brand-diamond text-black border-2 border-white/20"}`,children:[c.jsx("div",{className:"absolute inset-0 bg-white/40 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700 pointer-events-none"}),g?"...":"SUPERJACKPOT 2FT"]})]})]})]})]})},Oy=({matchday:i})=>{const[n,r]=Y.useState([]),[l,d]=Y.useState([]),[h,f]=Y.useState("CURRENT"),[g,p]=Y.useState(null);Y.useEffect(()=>{se.getAllBets().then(r),se.getArchivedMatchdays().then(d)},[i,h]);const b=h==="CURRENT"?i:g||i,w=n.filter(x=>x.matchdayId===b.id),v=(x,S)=>{let j=0,R=0;return x.forEach((z,B)=>{S[B]&&(R++,z===S[B]&&j++)}),R>0?Math.round(j/R*100):0};return c.jsxs("div",{className:"space-y-8 animate-fade-in pb-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[c.jsx("div",{className:"bg-acid-glow px-8 py-2 md:py-3 skew-x-[-12deg] shadow-[0_0_30px_rgba(191,255,0,0.4)] inline-block self-start",children:c.jsx("h3",{className:"text-2xl md:text-3xl font-display font-black italic tracking-tighter text-black skew-x-[12deg] uppercase",children:"I FANNIES"})}),c.jsxs("div",{className:"flex bg-black/60 rounded-xl p-1.5 border border-white/5 shadow-2xl self-start md:self-center",children:[c.jsxs("button",{onClick:()=>{f("CURRENT"),p(null)},className:`px-4 py-1.5 rounded-lg text-[10px] font-black tracking-widest transition-all uppercase ${h==="CURRENT"?"bg-brand-gold text-black shadow-lg shadow-brand-gold/20":"text-gray-500 hover:text-white"}`,children:["LIVE #",i.id]}),c.jsxs("button",{onClick:()=>f("ARCHIVE"),className:`px-4 py-1.5 rounded-lg text-[10px] font-black tracking-widest transition-all uppercase ${h==="ARCHIVE"?"bg-white/10 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:["STORICO (",l.length,")"]})]})]}),h==="ARCHIVE"&&c.jsxs("div",{className:"glass-panel mb-8 border-brand-gold/20",children:[c.jsx("h4",{className:"text-[10px] font-mono font-black text-brand-gold mb-4 uppercase tracking-[0.3em] opacity-80",children:"Seleziona Giornata Passata"}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:l.length===0?c.jsx("div",{className:"text-gray-500 text-sm italic font-mono uppercase",children:"Nessuna giornata archiviata."}):l.map(x=>c.jsxs("button",{onClick:()=>p(x),className:`px-4 py-2 rounded-lg border-2 transition-all text-xs font-mono font-black ${g?.id===x.id?"bg-brand-gold text-black border-brand-gold shadow-[0_0_20px_rgba(255,204,0,0.3)]":"bg-black/30 text-gray-400 border-white/5 hover:border-white/20"}`,children:["GIORNATA #",x.id]},x.id))})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.length===0?c.jsx("div",{className:"col-span-full text-gray-500 text-center py-20 glass-panel border-dashed border-white/10 font-mono tracking-widest uppercase text-xs",children:h==="CURRENT"?"Nessuna scommessa per questa giornata. Sii il primo!":"Nessun dato per la giornata selezionata."}):w.map(x=>{const S=v(x.predictions,b.results);return c.jsxs("div",{className:"glass-card !bg-black/40 border-2 border-brand-gold/20 hover:border-brand-gold/40 transition-all group overflow-hidden relative",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-brand-gold px-4 py-1 skew-x-[-15deg] translate-x-2 -translate-y-1 shadow-[0_0_15px_rgba(255,204,0,0.3)] z-10",children:c.jsxs("div",{className:"skew-x-[15deg] font-display font-black text-xs text-black uppercase tracking-tighter",children:["LEVEL ",x.level||1]})}),c.jsx("div",{className:"flex items-center justify-between mb-2 p-1",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-brand-gold to-[#D4AF37] p-[1.5px] shadow-lg group-hover:scale-110 transition-transform",children:x.avatarUrl?c.jsx("img",{src:x.avatarUrl,alt:x.username,className:"w-full h-full object-cover rounded-lg"}):c.jsx("div",{className:"w-full h-full bg-black rounded-lg flex items-center justify-center font-display font-black text-brand-gold italic text-xs",children:x.username.charAt(0).toUpperCase()})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"flex flex-col items-start leading-none",children:[c.jsx("span",{className:"font-display font-black italic text-white uppercase tracking-tighter text-sm",children:x.username}),c.jsxs("span",{className:"text-[8px] font-black text-brand-gold/80 uppercase whitespace-nowrap mt-0.5",children:["acc. ",S,"%"]})]}),c.jsx("span",{className:"text-[6px] font-mono text-gray-500 uppercase tracking-widest mt-0.5",children:new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})}),c.jsx("div",{className:"grid grid-cols-6 gap-1 md:gap-1 p-1 bg-black/20 rounded-lg border border-white/5 mx-auto max-w-[92%]",children:x.predictions.map((j,R)=>c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsxs("span",{className:"text-[5px] text-gray-600 font-mono font-bold mb-0.2 opacity-60",children:["#",R+1]}),c.jsx("div",{className:`w-full h-6 md:h-7 rounded-none flex items-center justify-center font-mono font-black text-[9px] md:text-xs border transition-all ${b.results[R]?b.results[R]===j?"bg-acid-glow text-black border-acid-glow shadow-[0_0_10px_rgba(191,255,0,0.3)]":"bg-red-500/10 text-red-500 border-red-500/30 line-through opacity-50":"bg-white/5 text-brand-gold border-brand-gold/20"}`,children:j})]},R))}),x.includeSuperJackpot&&c.jsxs("div",{className:"mt-1.5 pt-1 border-t border-white/5 flex items-center justify-center gap-1.5",children:[c.jsx("span",{className:"w-1 h-1 rounded-full bg-brand-gold animate-pulse"}),c.jsx("span",{className:"text-[7px] font-mono font-black text-brand-gold uppercase tracking-[0.2em]",children:"SUPERJACKPOT ACTIVE"})]})]},x.id)})})]})};const Ry=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cy=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,l)=>l?l.toUpperCase():r.toLowerCase()),Jm=i=>{const n=Cy(i);return n.charAt(0).toUpperCase()+n.slice(1)},x0=(...i)=>i.filter((n,r,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===r).join(" ").trim(),Uy=i=>{for(const n in i)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var Dy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zy=Y.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:l,className:d="",children:h,iconNode:f,...g},p)=>Y.createElement("svg",{ref:p,...Dy,width:n,height:n,stroke:i,strokeWidth:l?Number(r)*24/Number(n):r,className:x0("lucide",d),...!h&&!Uy(g)&&{"aria-hidden":"true"},...g},[...f.map(([b,w])=>Y.createElement(b,w)),...Array.isArray(h)?h:[h]]));const yt=(i,n)=>{const r=Y.forwardRef(({className:l,...d},h)=>Y.createElement(zy,{ref:h,iconNode:n,className:x0(`lucide-${Ry(Jm(i))}`,`lucide-${i}`,l),...d}));return r.displayName=Jm(i),r};const My=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],au=yt("activity",My);const By=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ly=yt("arrow-left",By);const qy=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Hy=yt("camera",qy);const Iy=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$y=yt("check",Iy);const Vy=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Gy=yt("coins",Vy);const Yy=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w0=yt("eye",Yy);const Ky=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xy=yt("file-text",Ky);const Jy=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Qy=yt("house",Jy);const Zy=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Py=yt("pen",Zy);const Wy=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],_u=yt("skull",Wy);const Fy=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],_0=yt("swords",Fy);const ex=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Qm=yt("target",ex);const tx=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],jl=yt("trophy",tx);const ax=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],S0=yt("user",ax);const nx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Zm=yt("x",nx);const sx=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],j0=yt("zap",sx),rx=({currentView:i,onNavigate:n})=>{const r=[{id:"HOME",label:"Home",icon:c.jsx(Qy,{size:18})},{id:"BETTING",label:"1x2 Mode",icon:c.jsx(j0,{size:18})},{id:"SPY",label:"I fannies",icon:c.jsx(w0,{size:18})},{id:"LEADERBOARD",label:"Classifiche",icon:c.jsx(jl,{size:18})},{id:"SURVIVAL",label:"Survival Mode",icon:c.jsx(_u,{size:18})},{id:"DUEL_ARENA",label:"Sfide",icon:c.jsx(_0,{size:18})},{id:"PROFILE",label:"Profilo",icon:c.jsx(S0,{size:18})}];return c.jsx("div",{className:"flex justify-center w-full overflow-x-auto",children:c.jsx("div",{className:"flex gap-1 md:gap-2 p-1 md:p-1.5 rounded-full bg-white/[0.02] border border-white/5 backdrop-blur-2xl min-w-min",children:r.map(l=>c.jsxs("button",{onClick:()=>n(l.id),className:`
                            px-2 md:px-6 py-2 md:py-2.5 rounded-full text-[8px] md:text-[10px] font-black uppercase tracking-[0.2em] flex items-center gap-1 md:gap-3 transition-all duration-500 touch-target whitespace-nowrap
                            ${i===l.id?"bg-white/10 text-white shadow-[0_0_20px_rgba(255,255,255,0.1)] border border-white/10":"text-gray-500 hover:text-white hover:bg-white/5"}
                        `,children:[c.jsx("span",{className:"flex-shrink-0",children:l.icon}),c.jsx("span",{className:"hidden md:inline",children:l.label})]},l.id))})})},ix=({matchday:i})=>{const[n,r]=Y.useState([]),[l,d]=Y.useState([]),[h,f]=Y.useState(null),[g,p]=Y.useState("MATCHDAY"),[b,w]=Y.useState(!1);if(Y.useEffect(()=>{(async()=>{w(!0);try{if(g==="MATCHDAY"){let R=i;if(!R){const D=await se.getArchivedMatchdays();D.length>0&&(R=D[0])}if(f(R),!R){r([]);return}const X=(await se.getAllBets()).filter(D=>D.matchdayId===R.id).map(D=>{let Z=0;return R.results.forEach((he,M)=>{he&&he===D.predictions[M]&&(Z+=1)}),{username:D.username,score:Z,predictions:D.predictions,timestamp:D.timestamp,avatarUrl:D.avatarUrl}});X.sort((D,Z)=>Z.score!==D.score?Z.score-D.score:new Date(D.timestamp).getTime()-new Date(Z.timestamp).getTime()),r(X)}else{const R=await se.getGlobalRanking();d(R)}}finally{w(!1)}})()},[i,g]),!h&&g==="MATCHDAY"&&!b)return c.jsx("div",{className:"text-center text-gray-500 py-10 font-black uppercase tracking-widest text-xs opacity-50 italic",children:"Nessuna classifica disponibile per questa giornata."});const v=g==="MATCHDAY"?n.map(j=>({username:j.username,score:j.score,avatarUrl:j.avatarUrl,extra:"/12"})):l.map(j=>({username:j.username,score:j.totalPoints,avatarUrl:j.avatarUrl,extra:" PT"})),x=v.slice(0,3),S=v.slice(3);return c.jsxs("div",{className:"space-y-10 animate-fade-in pb-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10",children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"bg-brand-purple px-8 py-2 md:py-3 skew-x-[-12deg] shadow-[0_0_30px_rgba(157,0,255,0.4)] inline-block self-start",children:c.jsx("h3",{className:"text-2xl md:text-3xl font-display font-black italic tracking-tighter text-white skew-x-[12deg] uppercase",children:"CLASSIFICA"})}),c.jsxs("div",{className:"flex gap-2 p-1 bg-black/40 backdrop-blur-md rounded-xl border border-white/5 self-start scale-90 origin-left",children:[c.jsxs("button",{onClick:()=>p("MATCHDAY"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${g==="MATCHDAY"?"bg-brand-purple text-white shadow-[0_0_15px_rgba(157,0,255,0.3)]":"text-gray-500 hover:text-gray-300"}`,children:["Giornata ",h?`#${h.id}`:""]}),c.jsx("button",{onClick:()=>p("GLOBAL"),className:`px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${g==="GLOBAL"?"bg-brand-purple text-white shadow-[0_0_15px_rgba(157,0,255,0.3)]":"text-gray-500 hover:text-gray-300"}`,children:"Generale"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-[10px] font-mono font-black text-brand-purple uppercase tracking-[0.2em]",children:g==="MATCHDAY"?h?.status==="OPEN"?"LIVE GIORNATA":"ARCHIVIO GIORNATA":"GLOBAL FANNIES RANKING"}),c.jsx("div",{className:"text-white/30 text-[9px] font-black uppercase tracking-tighter mt-1 italic",children:g==="MATCHDAY"?"Basata sui risultati dell'ultima giornata":"Basata sulla somma di tutti i punti vinti"})]})]}),b?c.jsx("div",{className:"flex justify-center py-20",children:c.jsx("div",{className:"w-10 h-10 border-4 border-brand-purple/20 border-t-brand-purple rounded-full animate-spin"})}):c.jsxs(c.Fragment,{children:[v.length>0&&c.jsxs("div",{className:"flex justify-center items-end gap-2 md:gap-8 pt-8 pb-4 relative",children:[x[1]&&c.jsxs("div",{className:"flex flex-col items-center group scale-90 md:scale-95 translate-y-2",children:[c.jsxs("div",{className:"relative mb-3",children:[c.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 rounded-full border-4 border-slate-400 p-1 bg-black/40 overflow-hidden shadow-[0_0_20px_rgba(148,163,184,0.3)] group-hover:scale-110 transition-transform duration-500",children:x[1].avatarUrl?c.jsx("img",{src:x[1].avatarUrl,alt:x[1].username,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center font-black text-slate-400 bg-slate-900",children:x[1].username.charAt(0).toUpperCase()})}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-slate-400 text-black flex items-center justify-center font-black text-xs",children:"2"})]}),c.jsx("span",{className:"text-[10px] md:text-xs font-black text-slate-300 uppercase tracking-tighter truncate max-w-[80px]",children:x[1].username}),c.jsxs("span",{className:"text-lg md:text-xl font-display font-black text-white",children:[x[1].score,c.jsx("span",{className:"text-[10px] opacity-40",children:x[1].extra})]})]}),x[0]&&c.jsxs("div",{className:"flex flex-col items-center group relative z-10 -translate-y-4",children:[c.jsxs("div",{className:"relative mb-4",children:[c.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 animate-bounce",children:""}),c.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-full border-4 border-yellow-400 p-1.5 bg-black/40 overflow-hidden shadow-[0_0_40px_rgba(250,204,21,0.4)] group-hover:scale-110 transition-transform duration-500",children:x[0].avatarUrl?c.jsx("img",{src:x[0].avatarUrl,alt:x[0].username,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center font-black text-yellow-400 bg-yellow-950/20 text-2xl",children:x[0].username.charAt(0).toUpperCase()})}),c.jsx("div",{className:"absolute -bottom-2 right-0 w-8 h-8 rounded-full bg-yellow-400 text-black flex items-center justify-center font-black text-sm shadow-lg",children:"1"})]}),c.jsx("span",{className:"text-xs md:text-sm font-black text-yellow-500 uppercase tracking-tighter truncate max-w-[120px]",children:x[0].username}),c.jsxs("span",{className:"text-2xl md:text-3xl font-display font-black text-white",children:[x[0].score,c.jsx("span",{className:"text-[10px] opacity-40",children:x[0].extra})]})]}),x[2]&&c.jsxs("div",{className:"flex flex-col items-center group scale-80 md:scale-90 translate-y-4",children:[c.jsxs("div",{className:"relative mb-2",children:[c.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 rounded-full border-4 border-orange-700 p-1 bg-black/40 overflow-hidden shadow-[0_0_20px_rgba(194,65,12,0.3)] group-hover:scale-110 transition-transform duration-500",children:x[2].avatarUrl?c.jsx("img",{src:x[2].avatarUrl,alt:x[2].username,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center font-black text-orange-700 bg-orange-950/20",children:x[2].username.charAt(0).toUpperCase()})}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full bg-orange-700 text-white flex items-center justify-center font-black text-[10px]",children:"3"})]}),c.jsx("span",{className:"text-[9px] md:text-[11px] font-black text-orange-900 uppercase tracking-tighter truncate max-w-[70px]",children:x[2].username}),c.jsxs("span",{className:"text-base md:text-lg font-display font-black text-white",children:[x[2].score,c.jsx("span",{className:"text-[10px] opacity-40",children:x[2].extra})]})]})]}),c.jsx("div",{className:"max-w-2xl mx-auto space-y-2 mt-8",children:S.length===0&&v.length<=3?c.jsx("div",{className:"text-center py-10",children:v.length===0&&c.jsx("div",{className:"text-gray-500 text-sm italic font-mono uppercase tracking-[0.2em]",children:"Ancora nessuna giocata valida."})}):S.map((j,R)=>{const z=R+4;return c.jsxs("div",{className:"group flex items-center px-4 py-2 bg-black/40 backdrop-blur-md rounded-lg border border-brand-purple/20 hover:border-brand-purple transition-all duration-300 shadow-[0_0_15px_rgba(157,0,255,0.05)] hover:shadow-[0_0_20px_rgba(157,0,255,0.15)] transform hover:-translate-y-0.5",children:[c.jsxs("div",{className:"w-6 font-mono font-black text-[10px] text-gray-600 mr-4",children:["#",z]}),c.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[c.jsx("div",{className:"w-6 h-6 rounded-full border border-brand-purple/30 p-[1px] overflow-hidden",children:j.avatarUrl?c.jsx("img",{src:j.avatarUrl,alt:j.username,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center font-black text-[8px] text-brand-purple bg-brand-purple/10 uppercase",children:j.username.charAt(0)})}),c.jsx("span",{className:"font-display font-black italic text-gray-200 uppercase tracking-tighter text-sm",children:j.username})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsxs("span",{className:"text-lg font-display font-black text-white leading-none",children:[j.score,c.jsx("span",{className:"text-[8px] text-gray-600 font-sans font-black",children:j.extra})]}),g==="MATCHDAY"&&j.score>=7&&c.jsx("span",{className:"text-[6px] font-black text-brand-purple uppercase tracking-widest mt-0.5 animate-pulse",children:"ZONA PREMIO"})]})})]},j.username)})})]})]})},lx=({user:i,activeMatchday:n,onBack:r,onBalanceUpdate:l})=>{const[d,h]=Y.useState(null),[f,g]=Y.useState([]),[p,b]=Y.useState(!1),[w,v]=Y.useState(!0),[x,S]=Y.useState(null),j=f.find(V=>V.userId&&V.userId===i?.id||V.username&&V.username===i?.username),R=j?.status?.toUpperCase()==="ALIVE",z=!!j,B=d?.status==="OPEN";console.log("[SurvivalView] State Update:",{userId:i?.id,username:i?.username,foundMe:!!j,myStatus:j?.status,isAlive:R,playersCount:f.length});const D=f.filter(V=>V.status?.toUpperCase()!=="ALIVE").length*2,Z=Y.useCallback(async()=>{v(!0),console.log("Loading Survival Data...");const V=await se.getSurvivalState();console.log("Survival View - User Props:",i),console.log("Survival View - State Received:",V),console.log("Survival View - MyPlayer Search:",V.players.find(Te=>Te.userId===i?.id)),h(V.season),g(V.players),v(!1)},[i]);Y.useEffect(()=>{(async()=>await Z())()},[i,Z]);const he=async()=>{if(!d)return;b(!0),S(null);const V=await se.joinSurvival(d.id);V.success?(S({type:"success",text:V.message}),l(),Z()):S({type:"error",text:V.message}),b(!1)},M=async V=>{if(!d||!confirm(`Sei sicuro di voler scegliere ${V}? Non potrai cambiarla.`))return;b(!0),S(null);const Te=await se.submitSurvivalPick(d.id,V);Te.success?(S({type:"success",text:Te.message}),Z()):S({type:"error",text:Te.message}),b(!1)},G=()=>"bg-slate-800/40 border-slate-500/30 text-slate-100 hover:bg-slate-700/60 hover:border-slate-400/50",re=()=>n?n.matches.flatMap(ke=>[ke.home,ke.away]).slice(0,-4).filter(ke=>!j?.usedTeams.includes(ke)):[];return w?c.jsx("div",{className:"text-center p-10 font-display text-2xl animate-pulse",children:"CARICAMENTO ARENA..."}):d?c.jsxs("div",{className:"space-y-6 animate-fade-in relative min-h-screen",children:[c.jsxs("div",{className:"fixed inset-0 z-[-1] pointer-events-none",children:[c.jsx("img",{src:"/arena.png",alt:"Arena Background",className:"w-full h-full object-cover opacity-30"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-transparent to-black"})]}),c.jsxs("div",{className:"glass-panel relative overflow-hidden bg-black/80 border-red-900/50 py-10 md:py-16 px-4 md:p-6 group shadow-[0_0_50px_rgba(220,38,38,0.2)]",children:[c.jsxs("div",{className:"absolute inset-0 z-0",children:[c.jsx("img",{src:"/arena_header.png",alt:"Arena Background",className:"w-full h-full object-cover opacity-60 scale-110 group-hover:scale-100 transition-transform duration-1000"}),c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/80 via-red-950/20 to-black/80"}),c.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"repeating-radial-gradient(circle at 50% 150%, transparent 0, transparent 40px, rgba(220,38,38,1) 40px, rgba(220,38,38,1) 41px)"}})]}),c.jsxs("div",{className:"text-center relative z-10",children:[c.jsx("div",{className:"flex flex-col items-center justify-center mb-2",children:c.jsxs("div",{className:"flex items-baseline gap-3",children:[c.jsx("h2",{className:"text-5xl sm:text-7xl md:text-[9.5rem] font-display font-black italic text-red-600 tracking-tighter drop-shadow-[0_0_35px_rgba(220,38,38,0.7)] leading-none",children:"ARENA"}),c.jsxs("span",{className:"text-base md:text-2xl font-black text-red-500/80 uppercase tracking-widest italic flex flex-col items-start leading-none gap-1",children:[c.jsx("span",{className:"text-xs opacity-40 not-italic tracking-[0.3em] mb-1",children:"PROTOCOL"}),"ROUND ",f.length>0?Math.max(...f.map(V=>V.usedTeams.length))+1:1]})]})}),c.jsxs("div",{className:"flex flex-col items-center mt-2 md:mt-4",children:[c.jsxs("div",{className:"text-2xl md:text-5xl font-black uppercase tracking-[0.2em] text-transparent bg-clip-text bg-gradient-to-b from-[#fef08a] via-[#eab308] to-[#713f12] drop-shadow-[0_4px_12px_rgba(0,0,0,0.9)] italic",children:["FT KILL: ",D]}),c.jsx("div",{className:"text-[7px] font-black text-red-900 uppercase tracking-[0.4em] opacity-40 mt-[-4px] mb-4",children:"Sanguis et Aurum"})]}),!z&&!B&&c.jsx("div",{className:"mt-4 px-4 py-2 bg-black/40 border border-white/10 rounded-full text-[8px] font-black text-white/40 uppercase tracking-widest",children:"Lobby Chiusa  In Corso"}),z&&c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:`px-2 py-0.5 rounded-sm font-black text-[7px] italic tracking-tighter uppercase shadow-lg border ${R?"bg-green-500/10 text-green-500 border-green-500/30":"bg-red-600/10 text-red-500 border-red-600/30"}`,children:R?"ALIVE":"ELIMINATED"})})]})]}),!z&&c.jsxs("div",{className:"text-center py-6",children:[c.jsx("p",{className:"text-sm mb-4 font-bold text-white/60 uppercase tracking-widest",children:"Only one will survive."}),c.jsx("button",{onClick:he,disabled:p||!B||(i?.tokens||0)<2,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-xl font-black text-lg tracking-tighter shadow-xl hover:scale-105 active:scale-95 transition-all disabled:opacity-50",children:p?"WAIT...":"JOIN (2 TOKENS)"})]}),x&&x.text!=="Iscrizione effettuata!"&&c.jsx("div",{className:`p-4 rounded-xl border-2 font-bold text-center text-xs animate-fade-in ${x.type==="success"?"bg-green-500/10 border-green-500 text-green-400":"bg-red-500/10 border-red-500 text-red-400"}`,children:x.text}),z&&R&&c.jsxs("div",{className:"glass-panel bg-black/40 backdrop-blur-xl border-white/5 p-3.5 md:p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[c.jsx("h3",{className:"text-sm font-black italic text-white uppercase tracking-widest opacity-80",children:" HAI SCELTO"}),c.jsx("span",{className:"text-[8px] font-black text-white/10 uppercase tracking-[0.2em]",children:"Live Status"})]}),n&&n.status==="OPEN"?c.jsx(c.Fragment,{children:j.currentPick?c.jsxs("div",{className:"text-center py-5 bg-white/[0.02] rounded-3xl border border-white/5 relative overflow-hidden group",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/[0.01] to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),c.jsx("div",{className:"text-gray-500 text-[8px] font-black uppercase tracking-widest mb-1 opacity-40",children:"Locked In:"}),c.jsx("div",{className:"text-3xl md:text-5xl font-black italic text-white mb-2 tracking-tighter drop-shadow-2xl px-2",children:j.currentPick}),j.usedTeams.length>0&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5 px-4",children:[c.jsx("div",{className:"text-[7px] font-black text-white/20 uppercase tracking-[0.3em] mb-1.5 text-center",children:"History"}),c.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 opacity-60",children:j.usedTeams.map((V,Te)=>c.jsx("span",{className:"text-[8px] font-black text-gray-500 border border-white/5 px-2 py-0.5 rounded-full bg-black/20",children:V},Te))})]})]}):c.jsx("div",{className:"grid grid-cols-2 gap-2",children:re().length>0?re().map(V=>c.jsx("button",{onClick:()=>M(V),disabled:p,className:`group relative overflow-hidden border-2 p-3 rounded-xl transition-all hover:scale-[1.02] active:scale-95 flex flex-col items-center justify-center shadow-lg ${G()}`,children:c.jsx("span",{className:"text-sm font-black italic uppercase tracking-tight relative z-10",children:V})},V)):c.jsx("div",{className:"col-span-2 text-center py-4 text-white/40 text-[10px] font-black uppercase",children:"Nessuna squadra disponibile"})})}):c.jsx("div",{className:"text-gray-500 text-[10px] font-black text-center py-4 uppercase tracking-widest bg-black/20 rounded-2xl",children:n?n.status==="CLOSED"?"Turno Chiuso":"Fase di elaborazione":"In attesa di matchday aperto..."})]}),c.jsxs("div",{className:"space-y-12 pb-20",children:[c.jsxs("div",{className:"glass-panel border-green-500/20 bg-black/40 backdrop-blur-md pb-6 px-3",children:[c.jsxs("h3",{className:"text-lg font-display font-black italic text-green-400 mb-4 flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"}),"STARTING GRID (",f.filter(V=>V.status?.toUpperCase()==="ALIVE").length,")"]}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:f.filter(V=>V.status?.toUpperCase()==="ALIVE").map(V=>c.jsxs("div",{className:"bg-white/[0.03] border border-white/5 p-1 rounded-lg flex flex-col items-center text-center gap-1.5 relative group hover:bg-white/[0.08] transition-all",children:[c.jsxs("div",{className:"relative pt-1",children:[c.jsx("div",{className:"w-12 h-12 rounded-full border-2 border-green-500/30 overflow-hidden bg-black/40 group-hover:border-green-500 transition-colors",children:V.avatarUrl?c.jsx("img",{src:V.avatarUrl,alt:V.username,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-sm font-black opacity-20 italic",children:V.username.charAt(0).toUpperCase()})}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full bg-green-500 border border-black flex items-center justify-center text-[8px] font-black shadow-lg",children:""})]}),c.jsx("div",{className:"w-full min-w-0",children:c.jsxs("div",{className:"flex flex-col items-center gap-0.5 leading-none",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"font-display font-black text-[10px] text-white uppercase truncate",children:V.username}),(V.userId&&V.userId===i?.id||V.username&&V.username===i?.username)&&c.jsx("span",{className:"text-[6px] text-brand-teal font-black",children:" TU"})]}),c.jsx("span",{className:"text-[8px] font-black italic text-green-500/60 uppercase truncate",children:V.currentPick||"READY"})]})}),c.jsxs("div",{className:"mt-1 flex items-center gap-1 bg-black/40 px-2 py-0.5 rounded-full border border-white/5",children:[c.jsx("span",{className:"text-[9px] font-black text-yellow-500 leading-none",children:"2"}),c.jsx("span",{className:"text-[6px] font-black text-white/20 uppercase",children:"TK"})]})]},V.id))})]}),c.jsxs("div",{className:"glass-panel border-red-900/40 bg-black/60 backdrop-blur-md pt-8",children:[c.jsxs("h3",{className:"text-xl font-display font-black italic text-red-600 mb-8 flex items-center gap-2 justify-center",children:[" CIMITERO (",f.filter(V=>V.status!=="ALIVE").length,")"]}),c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-4 px-2",children:f.filter(V=>V.status!=="ALIVE").map(V=>c.jsxs("div",{className:"tombstone group",children:[c.jsx("div",{className:"absolute top-2 right-2 text-[8px] text-red-900 font-black opacity-20",children:V.eliminatedAt?`G${V.eliminatedAt}`:""}),c.jsx("div",{className:"w-8 h-8 rounded-full border border-white/5 grayscale opacity-30 mb-2 overflow-hidden",children:V.avatarUrl?c.jsx("img",{src:V.avatarUrl,alt:V.username,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] font-black",children:"?"})}),c.jsx("span",{className:"font-display font-black text-[9px] text-white/40 uppercase tracking-tighter truncate w-full text-center",children:V.username}),c.jsx("div",{className:"mt-2 flex flex-wrap justify-center gap-0.5 max-w-full opacity-20 group-hover:opacity-40 transition-opacity",children:V.usedTeams.slice(-2).map((Te,ke)=>c.jsx("span",{className:"text-[5px] font-black px-1 border border-white/10 rounded",children:Te},ke))})]},V.id))})]})]})]}):c.jsxs("div",{className:"glass-panel text-center p-10 bg-black/80",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"SURVIVAL MODE"}),c.jsx("p",{children:"Nessuna stagione attiva al momento."}),c.jsx("button",{onClick:r,className:"mt-6 text-gray-400 hover:text-white",children:"Torna Indietro"})]})},ox=({onRegulations:i,onRequestTokens:n,onProfile:r})=>c.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-black/90 backdrop-blur-xl border-t border-white/5 md:hidden pb-safe",children:c.jsxs("div",{className:"flex justify-around items-center max-w-md mx-auto h-20 px-6 relative",children:[c.jsxs("button",{onClick:i,className:"flex flex-col items-center justify-center space-y-1 group transition-all duration-300",children:[c.jsx("div",{className:"p-2 rounded-xl group-active:bg-white/10 transition-colors",children:c.jsx(Xy,{size:22,className:"text-gray-400 group-hover:text-white transition-colors"})}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-gray-500 group-hover:text-white transition-colors",children:"Regole"})]}),c.jsxs("div",{className:"relative -top-6",children:[c.jsxs("button",{onClick:n,className:"w-16 h-16 bg-gradient-to-b from-brand-gold via-[#D4AF37] to-[#B8860B] rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(255,215,0,0.4)] border-4 border-black group active:scale-90 transition-all duration-300",children:[c.jsx("div",{className:"absolute inset-0 rounded-full bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"}),c.jsx(Gy,{size:28,className:"text-black drop-shadow-sm"})]}),c.jsx("div",{className:"absolute -bottom-7 left-1/2 -translate-x-1/2 w-max",children:c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-brand-gold animate-pulse",children:"Tokens"})})]}),c.jsxs("button",{onClick:r,className:"flex flex-col items-center justify-center space-y-1 group transition-all duration-300",children:[c.jsx("div",{className:"p-2 rounded-xl group-active:bg-white/10 transition-colors",children:c.jsx(S0,{size:22,className:"text-gray-400 group-hover:text-white transition-colors"})}),c.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-gray-500 group-hover:text-white transition-colors",children:"Profilo"})]})]})}),cx=({user:i,onClose:n,onLogout:r,onProfileUpdate:l})=>{const[d,h]=Y.useState(!1),[f,g]=Y.useState(i?.username||""),[p,b]=Y.useState(!1),[w,v]=Y.useState(!1),[x,S]=Y.useState(!1),j=Y.useRef(null),R=async()=>{if(!f.trim())return;v(!0);const M=await se.updateProfile(f);M.success?(h(!1),l&&l()):alert(M.message),v(!1)},z=async M=>{const G=M.target.files?.[0];if(!G)return;b(!0);const re=await se.uploadAvatar(G);re.success&&re.url?(await se.updateProfile(i?.username||"",re.url)).success&&l&&l():alert(re.message),b(!1)},B=[{level:1,label:"Principiante",requirements:{bets:0,wins:0,tokens:0}},{level:2,label:"Scommettitore",requirements:{bets:5,wins:1,tokens:100}},{level:3,label:"Veterano",requirements:{bets:15,wins:3,tokens:500}},{level:4,label:"Campione",requirements:{bets:30,wins:7,tokens:1500}},{level:5,label:"Leggenda",requirements:{bets:50,wins:15,tokens:5e3}}],X=i?.level||1,D=B.find(M=>M.level===X+1),Z=()=>{if(!D)return 100;const M=D.requirements,G=Math.min(100,(i?.betsPlaced||0)/M.bets*100),re=Math.min(100,((i?.wins1x2||0)+(i?.winsSurvival||0))/M.wins*100),V=Math.min(100,(i?.totalTokensWon||0)/M.tokens*100);return Math.max(G,re,V)},he=[{label:"Vittorie 1X2",value:i?.wins1x2||0,icon:c.jsx(jl,{className:"text-black",size:24}),color:"bg-gradient-to-br from-brand-gold to-yellow-600 shadow-brand-gold/20"},{label:"Survival",value:i?.winsSurvival||0,icon:c.jsx(_u,{className:"text-white",size:24}),color:"bg-gradient-to-br from-red-600 to-red-900 shadow-red-600/20"},{label:"Livello",value:X,icon:c.jsx(au,{className:"text-black",size:24}),color:"bg-gradient-to-br from-brand-purple to-purple-900 shadow-brand-purple/20"},{label:"Precisione",value:`${i?.predictionAccuracy||0}%`,icon:c.jsx(Qm,{className:"text-black",size:24}),color:"bg-gradient-to-br from-brand-teal to-teal-800 shadow-brand-teal/20"}];return c.jsxs("div",{className:"relative animate-fade-in px-4 max-w-4xl mx-auto pt-10 pb-20 min-h-screen",children:[c.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden pointer-events-none bg-[#020617]",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-purple/5 via-blue-900/10 to-[#020617]"}),c.jsx("div",{className:"absolute -top-48 -left-48 w-96 h-96 bg-blue-600/10 blur-[120px] rounded-full animate-pulse-slow"}),c.jsx("div",{className:"absolute top-1/2 -right-48 w-[500px] h-[500px] bg-brand-purple/5 blur-[150px] rounded-full animate-float"}),c.jsx("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-blue-500/10 blur-[100px] rounded-full"})]}),c.jsx("div",{className:"absolute left-4 top-6 z-20",children:c.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-3 py-2 rounded-full bg-black/40 border border-white/10 text-white font-black uppercase tracking-widest text-xs hover:bg-black/50 transition",children:[c.jsx(Ly,{size:16}),c.jsx("span",{children:"INDIETRO"})]})}),c.jsxs("div",{className:"flex flex-col items-center mb-10",children:[c.jsx("div",{className:"relative group cursor-pointer",onClick:()=>j.current?.click(),children:c.jsxs("div",{className:"w-24 h-24 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-brand-purple shadow-[0_0_40px_rgba(157,0,255,0.3)] bg-black/40 flex items-center justify-center",children:[i?.avatarUrl?c.jsx("img",{src:i.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):c.jsx("span",{className:"text-4xl md:text-6xl text-brand-purple opacity-40",children:""}),p&&c.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center rounded-full",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),!p&&c.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity rounded-full",children:c.jsx(Hy,{className:"text-white",size:28})})]})}),c.jsx("input",{type:"file",ref:j,onChange:z,className:"hidden",accept:"image/*"}),c.jsxs("div",{className:"mt-4 flex flex-col items-center text-center px-4",children:[d?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:f,onChange:M=>g(M.target.value),className:"bg-black/60 border-2 border-brand-purple rounded-lg px-3 py-1 text-lg md:text-xl font-black italic tracking-tighter text-white outline-none w-full max-w-[200px]",autoFocus:!0}),c.jsx("button",{onClick:R,disabled:w,className:"p-2 bg-green-500 rounded-lg text-black",children:c.jsx($y,{size:18})}),c.jsx("button",{onClick:()=>{h(!1),g(i?.username||"")},className:"p-2 bg-red-500 rounded-lg text-black",children:c.jsx(Zm,{size:18})})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h1",{className:"text-2xl md:text-5xl font-black italic tracking-tighter text-white drop-shadow-[0_0_20px_rgba(157,0,255,0.3)] uppercase",children:i?.username}),c.jsx("button",{onClick:()=>h(!0),className:"p-1.5 text-gray-500 hover:text-white transition-colors",children:c.jsx(Py,{size:16})})]}),c.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[c.jsx("span",{className:"px-3 py-1 rounded-full bg-brand-purple/20 border border-brand-purple/40 text-[10px] font-black text-brand-purple uppercase tracking-[0.2em]",children:B[X-1]?.label||"Novizio"}),c.jsxs("span",{className:"text-[10px] text-gray-500 font-mono tracking-widest uppercase",children:["ID: ",i?.id?.slice(0,8)]})]})]})]}),c.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-10",children:he.map((M,G)=>c.jsxs("div",{className:`${M.color} p-5 md:p-8 rounded-2xl flex flex-col items-center justify-center text-center shadow-lg transform hover:scale-[1.02] transition-all cursor-default relative overflow-hidden group`,children:[c.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover:opacity-100 transition-opacity"}),c.jsx("div",{className:"mb-3 md:mb-4 p-3 md:p-4 rounded-xl bg-white/20 backdrop-blur-sm shadow-inner group-hover:rotate-12 transition-transform",children:M.icon}),c.jsx("span",{className:"text-[10px] md:text-sm font-black uppercase tracking-widest text-black/60 mb-1",children:M.label}),c.jsx("span",{className:"text-2xl md:text-4xl font-mono font-black text-white drop-shadow-sm",children:M.value})]},G))}),c.jsxs("div",{className:"glass-card border-white/5 bg-black/40 !p-6 md:!p-8 mb-8 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:c.jsx(au,{size:120,className:"text-brand-purple"})}),c.jsx("h3",{className:"text-lg font-black italic uppercase tracking-widest text-white mb-6",children:"PROGRESSO STAGIONALE"}),c.jsxs("div",{className:"space-y-12 relative z-10",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-8 md:gap-0",children:[c.jsxs("div",{className:"flex flex-col items-center md:items-start group transition-all duration-500",children:[c.jsx("div",{className:"flex items-center gap-2 mb-2",children:c.jsx("div",{className:"p-1 px-2 rounded bg-brand-purple/20 border border-brand-purple/40",children:c.jsx("span",{className:"text-[8px] font-black text-brand-purple uppercase tracking-[0.2em] animate-pulse",children:"Status Attuale"})})}),c.jsxs("div",{className:"relative",children:[c.jsx("h4",{className:"text-4xl md:text-6xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-br from-brand-purple via-purple-400 to-indigo-400 uppercase drop-shadow-[0_10px_20px_rgba(157,0,255,0.4)]",children:B[X-1]?.label}),c.jsx("div",{className:"absolute -bottom-2 md:-bottom-4 left-0 w-full h-1.5 bg-brand-purple/30 rounded-full blur-[2px]"}),c.jsx("div",{className:"absolute -bottom-2 md:-bottom-4 left-0 w-1/3 h-1.5 bg-brand-purple rounded-full shadow-[0_0_15px_brand-purple]"})]})]}),c.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center opacity-30 px-6",children:[c.jsx("div",{className:"p-2 rounded-full border border-white/10 bg-white/5 animate-float",children:c.jsx(Qm,{size:24,className:"text-brand-teal"})}),c.jsx("div",{className:"h-px w-32 bg-gradient-to-r from-brand-purple via-brand-teal to-brand-diamond mt-4 shadow-[0_0_10px_rgba(185,242,255,0.3)]"})]}),c.jsxs("div",{className:"flex flex-col items-center md:items-end group transition-all duration-500 opacity-60 hover:opacity-100",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"text-[8px] font-black text-gray-500 uppercase tracking-[0.2em]",children:"Destinazione"}),c.jsx("div",{className:"p-1 px-2 rounded bg-white/5 border border-white/10",children:c.jsx(jl,{size:10,className:"text-gray-400"})})]}),c.jsx("div",{className:"text-center md:text-right",children:c.jsx("h4",{className:"text-2xl md:text-4xl font-black italic tracking-tighter text-white uppercase tracking-tight group-hover:text-brand-diamond transition-colors",children:D?.label||"MASSIMO"})})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-teal animate-ping"}),c.jsx("span",{className:"text-[9px] font-mono text-gray-500 tracking-[0.3em] uppercase",children:"Efficienza Sincronizzata"})]}),c.jsxs("span",{className:"text-xs font-black italic text-brand-teal tracking-tighter drop-shadow-[0_0_10px_rgba(0,255,255,0.3)]",children:[Z().toFixed(0),"% DEL PERCORSO COMPLETATO"]})]}),c.jsx("div",{className:"h-5 w-full bg-white/[0.03] rounded-2xl overflow-hidden border border-white/10 p-1.5 backdrop-blur-md shadow-inner",children:c.jsxs("div",{className:"h-full bg-gradient-to-r from-brand-purple via-brand-teal to-brand-diamond rounded-xl shadow-[0_0_30px_rgba(157,0,255,0.6)] relative overflow-hidden group/bar",style:{width:`${Z()}%`,transition:"width 1.5s cubic-bezier(0.34, 1.56, 0.64, 1)"},children:[c.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(90deg,transparent_25%,rgba(255,255,255,0.2)_50%,transparent_75%)] bg-[length:250%_100%] animate-shimmer"}),c.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover/bar:opacity-100 transition-opacity"})]})})]}),D&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("p",{className:"text-[8px] text-gray-500 uppercase tracking-widest mb-1",children:"Bet Necessarie"}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xs font-bold text-white",children:[i?.betsPlaced||0," / ",D.requirements.bets]}),c.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[((i?.betsPlaced||0)/D.requirements.bets*100).toFixed(0),"%"]})]})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("p",{className:"text-[8px] text-gray-500 uppercase tracking-widest mb-1",children:"Vittorie Target"}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xs font-bold text-white",children:[(i?.wins1x2||0)+(i?.winsSurvival||0)," / ",D.requirements.wins]}),c.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[(((i?.wins1x2||0)+(i?.winsSurvival||0))/D.requirements.wins*100).toFixed(0),"%"]})]})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[c.jsx("p",{className:"text-[8px] text-gray-500 uppercase tracking-widest mb-1",children:"Token Vinti"}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xs font-bold text-white",children:[i?.totalTokensWon||0," / ",D.requirements.tokens]}),c.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[((i?.totalTokensWon||0)/D.requirements.tokens*100).toFixed(0),"%"]})]})]})]})]})]}),c.jsxs("div",{className:"mt-12 space-y-4 max-w-sm mx-auto",children:[c.jsxs("button",{onClick:()=>S(!x),className:"w-full py-4 rounded-2xl bg-brand-teal/10 border border-brand-teal/30 text-brand-teal font-black uppercase tracking-[0.2em] text-xs hover:bg-brand-teal/20 transition-all flex items-center justify-center gap-3 shadow-[0_0_20px_rgba(0,255,204,0.1)]",children:[c.jsx(au,{size:18})," ",x?"Chiudi Istruzioni":"Installa sul Dispositivo"]}),x&&c.jsxs("div",{className:"glass-card !p-6 border-brand-teal/20 bg-brand-teal/5 animate-fade-in text-left",children:[c.jsx("h4",{className:"text-brand-teal font-black italic mb-3 uppercase tracking-tighter",children:"Come installare FANNYBET:"}),c.jsxs("div",{className:"space-y-4 text-xs text-gray-400",children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsx("span",{className:"text-brand-teal font-black",children:"iPhone (Safari):"}),c.jsxs("span",{children:["Tocca l'icona ",c.jsx("span",{className:"text-white",children:"Condividi"})," (quadrato con freccia) e seleziona ",c.jsx("span",{className:"text-white",children:'"Aggiungi alla schermata Home"'}),"."]})]}),c.jsxs("div",{className:"flex gap-3 border-t border-white/5 pt-4",children:[c.jsx("span",{className:"text-brand-teal font-black",children:"Android (Chrome):"}),c.jsxs("span",{children:["Tocca i ",c.jsx("span",{className:"text-white",children:"3 puntini"})," in alto a destra e seleziona ",c.jsx("span",{className:"text-white",children:'"Installa app"'})," o ",c.jsx("span",{className:"text-white",children:'"Aggiungi a schermata Home"'}),"."]})]})]})]}),c.jsxs("button",{onClick:()=>{window.confirm("Vuoi davvero uscire?")&&r&&r()},className:"w-full py-4 rounded-2xl bg-red-500/10 border border-red-500/30 text-red-500 font-black uppercase tracking-[0.2em] text-xs hover:bg-red-500/20 transition-all flex items-center justify-center gap-3 shadow-[0_0_20px_rgba(239,68,68,0.1)]",children:[c.jsx(Zm,{size:18})," Logout Sessione"]})]})]})},ux=({isOpen:i,onClose:n})=>i?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur",children:c.jsxs("div",{className:"glass-card !p-6 md:!p-10 max-h-[80vh] overflow-y-auto w-full md:max-w-2xl relative border-white/10",children:[c.jsx("button",{onClick:n,className:"absolute top-4 md:top-6 right-4 md:right-6 w-10 h-10 flex items-center justify-center text-2xl text-gray-400 hover:text-white transition-colors",children:""}),c.jsx("h1",{className:"text-2xl md:text-4xl font-black italic tracking-tighter text-white mb-6",style:{fontFamily:"'Tourney', display"},children:" REGOLAMENTI"}),c.jsxs("div",{className:"space-y-6 text-gray-300 text-sm md:text-base leading-relaxed",children:[c.jsxs("section",{className:"border-l-4 border-acid-glow pl-4 py-1",children:[c.jsx("h2",{className:"text-lg md:text-xl font-black italic text-acid-glow mb-2 uppercase tracking-tighter",children:"1. 1x2 MODE"}),c.jsxs("p",{className:"text-gray-400 text-xs md:text-sm",children:["Scommetti sull'esito delle partite selezionate per la giornata. Indovinare almeno ",c.jsx("span",{className:"text-white",children:"7 risultati su 10"})," ti permette di vincere il ",c.jsx("span",{className:"text-brand-gold",children:"MONTE PREMI"}),"."]}),c.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-gray-500 text-[10px] md:text-xs",children:[c.jsxs("li",{children:[c.jsx("span",{className:"text-white font-bold",children:"1"}),": Vittoria Casa | ",c.jsx("span",{className:"text-white font-bold",children:"X"}),": Pareggio | ",c.jsx("span",{className:"text-white font-bold",children:"2"}),": Vittoria Trasferta"]}),c.jsx("li",{children:"Costo partecipazione: variabile in base alla giornata."}),c.jsx("li",{children:"Punti Classifica: 1 punto per ogni pronostico corretto."})]})]}),c.jsxs("section",{className:"border-l-4 border-red-500 pl-4 py-1",children:[c.jsx("h2",{className:"text-lg md:text-xl font-black italic text-red-500 mb-2 uppercase tracking-tighter",children:"2. SURVIVAL MODE"}),c.jsxs("p",{className:"text-gray-400 text-xs md:text-sm",children:["Scegli una squadra per ogni turno. Se vince, sopravvivi. Se perde o pareggia, sei ",c.jsx("span",{className:"text-red-500",children:"FUORI"}),"."]}),c.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-gray-500 text-[10px] md:text-xs",children:[c.jsx("li",{children:"Non puoi scegliere la stessa squadra pi di una volta per stagione."}),c.jsx("li",{children:"L'ultimo sopravvissuto vince l'intero bottino accumulato."}),c.jsx("li",{children:"Bonus: Ogni eliminato aggiunge 2 FTK al premio finale."}),c.jsxs("li",{className:"text-amber-400",children:[c.jsx("span",{className:"font-black",children:"IMPORTANTE:"})," Una volta iniziato il torneo, nessun nuovo utente pu iscriversi fino alla conclusione."]}),c.jsxs("li",{className:"text-green-400",children:["Il premio viene ",c.jsx("span",{className:"font-black",children:"automaticamente trasferito"})," al wallet del vincitore alla chiusura della stagione."]})]})]}),c.jsxs("section",{className:"border-l-4 border-brand-purple pl-4 py-1",children:[c.jsx("h2",{className:"text-lg md:text-xl font-black italic text-brand-purple mb-2 uppercase tracking-tighter",children:"3. ARENA DELLE SFIDE"}),c.jsx("p",{className:"text-gray-400 text-xs md:text-sm",children:"Sfida un altro utente in un duello testa a testa 1vs1 sui pronostici della giornata."}),c.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-gray-500 text-[10px] md:text-xs",children:[c.jsx("li",{children:"Chi indovina pi risultati vince la sfida."}),c.jsx("li",{children:"In caso di pareggio, i punti vengono restituiti (meno commissione arena)."})]})]}),c.jsxs("section",{className:"border-l-4 border-brand-gold pl-4 py-1",children:[c.jsx("h2",{className:"text-lg md:text-xl font-black italic text-brand-gold mb-2 uppercase tracking-tighter",children:"4. SUPER JACKPOT"}),c.jsx("p",{className:"text-gray-400 text-xs md:text-sm",children:"Il premio supremo riservato alla perfezione assoluta."}),c.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-gray-500 text-[10px] md:text-xs",children:[c.jsxs("li",{children:["Vinto da chi indovina ",c.jsx("span",{className:"text-brand-gold font-black",children:"10 risultati su 10"})," nella modalit 1x2."]}),c.jsx("li",{children:"Il montepremi  progressivo e cresce a ogni giornata senza vincitori."})]})]}),c.jsxs("section",{className:"border-l-4 border-brand-teal pl-4 py-1",children:[c.jsx("h2",{className:"text-lg md:text-xl font-black italic text-brand-teal mb-2 uppercase tracking-tighter",children:"5. COMUNICAZIONI WHATSAPP"}),c.jsxs("p",{className:"text-gray-400 text-xs md:text-sm",children:["Tutti gli utenti registrati saranno inseriti in un ",c.jsx("span",{className:"text-brand-teal font-bold",children:"gruppo di notifica ufficiale WhatsApp"}),"."]}),c.jsx("p",{className:"mt-2 text-gray-500 text-[10px] md:text-xs italic",children:"Riceverai aggiornamenti sulle scadenze, risultati in tempo reale e annunci amministrativi."})]}),c.jsxs("section",{className:"border-l-4 border-gray-500 pl-4 py-1",children:[c.jsx("h2",{className:"text-lg md:text-xl font-black italic text-gray-300 mb-2 uppercase tracking-tighter",children:"6. CONDOTTA ANTISPORTIVA"}),c.jsx("p",{className:"text-gray-500 text-[10px] md:text-xs",children:"Mantenere un comportamento corretto  fondamentale per la permanenza nella piattaforma."}),c.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1 text-gray-600 text-[9px] md:text-xs",children:[c.jsx("li",{children:"Vietato il multi-accounting o l'uso di script/bot."}),c.jsxs("li",{children:["Qualsiasi tentativo di manipolazione dei risultati porter al ",c.jsx("span",{className:"text-red-500 font-black",children:"BAN PERMANENTE"}),"."]}),c.jsx("li",{children:"Le decisioni degli Admin sono insindacabili."})]})]}),c.jsx("section",{className:"bg-white/[0.02] p-4 rounded-2xl border border-white/5 mt-8",children:c.jsx("p",{className:"text-[10px] text-gray-600 uppercase tracking-widest text-center",children:"Ultimo aggiornamento: 1 Febbraio 2026  Versione 2.1"})})]}),c.jsx("button",{onClick:n,className:"mt-8 w-full py-3 px-4 bg-gradient-to-r from-brand-diamond/50 to-brand-diamond/30 hover:from-brand-diamond/70 hover:to-brand-diamond/50 text-brand-diamond font-black italic uppercase tracking-[0.2em] rounded transition-all duration-300",children:"Ho capito"})]})}):null,dx=({isOpen:i,onClose:n,currentTokens:r})=>{const[l,d]=Y.useState("100"),[h,f]=Y.useState(""),[g,p]=Y.useState(!1);if(!i)return null;const b=()=>{l&&h&&(p(!0),setTimeout(()=>{p(!1),d("100"),f(""),n()},2e3))};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur",children:c.jsxs("div",{className:"glass-card !p-6 md:!p-10 w-full md:max-w-md relative border-white/10",children:[c.jsx("button",{onClick:n,className:"absolute top-4 md:top-6 right-4 md:right-6 w-10 h-10 flex items-center justify-center text-2xl text-gray-400 hover:text-white transition-colors",children:""}),g?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-5xl mb-4 animate-pulse",children:""}),c.jsx("h2",{className:"text-xl md:text-2xl font-black italic text-white mb-2",style:{fontFamily:"'Tourney', display"},children:"RICHIESTA INVIATA!"}),c.jsxs("p",{className:"text-gray-400 text-sm",children:["La tua richiesta di ",l," token  stata inviata all'amministrazione. Riceverai una risposta al pi presto."]})]}):c.jsxs(c.Fragment,{children:[c.jsx("h1",{className:"text-2xl md:text-3xl font-black italic tracking-tighter text-white mb-6",style:{fontFamily:"'Tourney', display"},children:" RICHIEDI TOKEN"}),c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"bg-white/5 p-4 rounded border border-white/10",children:[c.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-[0.2em] font-mono mb-2",children:"Token Attuali"}),c.jsxs("p",{className:"text-2xl font-black text-brand-diamond",style:{fontFamily:"'Tourney', display"},children:[r," FTK"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs md:text-sm font-black uppercase tracking-[0.2em] text-gray-300 block mb-3",children:"Quanti token vuoi?"}),c.jsx("input",{type:"number",value:l,onChange:w=>d(w.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded text-white font-mono placeholder-gray-500 focus:outline-none focus:border-brand-diamond/50 transition-colors",placeholder:"Inserisci l'importo",min:"1",max:"5000"}),c.jsx("p",{className:"text-[10px] text-gray-500 mt-2",children:"Minimo: 1 | Massimo: 5000"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs md:text-sm font-black uppercase tracking-[0.2em] text-gray-300 block mb-3",children:"Motivo della richiesta"}),c.jsxs("select",{value:h,onChange:w=>f(w.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded text-white font-mono focus:outline-none focus:border-brand-diamond/50 transition-colors",children:[c.jsx("option",{value:"",children:"-- Seleziona un motivo --"}),c.jsx("option",{value:"initial",children:"Ho appena iniziato"}),c.jsx("option",{value:"depleted",children:"Ho finito i token"}),c.jsx("option",{value:"play_more",children:"Voglio giocare di pi"}),c.jsx("option",{value:"survival",children:"Voglio partecipare a Survival Mode"}),c.jsx("option",{value:"special_event",children:"Per un evento speciale"}),c.jsx("option",{value:"other",children:"Altro"})]})]}),c.jsx("div",{className:"bg-brand-orange/10 border border-brand-orange/30 p-4 rounded",children:c.jsxs("p",{className:"text-xs md:text-sm text-gray-300 leading-relaxed",children:[c.jsx("strong",{className:"text-brand-orange",children:" Info:"})," L'amministrazione valuter la tua richiesta in base al tuo utilizzo della piattaforma e alla frequenza delle richieste precedenti."]})}),c.jsx("button",{onClick:b,disabled:!l||!h,className:"w-full py-3 px-4 bg-gradient-to-r from-brand-diamond/50 to-brand-diamond/30 hover:from-brand-diamond/70 hover:to-brand-diamond/50 disabled:opacity-50 disabled:cursor-not-allowed text-brand-diamond font-black italic uppercase tracking-[0.2em] rounded transition-all duration-300",children:"Invia Richiesta"})]})]})]})})},Pm=(i,n)=>{if(!i||!n)return 0;let r=0;return i.forEach((l,d)=>{n[d]&&n[d]===l&&r++}),r},hx=()=>{const[i,n]=Y.useState("ACTIVE"),[r,l]=Y.useState([]),[d,h]=Y.useState([]),[f,g]=Y.useState([]),[p,b]=Y.useState(!1),[w,v]=Y.useState(!1),x=Y.useRef(r);Y.useEffect(()=>{x.current=r},[r]);const S=Y.useCallback(async M=>{if(!M)return;const G=x.current||[];if(G.length===0)return;const re=await Promise.all(G.map(async V=>{if(V.status!=="ACCEPTED")return V;const Te=await se.getUserBet(V.challenger.username),ke=await se.getUserBet(V.opponent.username),Ve=Te?Pm(Te.predictions,M):0,Qe=ke?Pm(ke.predictions,M):0,tt={challenger_score:Ve,opponent_score:Qe};return!V.scores||V.scores.challenger_score!==tt.challenger_score||V.scores.opponent_score!==tt.opponent_score?(se.updateDuelScores(V.id,tt).catch(at=>console.error("Failed saving duel scores",at)),{...V,scores:tt}):V}));l(re)},[]),j=Y.useCallback(async()=>{const M=await se.getMyDuels();l(M);const G=await se.getMatchday();G&&await S(G.results)},[S]),R=Y.useCallback(async()=>{const M=await se.getChallengeableUsers();g(M)},[]),z=Y.useCallback(async()=>{const M=await se.getAllDuels();h(M)},[]);Y.useEffect(()=>{j(),R(),z()},[j,R,z]),Y.useEffect(()=>{let M=null,G=!0;return(async()=>{const V=await se.getMatchday();V&&(await S(V.results),M=F.channel(`matchday-${V.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"matchdays",filter:`id=eq.${V.id}`},Te=>{if(!G)return;const ke=Te.new?.results;ke&&S(ke)}).subscribe())})(),()=>{if(G=!1,M)try{F.removeChannel(M)}catch{}}},[S]);const B=async(M,G)=>{if(!confirm(`Vuoi sfidare ${G} in una battaglia 1vs1?`))return;b(!0);const re=await se.createDuel(M);b(!1),re.success?(alert(" Sfida lanciata! Attendi che l'avversario accetti."),n("ACTIVE"),j()):alert("Errore: "+re.message)},X=async(M,G)=>{if(!confirm(G?"Accetti la sfida? Che vinca il migliore!":"Rifiuti la sfida?"))return;const re=await se.respondToDuel(M,G);re.success?j():alert("Errore: "+re.message)},D=r.filter(M=>M.status==="PENDING"),Z=r.filter(M=>M.status==="ACCEPTED"),he=r.filter(M=>M.status==="COMPLETED");return c.jsxs("div",{className:"space-y-8 animate-fade-in pb-24",children:[c.jsxs("div",{className:"relative overflow-hidden rounded-2xl md:rounded-[40px] border-2 md:border-4 border-amber-700 p-4 md:p-8 text-center shadow-[0_0_50px_rgba(180,83,9,0.2)] bg-[url('/arena_bg.png')] bg-cover bg-center",children:[c.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-[2px]"}),c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-amber-700 to-transparent opacity-50 z-10"}),c.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 relative z-10",children:[c.jsx("img",{src:"/shield_logo.png",alt:"Arena Logo",className:"w-48 h-48 object-contain drop-shadow-[0_0_25px_rgba(180,83,9,0.5)] animate-float",style:{maskImage:"radial-gradient(circle at center, black 50%, transparent 100%)",WebkitMaskImage:"radial-gradient(circle at center, black 50%, transparent 100%)"},onError:M=>M.currentTarget.src="https://placehold.co/150x150/000000/b45309?text="}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-3xl md:text-7xl font-black italic tracking-tighter text-white mb-2 uppercase",children:["L'ARENA",c.jsx("span",{className:"text-amber-600 text-4xl md:text-8xl align-top ml-1 md:ml-2 font-display",children:"*"})]}),c.jsxs("p",{className:"text-gray-400 font-bold uppercase tracking-[0.2em] text-xs md:text-sm max-w-lg mx-auto",children:["Sfida gli altri utenti in duelli 1vs1.",c.jsx("br",{}),c.jsx("span",{className:"text-amber-500",children:"Chi rischia di pi, vince di pi."})]})]}),c.jsx("button",{onClick:()=>v(!w),className:"text-[10px] font-black uppercase tracking-widest text-amber-600 border-b border-amber-600/30 hover:border-amber-600 transition-all pb-1",children:w?"Chiudi Regole":"Come Funziona il Punteggio?"}),w&&c.jsxs("div",{className:"bg-white/5 p-4 rounded-xl text-left text-xs text-gray-300 w-full max-w-md border border-white/10 animate-fade-in space-y-2",children:[c.jsx("p",{className:"font-bold text-white mb-1",children:" SYSTEMA GOAL (1-3):"}),c.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-2 items-center",children:[c.jsx("span",{className:"bg-white/10 px-2 py-0.5 rounded text-[10px] font-mono",children:"1 "}),c.jsxs("span",{children:["Risultato POPOLARE (scelto da ",">","50%)"]}),c.jsx("span",{className:"bg-[#dfff00]/20 text-[#dfff00] px-2 py-0.5 rounded text-[10px] font-mono",children:"2 "}),c.jsx("span",{children:"Risultato BILANCIATO (20-50%)"}),c.jsx("span",{className:"bg-red-500/20 text-red-500 px-2 py-0.5 rounded text-[10px] font-mono",children:"3 "}),c.jsxs("span",{children:["Risultato RISCHIOSO (","<","20%)"]})]})]})]})]}),c.jsxs("div",{className:"flex p-1 bg-black/40 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden",children:[c.jsx("button",{onClick:()=>n("ACTIVE"),className:`flex-1 py-3 text-xs font-black uppercase tracking-widest transition-all rounded-xl ${i==="ACTIVE"?"bg-amber-600/20 text-amber-500 border border-amber-600/50 shadow-[0_0_20px_rgba(180,83,9,0.2)]":"text-gray-500 hover:text-white"}`,children:"Le Mie Sfide"}),c.jsx("button",{onClick:()=>n("FIND"),className:`flex-1 py-3 text-xs font-black uppercase tracking-widest transition-all rounded-xl ${i==="FIND"?"bg-amber-600/20 text-amber-500 border border-amber-600/50 shadow-[0_0_20px_rgba(180,83,9,0.2)]":"text-gray-500 hover:text-white"}`,children:"Trova Avversari"}),c.jsx("button",{onClick:()=>n("GLOBAL"),className:`flex-1 py-3 text-xs font-black uppercase tracking-widest transition-all rounded-xl ${i==="GLOBAL"?"bg-amber-600/20 text-amber-500 border border-amber-600/50 shadow-[0_0_20px_rgba(180,83,9,0.2)]":"text-gray-500 hover:text-white"}`,children:"Tutti i Duelli"})]}),i==="ACTIVE"&&c.jsxs("div",{className:"space-y-8",children:[D.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-black italic text-white border-l-4 border-amber-500 pl-4",children:"RICHIESTE IN ATTESA"}),c.jsx("div",{className:"grid gap-4",children:D.map(M=>c.jsx(yl,{duel:M,onRespond:X,isPending:!0},M.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-black italic text-white border-l-4 border-amber-700 pl-4",children:"DUELLI IN CORSO"}),Z.length===0?c.jsxs("div",{className:"text-center py-12 text-gray-600 font-bold uppercase tracking-widest border-2 border-dashed border-white/5 rounded-3xl",children:["Nessun duello attivo. ",c.jsx("br",{}),c.jsx("button",{onClick:()=>n("FIND"),className:"text-amber-600 underline mt-2 hover:text-white transition-colors",children:"Lancia una sfida!"})]}):c.jsx("div",{className:"grid gap-6",children:Z.map(M=>c.jsx(yl,{duel:M},M.id))})]}),he.length>0&&c.jsxs("div",{className:"space-y-4 opacity-60 hover:opacity-100 transition-opacity",children:[c.jsx("h3",{className:"text-lg font-black italic text-gray-400 border-l-4 border-gray-600 pl-4",children:"STORICO"}),c.jsx("div",{className:"grid gap-4",children:he.map(M=>c.jsx(yl,{duel:M},M.id))})]})]}),i==="GLOBAL"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-black italic text-white border-l-4 border-amber-700 pl-4 uppercase",children:"BATTAGLIE GLOBALI"}),d.length===0?c.jsx("div",{className:"text-center py-12 text-gray-500 font-bold uppercase tracking-widest border-2 border-dashed border-white/5 rounded-3xl",children:"Nessun duello registrato per questa giornata."}):c.jsx("div",{className:"grid gap-6",children:d.map(M=>c.jsx(yl,{duel:M},M.id))})]}),i==="FIND"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-black italic text-white border-l-4 border-amber-700 pl-4",children:"SFIDA UN GIOCATORE"}),c.jsxs("p",{className:"text-xs text-gray-500 max-w-md",children:["Puoi sfidare solo gli utenti che hanno ",c.jsx("strong",{children:"gi inserito"})," la schedina per la giornata corrente."]}),f.length===0?c.jsx("div",{className:"text-center py-12 text-gray-500 font-bold uppercase tracking-widest border-2 border-dashed border-white/5 rounded-3xl",children:"Nessun avversario disponibile al momento."}):c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:f.map(M=>c.jsxs("div",{className:"bg-white/5 border border-white/10 p-4 rounded-2xl flex items-center justify-between group hover:border-amber-600 hover:bg-black transition-all",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gray-700 to-black border border-white/20 overflow-hidden",children:M.avatarUrl?c.jsx("img",{src:M.avatarUrl,className:"w-full h-full object-cover"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs font-black text-gray-500",children:M.username.substring(0,2).toUpperCase()})}),c.jsx("span",{className:"font-bold text-white group-hover:text-amber-500 transition-colors",children:M.username})]}),c.jsx("button",{onClick:()=>B(M.id,M.username),disabled:p,className:"px-4 py-2 bg-amber-600 text-black text-[10px] font-black uppercase tracking-widest rounded-lg hover:bg-amber-500 hover:scale-105 active:scale-95 transition-all shadow-[0_0_10px_rgba(180,83,9,0.2)]",children:"Invita "})]},M.id))})]})]})},yl=({duel:i,isPending:n,onRespond:r})=>{const[l,d]=Y.useState(!1),h=Y.useRef(i.status);Y.useEffect(()=>{h.current!==i.status&&(i.status==="COMPLETED"&&i.winnerId&&setTimeout(()=>{d(!0),document.body.classList.add("bronze-arena");const g=setTimeout(()=>{d(!1),document.body.classList.remove("bronze-arena")},6500);return()=>clearTimeout(g)},0),h.current=i.status)},[i.status,i.winnerId]);const f=i.winnerId===i.challenger.id?i.challenger.username:i.winnerId===i.opponent.id?i.opponent.username:"Vincitore";return c.jsxs("div",{className:`relative bg-black rounded-2xl md:rounded-3xl p-4 md:p-6 border-2 ${n?"border-amber-500/50":"border-amber-700/30"} overflow-hidden group hover:border-amber-600 transition-colors`,children:[l&&c.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center pointer-events-none",children:c.jsxs("div",{className:"duel-win-overlay flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"trophy-pop text-amber-400",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"92",height:"92",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-amber-300 drop-shadow-[0_0_20px_rgba(255,204,0,0.6)]",children:[c.jsx("path",{d:"M8 21h8"}),c.jsx("path",{d:"M9 17h6v-3a6 6 0 0 0 6-6V3H3v5a6 6 0 0 0 6 6v3z"}),c.jsx("circle",{cx:"12",cy:"7",r:"3"})]})}),c.jsxs("div",{className:"mt-4 text-amber-300 font-black text-lg md:text-2xl uppercase",children:[f," ",c.jsx("span",{className:"text-white",children:"vince!"})]}),c.jsx("div",{className:"confetti-container absolute inset-0 pointer-events-none",children:Array.from({length:20}).map((g,p)=>c.jsx("span",{className:`confetti confetti-${p%6}`,style:{left:`${p*5%100}%`,animationDelay:`${p%6*.08}s`}},p))})]})}),c.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10",children:c.jsx("div",{className:"bg-black border-2 border-amber-700 rounded-full w-12 h-12 flex items-center justify-center text-amber-600 font-black italic text-xl shadow-xl group-hover:scale-110 transition-transform",children:"VS"})}),c.jsxs("div",{className:"flex justify-between items-center relative z-0",children:[c.jsxs("div",{className:"flex flex-col items-center gap-2 w-1/2 pr-6 border-r border-white/5",children:[c.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-amber-600 p-1 shadow-[0_0_15px_rgba(180,83,9,0.3)]",children:c.jsx("div",{className:"w-full h-full rounded-full bg-gray-800 overflow-hidden",children:i.challenger.avatarUrl&&c.jsx("img",{src:i.challenger.avatarUrl,className:"w-full h-full object-cover"})})}),c.jsx("span",{className:"font-black text-white text-sm",children:i.challenger.username}),i.scores&&c.jsx("div",{className:"text-3xl font-black text-amber-500 drop-shadow-[0_0_10px_rgba(180,83,9,0.5)]",children:i.scores.challenger_score})]}),c.jsxs("div",{className:"flex flex-col items-center gap-2 w-1/2 pl-6",children:[c.jsx("div",{className:"w-14 h-14 rounded-full border-2 border-amber-900 p-1",children:c.jsx("div",{className:"w-full h-full rounded-full bg-gray-800 overflow-hidden",children:i.opponent.avatarUrl&&c.jsx("img",{src:i.opponent.avatarUrl,className:"w-full h-full object-cover"})})}),c.jsx("span",{className:"font-black text-white text-sm",children:i.opponent.username}),i.scores&&c.jsx("div",{className:"text-3xl font-black text-white/50",children:i.scores.opponent_score})]})]}),c.jsx("div",{className:"mt-6 pt-4 border-t border-white/5 flex justify-center",children:n&&r?c.jsxs("div",{className:"flex gap-4 w-full",children:[c.jsx("button",{onClick:()=>r(i.id,!1),className:"flex-1 py-3 rounded-xl bg-white/5 text-gray-400 font-black text-[10px] uppercase tracking-widest hover:bg-white/10 hover:text-white transition-all",children:"Rifiuta"}),c.jsx("button",{onClick:()=>r(i.id,!0),className:"flex-1 py-3 rounded-xl bg-amber-600 text-black font-black text-[10px] uppercase tracking-widest hover:bg-amber-500 hover:scale-105 transition-all shadow-[0_0_15px_rgba(180,83,9,0.4)]",children:"Accetta Sfida"})]}):c.jsx("div",{className:"flex items-center gap-3",children:i.status==="COMPLETED"?c.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-amber-700/80",children:"Terminata"}):c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"inline-block bg-amber-600 text-black text-[10px] font-black uppercase px-2 py-1 rounded animate-pulse",children:"LIVE"}),c.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-amber-700/80",children:"In Corso..."})]})})})]})},Ha=({className:i="",width:n,height:r,variant:l="rectangular"})=>{const d="animate-pulse bg-white/10 rounded-md",h=l==="circular"?"rounded-full":"",f={width:n,height:r};return c.jsx("div",{className:`${d} ${h} ${i}`,style:f})},fx=()=>c.jsxs("div",{className:"space-y-6 md:space-y-12 animate-fade-in no-scrollbar pb-24 md:pb-10",children:[c.jsxs("div",{className:"relative pt-[6.4rem] pb-6 md:pt-[7.2rem] md:pb-16 text-center px-2 flex flex-col items-center",children:[c.jsx(Ha,{width:120,height:16,className:"mb-4"}),c.jsx(Ha,{width:"80%",height:120,className:"rounded-xl !bg-white/5"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3 md:gap-12 px-2 md:px-0 max-w-5xl mx-auto w-full",children:[c.jsx(Ha,{height:100,className:"rounded-xl"}),c.jsx(Ha,{height:100,className:"rounded-xl"})]}),c.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-8 px-2 md:px-0 pb-16 items-start w-full",children:[c.jsx(Ha,{className:"col-span-2 row-span-2 h-[26rem] sm:h-[45rem] md:h-[62rem] rounded-2xl"}),c.jsx(Ha,{className:"col-span-2 h-[13.5rem] sm:h-[24rem] md:h-[34rem] rounded-2xl"}),c.jsx(Ha,{className:"col-span-1 h-[11.5rem] sm:h-[20rem] md:h-[26rem] rounded-2xl"}),c.jsx(Ha,{className:"col-span-1 h-[11.5rem] sm:h-[20rem] md:h-[26rem] rounded-2xl"}),c.jsx(Ha,{className:"col-span-4 h-[16.5rem] sm:h-[28rem] md:h-[36rem] rounded-2xl"})]})]}),mx=({user:i,onBalanceUpdate:n,onLogout:r})=>{const[l,d]=Y.useState(null),[h,f]=Y.useState(void 0),[g,p]=Y.useState("HOME"),[b,w]=Y.useState(null),[v,x]=Y.useState(!1),[S,j]=Y.useState(!1),[R,z]=Y.useState(!1),[B,X]=Y.useState(!0),D=Y.useCallback(async()=>{X(!0);const G=await se.getMatchday();if(d(G),i){const re=await se.getUserBet(i.username);f(re);const{players:V}=await se.getSurvivalState(),Te=V.find(ke=>ke.username===i.username);Te&&w(Te.status)}X(!1)},[i]);Y.useEffect(()=>{D()},[D,g]),Y.useEffect(()=>(g==="SPY"?document.body.classList.add("gold-arena"):document.body.classList.remove("gold-arena"),()=>document.body.classList.remove("gold-arena")),[g]);const Z=()=>{D(),n&&n()};if(B&&g==="HOME")return c.jsx(fx,{});if(!l&&g==="BETTING")return c.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[c.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"NESSUNA GIORNATA ATTIVA"}),c.jsx("p",{className:"text-gray-400",children:"L'Admin sta preparando le nuove partite. Torna pi tardi!"}),c.jsx("button",{onClick:()=>p("HOME"),className:"mt-6 text-brand-orange underline",children:"Torna alla Home"})]});if(!l&&g==="SPY")return c.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[c.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"NESSUNA GIORNATA ATTIVA"}),c.jsx("p",{className:"text-gray-400",children:"Non ci sono ancora scommesse da spiare."}),c.jsx("button",{onClick:()=>p("HOME"),className:"mt-6 text-brand-orange underline",children:"Torna alla Home"})]});const he=l?l.superJackpot:1e3,M=l?l.currentPot:0;return c.jsxs(c.Fragment,{children:[v&&c.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto bg-black/95 backdrop-blur-md",children:c.jsx("div",{className:"min-h-screen flex items-start justify-center pt-32 pb-24 md:pt-40",children:c.jsx(cx,{user:i,onClose:()=>x(!1),onLogout:r,onProfileUpdate:n})})}),c.jsx(ux,{isOpen:S,onClose:()=>j(!1)}),c.jsx(dx,{isOpen:R,onClose:()=>z(!1),currentTokens:i?.tokens||0}),c.jsxs("div",{className:"space-y-6 md:space-y-12 animate-fade-in no-scrollbar pb-24 md:pb-10",children:[g==="HOME"&&c.jsxs("div",{className:"fixed inset-0 z-[-1] overflow-hidden pointer-events-none bg-[#050505]",children:[c.jsx("div",{className:"absolute inset-0 opacity-50 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/fibra.jpg')"}}),c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,transparent_0%,rgba(0,0,0,0.8)_100%)]"}),c.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_40%,rgba(255,255,255,0.03)_0%,transparent_70%)]"}),c.jsx("div",{className:"mesh-glow bg-brand-purple/10 -top-48 -left-48 animate-pulse-slow"}),c.jsx("div",{className:"mesh-glow bg-brand-orange/5 bottom-0 -right-48 animate-float"})]}),g==="HOME"&&c.jsxs("div",{className:"relative pt-[6.4rem] pb-6 md:pt-[7.2rem] md:pb-16 text-center animate-fade-in px-2",children:[c.jsx("p",{className:"text-white font-mono text-[8px] md:text-base uppercase tracking-[0.6em] mb-1 md:mb-3 drop-shadow-[0_0_12px_rgba(255,255,255,0.7)]",children:"benvenuto su"}),c.jsxs("h1",{className:"!text-[5.2rem] sm:!text-[9.1rem] md:!text-[19.5rem] font-display font-black italic tracking-tighter leading-[0.72] bg-gradient-to-br from-brand-teal via-brand-purple-vibrant to-brand-purple-vibrant bg-clip-text text-transparent drop-shadow-[0_0_120px_rgba(157,0,255,0.9)] transform-gpu scale-[1.02] md:scale-[1.05]",children:["FANNY",c.jsx("br",{className:"md:hidden"})," BET"]}),c.jsxs("div",{className:"mt-1 md:mt-8 flex justify-center gap-2",children:[c.jsx("div",{className:"h-[1px] w-6 md:w-20 bg-gradient-to-r from-transparent via-brand-teal/50 to-transparent"}),c.jsx("div",{className:"h-[1px] w-6 md:w-20 bg-gradient-to-r from-transparent via-brand-purple-vibrant/50 to-transparent"})]})]}),g!=="HOME"&&c.jsx("div",{className:"py-4 md:py-12 text-center animate-fade-in px-2",children:c.jsxs("h1",{className:"text-2xl sm:text-4xl md:text-8xl font-display font-black italic tracking-tighter uppercase text-white/90 drop-shadow-[0_0_20px_rgba(255,255,255,0.1)]",children:[g==="BETTING"&&"1X2 MODE",g==="SPY"&&"I FANNIES",g==="LEADERBOARD"&&"CLASSIFICHE",g==="SURVIVAL"&&"SURVIVAL MODE",g==="DUEL_ARENA"&&"SFIDE"]})}),g==="HOME"&&c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 gap-3 md:gap-12 px-2 md:px-0 max-w-5xl mx-auto",children:[c.jsxs("div",{className:"glass-card card-gold !py-3 md:!py-7 px-2 md:px-16 text-center relative overflow-hidden group shadow-[0_0_48px_rgba(255,204,0,0.25)] hover:shadow-[0_0_80px_rgba(255,204,0,0.5)] transition-all duration-500 hover:scale-105",children:[c.jsx("span",{className:"text-brand-gold text-[8px] md:text-[14px] tracking-[0.6em] font-black uppercase mb-0.5 block opacity-95",children:"MONTE PREMI"}),c.jsxs("div",{className:"text-2xl md:text-6xl font-mono font-black text-brand-gold drop-shadow-[0_0_28px_rgba(255,204,0,0.7)]",children:[M,c.jsx("span",{className:"text-[8px] md:text-xl opacity-40 ml-1",children:"FTK"})]})]}),c.jsxs("div",{className:"glass-card card-diamond !py-2 md:!py-5 px-2 md:px-12 text-center relative overflow-hidden group shadow-[0_0_40px_rgba(185,242,255,0.2)] hover:shadow-[0_0_60px_rgba(185,242,255,0.4)] transition-all duration-500 hover:scale-105",children:[c.jsx("span",{className:"text-white text-[7px] md:text-[12px] tracking-[0.6em] font-black uppercase mb-0.5 block opacity-70 relative z-10",children:"SUPER JACKPOT"}),c.jsxs("div",{className:"text-xl md:text-5xl font-mono font-black text-white drop-shadow-[0_0_25px_rgba(255,255,255,0.7)] relative z-10",children:[he,c.jsx("span",{className:"text-[7px] md:text-lg opacity-50 ml-1",children:"FTK"})]})]})]}),g!=="HOME"&&c.jsx("div",{className:"flex justify-center sticky top-12 md:top-6 z-20 px-2 md:px-4",children:c.jsx("div",{className:"liquid-glass !p-1 md:!p-1.5 !rounded-full inline-block backdrop-blur-[40px] border-white/10 shadow-3xl",children:c.jsx(rx,{currentView:g,onNavigate:G=>{G==="PROFILE"?x(!0):p(G)}})})}),g==="HOME"&&c.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-8 animate-fade-in px-2 md:px-0 pb-16 items-start",children:[c.jsxs("button",{onClick:()=>p("BETTING"),className:"glass-card card-acid-green col-span-2 row-span-2 group h-[26rem] sm:h-[45rem] md:h-[62rem] flex flex-col justify-center items-center text-center relative overflow-hidden touch-target animate-float-slow hover:rotate-1 w-full",children:[c.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-[#bfff00]/5 blur-[60px] rounded-full group-hover:bg-[#bfff00]/10 transition-all duration-700"}),c.jsx("div",{className:"mb-2 group-hover:scale-110 transition-transform duration-500",children:c.jsx(j0,{size:40,className:"text-acid-glow md:w-20 md:h-20",strokeWidth:2.5})}),c.jsx("h3",{className:"text-sm sm:text-2xl md:text-5xl font-black italic tracking-tighter text-white/90 uppercase",children:"1x2 Mode"}),c.jsx("p",{className:"text-gray-600 text-[7px] sm:text-xs md:text-sm mt-1 uppercase tracking-[0.2em] font-black group-hover:text-[#bfff00] transition-colors",children:"Gioca ora."})]}),c.jsxs("button",{onClick:()=>p("SURVIVAL"),className:"glass-card card-bright-red col-span-2 group h-[13.5rem] sm:h-[24rem] md:h-[34rem] flex flex-col justify-center items-center text-center relative overflow-hidden touch-target animate-float [animation-delay:1s] hover:-rotate-1 w-full",children:[b==="ALIVE"&&c.jsx("div",{className:"absolute top-2 right-2 z-10 px-2 py-0.5 rounded bg-red-500 text-black text-[8px] font-black animate-pulse",children:"IN VITA"}),c.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-[#ff2200]/5 blur-[60px] rounded-full group-hover:bg-[#ff2200]/10 transition-all duration-700"}),c.jsx("div",{className:"mb-1 md:mb-4 group-hover:scale-110 transition-transform duration-500",children:c.jsx(_u,{size:32,className:"text-[#ff2200] md:w-16 md:h-16",strokeWidth:2.5})}),c.jsx("h3",{className:"text-[12px] sm:text-xl md:text-3xl font-black italic tracking-tighter text-white/90 uppercase",children:"Survival"}),c.jsx("p",{className:"text-gray-600 text-[6px] sm:text-[9px] md:text-xs mt-0.5 uppercase tracking-[0.2em] font-black group-hover:text-[#ff2200] transition-colors",children:"entra nell'arena."})]}),c.jsxs("button",{onClick:()=>p("SPY"),className:"glass-card card-bright-yellow col-span-1 group h-[11.5rem] sm:h-[20rem] md:h-[26rem] flex flex-col justify-center items-center text-center relative overflow-hidden touch-target animate-float-fast [animation-delay:0.5s] hover:rotate-1 w-full",children:[c.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-[#ffee00]/5 blur-[60px] rounded-full group-hover:bg-[#ffee00]/10 transition-all duration-700"}),c.jsx("div",{className:"mb-0.5 md:mb-2 group-hover:scale-110 transition-transform duration-500",children:c.jsx(w0,{size:24,className:"text-[#ffee00] md:w-12 md:h-12",strokeWidth:2.5})}),c.jsx("h3",{className:"text-[10px] sm:text-base md:text-xl font-black italic tracking-tighter text-white/90 uppercase",children:"Fannies"})]}),c.jsxs("button",{onClick:()=>p("LEADERBOARD"),className:"glass-card card-purple col-span-1 group h-[11.5rem] sm:h-[20rem] md:h-[26rem] flex flex-col justify-center items-center text-center relative overflow-hidden touch-target animate-float-slow [animation-delay:1s] hover:rotate-1 w-full",children:[c.jsx("div",{className:"absolute top-0 right-0 w-full h-1/2 bg-gradient-to-b from-brand-purple/5 to-transparent"}),c.jsx("div",{className:"mb-0.5 md:mb-2 group-hover:scale-110 transition-transform duration-500 relative z-10",children:c.jsx(jl,{size:24,className:"text-brand-purple md:w-12 md:h-12",strokeWidth:2.5})}),c.jsx("h3",{className:"text-[10px] sm:text-base md:text-xl font-black italic tracking-tighter text-white/90 uppercase relative z-10",children:"Classifiche"})]}),c.jsxs("button",{onClick:()=>p("DUEL_ARENA"),className:"glass-card card-bronze col-span-4 group h-[16.5rem] sm:h-[28rem] md:h-[36rem] flex flex-col justify-center items-center text-center relative overflow-hidden touch-target animate-float-slow [animation-delay:2s] hover:scale-[1.01] w-full",children:[c.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-[#b45309]/5 blur-[60px] rounded-full group-hover:bg-[#b45309]/10 transition-all duration-700"}),c.jsx("div",{className:"mb-2 md:mb-4 group-hover:scale-110 transition-transform duration-500",children:c.jsx(_0,{size:40,className:"text-[#b45309] md:w-20 md:h-20",strokeWidth:2.5})}),c.jsx("h3",{className:"text-xl sm:text-4xl md:text-7xl font-black italic tracking-tighter text-white/90 uppercase",children:"Sfide"}),c.jsx("p",{className:"text-gray-600 text-[8px] sm:text-sm md:text-base mt-1 uppercase tracking-[0.3em] font-black group-hover:text-[#b45309] transition-colors",children:"il muro della gloria."})]})]}),g==="BETTING"&&l&&c.jsx("div",{className:"relative animate-fade-in",children:c.jsx(Ay,{matchday:l,userBet:h,user:i,onBetPlaced:Z,onViewChange:p})}),g==="SPY"&&l&&c.jsx("div",{className:"relative animate-fade-in",children:c.jsx(Oy,{matchday:l})}),g==="LEADERBOARD"&&c.jsx("div",{className:"relative animate-fade-in",children:c.jsx(ix,{matchday:l})}),g==="SURVIVAL"&&c.jsx("div",{className:"relative animate-fade-in",children:c.jsx(lx,{user:i,activeMatchday:l,onBack:()=>p("HOME"),onBalanceUpdate:()=>{n&&n(),D()}})}),g==="DUEL_ARENA"&&c.jsx("div",{className:"relative animate-fade-in",children:c.jsx(hx,{})})]}),g==="HOME"&&c.jsx(ox,{onRegulations:()=>j(!0),onRequestTokens:()=>z(!0),onProfile:()=>x(!0)})]})},px=()=>{const[i,n]=Y.useState(null),[r,l]=Y.useState([]),[d,h]=Y.useState(!1),[f,g]=Y.useState(null);Y.useEffect(()=>{p()},[]);const p=async()=>{const S=await se.getSurvivalState();n(S.season),l(S.players)},b=async S=>{if(S.preventDefault(),!!i&&window.confirm("Chiudere la stagione e proclamare il vincitore?")){h(!0),g(null);try{const j=await se.closeSurvivalSeason(i.id);console.log("Close season response:",j),j.success?(g({type:"success",text:j.message}),p()):g({type:"error",text:j.message})}catch(j){console.error(j),g({type:"error",text:"Errore interno."})}finally{h(!1)}}},w=async S=>{if(S.preventDefault(),!!window.confirm("Creare una nuova stagione Survival?")){h(!0),g(null);try{const j=await se.startNewSurvivalSeason();j.success?(g({type:"success",text:j.message}),p()):g({type:"error",text:j.message})}catch(j){console.error("Error creating new season:",j),g({type:"error",text:"Errore imprevisto durante la creazione."})}finally{h(!1)}}},v=r.filter(S=>S.status==="ALIVE").length,x=r.filter(S=>S.status!=="ALIVE").length;return i?c.jsxs("div",{className:"glass-panel space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b-2 border-[#dfff00]/20",children:[c.jsxs("h3",{className:"text-3xl font-black italic text-white flex items-center gap-4 tracking-tighter",children:[" SURVIVAL MODE",c.jsx("span",{className:`text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest border ${i.status==="OPEN"?"bg-[#dfff00] text-black border-[#dfff00]":"bg-transparent text-gray-500 border-gray-500"}`,children:i.status})]}),c.jsxs("button",{onClick:p,className:"group flex items-center gap-2 px-4 py-2 rounded-xl border border-[#dfff00]/30 hover:bg-[#dfff00] hover:text-black hover:border-[#dfff00] transition-all",title:"Aggiorna dati",children:[c.jsx("span",{className:"text-xl group-hover:rotate-180 transition-transform duration-500",children:""}),c.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest hidden sm:inline",children:"Refresh"})]})]}),f&&c.jsx("div",{className:`p-4 rounded-2xl border-2 text-xs font-black uppercase tracking-widest mb-6 ${f.type==="success"?"bg-[#dfff00]/10 border-[#dfff00] text-[#dfff00]":"bg-red-500/10 border-red-500 text-red-500"}`,children:f.text}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-black/40 border-2 border-[#dfff00] p-4 rounded-3xl text-center shadow-[0_0_20px_rgba(223,255,0,0.1)] relative overflow-hidden group hover:scale-[1.02] transition-transform",children:[c.jsx("div",{className:"absolute inset-0 bg-[#dfff00]/5 group-hover:bg-[#dfff00]/10 transition-colors"}),c.jsx("div",{className:"text-[9px] text-[#dfff00] font-black uppercase tracking-[0.3em] mb-1 opacity-80",children:"Montepremi"}),c.jsxs("div",{className:"text-3xl font-black text-white italic tracking-tighter drop-shadow-lg",children:[i.prizePool," ",c.jsx("span",{className:"text-xl not-italic",children:""})]})]}),c.jsxs("div",{className:"bg-black/40 border-2 border-[#dfff00]/50 p-4 rounded-3xl text-center group hover:border-[#dfff00] transition-colors",children:[c.jsx("div",{className:"text-[9px] text-green-400 font-black uppercase tracking-[0.3em] mb-1 opacity-80",children:"Sopravvissuti"}),c.jsx("div",{className:"text-3xl font-black text-white italic tracking-tighter",children:v})]}),c.jsxs("div",{className:"bg-black/40 border-2 border-red-500/50 p-4 rounded-3xl text-center group hover:border-red-500 transition-colors",children:[c.jsx("div",{className:"text-[9px] text-red-500 font-black uppercase tracking-[0.3em] mb-1 opacity-80",children:"Eliminati"}),c.jsx("div",{className:"text-3xl font-black text-white italic tracking-tighter opacity-50 group-hover:opacity-100 transition-opacity",children:x})]})]}),i.status!=="COMPLETED"&&c.jsx("div",{className:"flex justify-end mb-8",children:c.jsxs("button",{onClick:S=>b(S),disabled:d||v>1,className:"bg-transparent hover:bg-red-600 text-red-500 hover:text-white border-2 border-red-600 px-8 py-3 rounded-xl font-black text-xs uppercase tracking-widest active:scale-95 transition-all disabled:opacity-30 flex items-center gap-2",children:[c.jsx("span",{children:""})," CHIUDI STAGIONE"]})}),c.jsxs("div",{className:"mt-8 border-t border-white/10 pt-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h4",{className:"text-lg font-bold tracking-tight",children:"SITUAZIONE PARTECIPANTI"}),c.jsxs("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:[r.length," GIOCATORI"]})]}),c.jsx("div",{className:"overflow-x-auto rounded-lg border border-white/5",children:c.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[c.jsx("thead",{className:"bg-white/5 text-gray-400 uppercase text-[10px] font-bold",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Utente"}),c.jsx("th",{className:"px-4 py-3 text-center",children:"Stato"}),c.jsx("th",{className:"px-4 py-3",children:"Pick Attuale"}),c.jsx("th",{className:"px-4 py-3",children:"Team Usati"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:r.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-600 italic",children:"Nessun partecipante iscritto"})}):r.map(S=>c.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[c.jsx("td",{className:"px-4 py-4 font-semibold text-white",children:S.username}),c.jsx("td",{className:"px-4 py-4 text-center",children:c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-[9px] font-black leading-none ${S.status==="ALIVE"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-500"}`,children:S.status})}),c.jsx("td",{className:"px-4 py-4",children:S.currentPick?c.jsx("span",{className:"text-black font-mono font-black uppercase py-0.5 px-2 bg-[#dfff00] rounded border border-black/20",children:S.currentPick}):c.jsx("span",{className:"text-gray-600 text-xs italic",children:"Nessun pick"})}),c.jsx("td",{className:"px-4 py-4",children:c.jsx("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:S.usedTeams.length>0?S.usedTeams.map((j,R)=>c.jsx("span",{className:"text-[10px] bg-black/40 text-gray-500 px-1.5 py-0.5 rounded border border-white/5",children:j},R)):c.jsx("span",{className:"text-gray-700",children:"-"})})})]},S.id))})]})})]}),i.status==="COMPLETED"&&c.jsx("button",{onClick:S=>w(S),disabled:d,className:"bg-black text-[#dfff00] w-full py-4 rounded-2xl font-black mt-4 hover:scale-[1.02] transition-all shadow-[6px_6px_0px_rgba(0,0,0,0.2)] border-2 border-black",children:" CREA NUOVA STAGIONE"})]}):c.jsxs("div",{className:"glass-panel text-center py-12 border-dashed border-white/10",children:[c.jsx("h3",{className:"text-2xl font-display font-bold mb-4",children:" SURVIVAL MODE"}),c.jsx("p",{className:"text-gray-400 mb-8 max-w-md mx-auto italic",children:"Non ci sono stagioni attive al momento. Vuoi iniziarne una nuova e aprire le iscrizioni?"}),c.jsx("button",{onClick:S=>w(S),disabled:d,className:"bg-black text-[#dfff00] px-10 py-4 rounded-full font-black text-xl hover:scale-105 transition-all shadow-[8px_8px_0px_black] border-2 border-black disabled:opacity-50",children:d?"ATTENDI...":" CREA NUOVA STAGIONE"})]})},gx=()=>{const[i,n]=Y.useState([]),[r,l]=Y.useState(!0),[d,h]=Y.useState(""),[f,g]=Y.useState(null),[p,b]=Y.useState("0");Y.useEffect(()=>{w()},[]);const w=async()=>{l(!0);try{const z=await se.getAllUsers();n(z)}catch(z){console.error("Errore nel caricamento user:",z),alert("Errore nel caricamento degli utenti")}finally{l(!1)}},v=async(z,B)=>{if(B)try{await se.updateUserTokens(z,B),await w(),b("0"),alert(` ${B>0?"+":""}${B} token aggiunti`)}catch{alert("Errore nell'aggiornamento dei token")}},x=async(z,B)=>{if(confirm(`Sei SICURO di voler eliminare l'account di ${B}? Questa azione non pu essere annullata!`))try{await se.deleteUserProfile(z),await w(),alert(` Account ${B} eliminato`)}catch{alert("Errore nell'eliminazione dell'account")}},S=async(z,B,X)=>{const D=B==="ADMIN"?"USER":"ADMIN";if(confirm(`Vuoi cambiare il ruolo di ${X} da ${B} a ${D}?`))try{await se.updateUserRole(z,D),await w(),alert(` Ruolo aggiornato a ${D}`)}catch{alert("Errore aggiornamento ruolo")}},j=async()=>{try{await se.syncEmails(),await w(),alert(" Email sincronizzate")}catch{alert("Errore sync")}},R=i.filter(z=>z.username?.toLowerCase().includes(d.toLowerCase())||z.email?.toLowerCase().includes(d.toLowerCase()));return r?c.jsx("div",{className:"flex items-center justify-center h-96",children:c.jsx("div",{className:"text-white",children:"Caricamento utenti..."})}):c.jsxs("div",{className:"space-y-6 animate-fade-in text-white",children:[c.jsx("div",{className:"border-l-4 border-[#dfff00] pl-6 py-2",children:c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-black italic text-white mb-1",children:"GESTIONE UTENTI"}),c.jsxs("p",{className:"text-sm text-gray-400 font-bold uppercase tracking-widest",children:[i.length," Account Attivi"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:j,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all font-black text-[10px] uppercase tracking-widest text-[#dfff00]",children:"Sync Emails"}),c.jsx("button",{onClick:w,className:"px-4 py-2 bg-[#dfff00] text-black border border-[#dfff00] rounded-xl hover:scale-105 transition-all font-black text-[10px] uppercase tracking-widest",children:" Aggiorna"})]})]})}),c.jsx("div",{className:"bg-black/40 border border-white/10 rounded-2xl p-2",children:c.jsx("input",{type:"text",placeholder:"CERCA UTENTE O EMAIL...",value:d,onChange:z=>h(z.target.value),className:"w-full bg-transparent px-4 py-3 text-white placeholder-gray-600 font-bold uppercase text-sm outline-none"})}),c.jsx("div",{className:"overflow-x-auto rounded-3xl border border-white/10 bg-black/40",children:R.length===0?c.jsx("div",{className:"text-center py-12 text-gray-500 font-bold uppercase tracking-widest",children:"Nessun utente trovato"}):c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:c.jsxs("tr",{className:"text-gray-400 text-left",children:[c.jsx("th",{className:"px-6 py-4 font-black uppercase tracking-widest text-[10px]",children:"Utente"}),c.jsx("th",{className:"px-6 py-4 font-black uppercase tracking-widest text-[10px]",children:"Email"}),c.jsx("th",{className:"px-6 py-4 font-black uppercase tracking-widest text-[10px]",children:"Tokens"}),c.jsx("th",{className:"px-6 py-4 font-black uppercase tracking-widest text-[10px]",children:"Ruolo"}),c.jsx("th",{className:"px-6 py-4 font-black uppercase tracking-widest text-[10px] text-center",children:"Azioni"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:R.map(z=>c.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[c.jsx("td",{className:"px-6 py-4 font-black italic text-lg",children:z.username}),c.jsx("td",{className:"px-6 py-4 text-gray-400 font-mono text-xs",children:z.email||"N/A"}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"font-black text-[#dfff00] text-lg",children:z.tokens}),c.jsx("span",{className:"text-gray-600 text-[9px] font-black uppercase",children:"FTK"})]})}),c.jsx("td",{className:"px-6 py-4",children:c.jsx("button",{onClick:()=>S(z.id,z.role,z.username),className:`px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest border transition-all ${z.role==="ADMIN"?"bg-red-500/10 text-red-500 border-red-500/30 hover:bg-red-500 hover:text-white":"bg-[#dfff00]/10 text-[#dfff00] border-[#dfff00]/30 hover:bg-[#dfff00] hover:text-black"}`,children:z.role})}),c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex gap-2 justify-center opacity-50 group-hover:opacity-100 transition-opacity",children:[c.jsx("button",{onClick:()=>g(f===z.id?null:z.id),className:"w-8 h-8 flex items-center justify-center bg-white/5 border border-white/10 rounded-lg text-[#dfff00] hover:bg-[#dfff00] hover:text-black transition-all",title:"Tokens",children:""}),c.jsx("button",{onClick:()=>x(z.id,z.username),className:"w-8 h-8 flex items-center justify-center bg-white/5 border border-white/10 rounded-lg text-red-500 hover:bg-red-500 hover:text-white transition-all",title:"Elimina",children:""})]})})]},z.id))})]})}),f&&c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:c.jsxs("div",{className:"bg-[#0a0a0a] border-2 border-[#dfff00] rounded-[30px] p-8 w-full max-w-md shadow-[0_0_50px_rgba(223,255,0,0.2)] space-y-6",onClick:z=>z.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-xl font-black italic text-white",children:"GESTIONE TOKEN"}),c.jsx("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-white",children:""})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest mb-2",children:"Utente Selezionato"}),c.jsx("p",{className:"text-3xl font-black text-white italic",children:R.find(z=>z.id===f)?.username})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-[#dfff00]/70",children:"Modifica Saldo"}),c.jsx("input",{type:"number",value:p,onChange:z=>b(z.target.value),placeholder:"0",autoFocus:!0,className:"w-full bg-black border-2 border-white/10 rounded-xl px-4 py-4 text-center text-white font-black text-2xl focus:border-[#dfff00] outline-none"}),c.jsx("p",{className:"text-[9px] text-gray-500 text-center",children:"Usa valori negativi per sottrarre (es. -50)"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>b("0"),className:"py-4 rounded-xl font-black text-xs uppercase tracking-widest border border-white/10 text-gray-400 hover:bg-white/10 hover:text-white transition-all",children:"Annulla"}),c.jsx("button",{onClick:()=>v(f,parseInt(p)),className:"py-4 rounded-xl font-black text-xs uppercase tracking-widest bg-[#dfff00] text-black hover:scale-105 transition-all shadow-[0_0_20px_rgba(223,255,0,0.3)]",children:"Conferma"})]})]})})]})},bx=({onToggleView:i,initialTab:n="MATCHDAY"})=>{const[r,l]=Y.useState(n),[d,h]=Y.useState(null),[f,g]=Y.useState(!1);Y.useEffect(()=>{se.getMatchday().then(h)},[]);const p=v=>{try{const x=new Date(v);if(isNaN(x.getTime()))return"";const S=x.getTimezoneOffset()*6e4;return new Date(x.getTime()-S).toISOString().slice(0,16)}catch{return v.slice(0,16)}},b=(v,x,S)=>{if(!d)return;const j=[...d.matches];j[v]={...j[v],[x]:S.toUpperCase()},h({...d,matches:j}),se.updateMatch(v,j[v])},w=v=>{if(!d)return;const x=parseInt(v)||0;h({...d,superJackpot:x}),se.updateSuperJackpot(x)};return d?c.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] -mx-4 -mt-4 md:-mx-8 md:-mt-8 p-4 md:p-10 animate-fade-in text-white relative",children:[c.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-20",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 border-b border-white/10 pb-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8 w-full md:w-auto",children:[c.jsx("h2",{className:"text-4xl md:text-5xl font-black italic tracking-tighter text-white",children:"ADMIN CONSOLE"}),c.jsxs("div",{className:"flex bg-white/5 p-1.5 rounded-2xl border border-white/10 w-full md:w-auto overflow-x-auto",children:[c.jsx("button",{onClick:()=>l("MATCHDAY"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-xl text-[10px] md:text-xs font-black uppercase tracking-widest transition-all ${r==="MATCHDAY"?"bg-[#dfff00] text-black shadow-[0_0_20px_rgba(223,255,0,0.3)]":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:" 1X2 GESTIONE"}),c.jsx("button",{onClick:()=>l("SURVIVAL"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-xl text-[10px] md:text-xs font-black uppercase tracking-widest transition-all ${r==="SURVIVAL"?"bg-[#dfff00] text-black shadow-[0_0_20px_rgba(223,255,0,0.3)]":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:" SURVIVAL"}),c.jsx("button",{onClick:()=>l("USERS"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-xl text-[10px] md:text-xs font-black uppercase tracking-widest transition-all ${r==="USERS"?"bg-[#dfff00] text-black shadow-[0_0_20px_rgba(223,255,0,0.3)]":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:" UTENTI"}),c.jsx("button",{onClick:()=>l("SYSTEM"),className:`flex-1 md:flex-none px-6 py-2.5 rounded-xl text-[10px] md:text-xs font-black uppercase tracking-widest transition-all ${r==="SYSTEM"?"bg-red-500 text-white shadow-[0_0_20px_rgba(239,68,68,0.3)]":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:" SYSTEM"})]})]}),i&&c.jsx("button",{onClick:i,className:"w-full md:w-auto bg-transparent text-[#dfff00] px-8 py-3 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-[#dfff00]/10 hover:scale-105 active:scale-95 transition-all border border-[#dfff00] shadow-[0_0_15px_rgba(223,255,0,0.1)]",children:"RETURN HOME"})]}),r==="MATCHDAY"?c.jsxs("div",{className:"space-y-6 animate-fade-in",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-transparent text-white p-5 md:p-8 rounded-[24px] border-2 border-[#dfff00] shadow-[0_0_20px_rgba(223,255,0,0.1)] space-y-4 relative overflow-hidden group",children:[c.jsx("div",{className:"absolute inset-0 bg-[#dfff00]/5 -z-10 group-hover:bg-[#dfff00]/10 transition-colors duration-500"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-[#dfff00]/80",children:" Super Jackpot"}),c.jsx("input",{type:"number",value:d.superJackpot,onChange:v=>w(v.target.value),className:"bg-black/50 border border-white/10 rounded-xl px-5 py-3 w-full text-white font-black text-3xl outline-none focus:border-[#dfff00] focus:shadow-[0_0_15px_rgba(223,255,0,0.2)] transition-all"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{className:"text-[9px] font-black uppercase tracking-widest text-[#dfff00]/80",children:" Deadline Giornata (Ora Locale)"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"datetime-local",value:p(d.deadline),onChange:async v=>{const x=v.target.value,j=new Date(x).toISOString();h({...d,deadline:j}),await se.updateDeadline(j);const R=await se.getMatchday();h(R)},className:"bg-black/50 border border-white/10 rounded-xl px-5 py-3 w-full text-white font-black text-lg outline-none focus:border-[#dfff00] focus:shadow-[0_0_15px_rgba(223,255,0,0.2)] transition-all cursor-pointer"}),c.jsx("div",{className:"absolute top-1/2 right-6 -translate-y-1/2 pointer-events-none text-2xl opacity-50",children:""})]}),c.jsx("p",{className:"text-[9px] font-bold opacity-30 uppercase tracking-widest text-white",children:"Sincronizzazione orario attiva"}),c.jsx("div",{className:"mt-3 flex items-center gap-3",children:d.betsLocked?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"px-3 py-1 rounded-full bg-red-600 text-black font-black text-[10px] uppercase",children:"Scommesse CHIUSE"}),c.jsx("button",{onClick:async()=>{if(!confirm("Sbloccare le scommesse per questa giornata?"))return;const v=await se.setBetLock(!1);if(v&&v.success){const x=await se.getMatchday();h(x),alert("Scommesse sbloccate.")}else alert("Errore: "+(v?.message||"Operazione fallita"))},className:"px-3 py-2 rounded-xl bg-amber-600 text-black font-black uppercase text-xs tracking-widest hover:bg-amber-500 transition-all",children:"Sblocca Inserimenti"})]}):c.jsx("span",{className:"px-3 py-1 rounded-full bg-green-600 text-black font-black text-[10px] uppercase",children:"Scommesse APERTE"})})]})]}),c.jsxs("div",{className:"bg-transparent p-5 md:p-8 rounded-[24px] border-2 border-white/20 hover:border-white/40 transition-colors shadow-2xl flex flex-col justify-center items-center text-center relative overflow-hidden",children:[c.jsx("h3",{className:"text-white text-2xl font-black italic uppercase tracking-tighter mb-5",children:"Azioni Rapide"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:[c.jsx("button",{onClick:async()=>{if(confirm("Reset completo giornata?")){await se.resetMatchday();const v=await se.getMatchday();h(v)}},className:"flex-1 bg-transparent text-red-500 py-4 rounded-2xl font-black text-xs uppercase tracking-widest border border-red-500/50 hover:bg-red-500 hover:text-white hover:border-red-500 hover:shadow-[0_0_20px_rgba(239,68,68,0.4)] transition-all",children:" Reset"}),c.jsx("button",{onClick:async()=>{if(confirm("Archiviare giornata? Questo PROCESSER AUTOMATICAMENTE anche il round Survival!")){const v=await se.archiveMatchday();let x=v.message;v.survivalStats&&(x+=`

 SURVIVAL:
- Eliminati: ${v.survivalStats.eliminated}
- Avanzati: ${v.survivalStats.advanced}`),alert(x);const S=await se.getMatchday();h(S)}},className:"flex-1 bg-transparent text-[#dfff00] py-4 rounded-2xl font-black text-xs uppercase tracking-widest border border-[#dfff00]/50 hover:bg-[#dfff00] hover:text-black hover:border-[#dfff00] hover:shadow-[0_0_20px_rgba(223,255,0,0.4)] transition-all",children:" Archivia & Processa"})]})]})]}),c.jsxs("div",{className:"bg-transparent rounded-[24px] p-5 md:p-8 border-2 border-white/10 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-[#dfff00] to-transparent opacity-50"}),c.jsxs("h3",{className:"text-2xl font-black italic uppercase tracking-tighter mb-6 text-white flex items-center gap-4",children:["Match Editor ",c.jsx("span",{className:"text-[10px] font-bold bg-[#dfff00] text-black px-2 py-0.5 rounded-full not-italic tracking-normal",children:"Active"})]}),c.jsx("div",{className:"grid gap-4",children:d.matches.map((v,x)=>c.jsxs("div",{className:"bg-white/5 p-4 md:p-6 rounded-2xl border border-white/5 hover:border-[#dfff00]/30 transition-all flex flex-col lg:flex-row items-center gap-5 group",children:[c.jsxs("div",{className:"flex items-center gap-3 w-full lg:w-auto",children:[c.jsxs("span",{className:"text-3xl font-black italic text-white/10 group-hover:text-[#dfff00]/20 font-mono transition-colors",children:["#",x+1]}),c.jsx("div",{className:"lg:hidden bg-black/40 px-3 py-1 rounded-full text-[9px] font-black uppercase text-gray-400 border border-white/5 flex-1 text-center",children:v.league})]}),c.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 md:grid-cols-[1fr_auto_1fr] items-center gap-3",children:[c.jsx("input",{type:"text",value:v.home,onChange:S=>b(x,"home",S.target.value),className:"bg-black/40 border border-white/10 rounded-xl px-5 py-3 text-white font-black text-lg text-center md:text-left focus:border-[#dfff00] outline-none transition-colors"}),c.jsx("span",{className:"text-[#dfff00] font-black italic text-xs opacity-40 text-center",children:"VS"}),c.jsx("input",{type:"text",value:v.away,onChange:S=>b(x,"away",S.target.value),className:"bg-black/40 border border-white/10 rounded-xl px-5 py-3 text-white font-black text-lg text-center md:text-right focus:border-[#dfff00] outline-none transition-colors"})]}),c.jsx("div",{className:"hidden lg:block bg-black/40 px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest text-gray-400 border border-white/5 min-w-[100px] text-center",children:v.league}),c.jsxs("div",{className:"flex gap-2 bg-black/40 p-2 rounded-xl border border-white/10 w-full lg:w-auto",children:[["1","X","2"].map(S=>c.jsx("button",{onClick:()=>{se.updateMatchResult(x,S);const j=[...d.results];j[x]=S,h({...d,results:j})},className:`h-14 lg:h-11 w-full lg:w-11 rounded-lg font-black text-lg transition-all ${d.results[x]===S?"bg-[#dfff00] text-black shadow-[0_0_12px_rgba(223,255,0,0.4)] scale-105":"text-gray-500 hover:text-white hover:bg-white/10"}`,children:S},S)),c.jsx("button",{onClick:()=>{se.updateMatchResult(x,null);const S=[...d.results];S[x]=null,h({...d,results:S})},className:"h-14 lg:h-11 w-14 lg:w-11 rounded-lg bg-transparent border border-white/5 flex items-center justify-center text-gray-600 hover:text-red-500 hover:border-red-500/50 transition-all",children:""})]})]},x))})]})]}):r==="USERS"?c.jsx("div",{className:"bg-transparent rounded-[30px] p-4 md:p-10 border-2 border-white/10 relative overflow-hidden",children:c.jsx(gx,{})}):r==="SYSTEM"?c.jsx("div",{className:"space-y-8 animate-fade-in",children:c.jsx("div",{className:"bg-transparent rounded-[30px] p-10 border-2 border-red-500/20 relative overflow-hidden text-center",children:c.jsxs("div",{className:"max-w-xl mx-auto space-y-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-4xl font-black italic text-red-500 uppercase tracking-tighter",children:"RESET TOTALE SISTEMA"}),c.jsxs("p",{className:"text-gray-400 font-bold uppercase tracking-widest leading-relaxed",children:["Questa azione ",c.jsx("span",{className:"text-red-500",children:"eliminer permanentemente"})," tutte le scommesse, i duelli, le stagioni survival e le giornate create. Inoltre, resetter i token e le statistiche di ",c.jsx("span",{className:"text-white",children:"tutti gli utenti"})," ai valori predefiniti per il lancio ufficiale."]})]}),c.jsxs("div",{className:"bg-red-500/5 p-6 rounded-3xl border border-red-500/10",children:[c.jsx("p",{className:"text-[10px] font-black text-red-500 uppercase tracking-[0.3em] mb-4",children:" ATTENZIONE: AZIONE IRREVERSIBILE "}),c.jsx("button",{onClick:async()=>{if(prompt("Per confermare il reset totale, scrivi 'RESET' (senza virgolette):")!=="RESET")return;g(!0);const x=await se.resetSystem();g(!1),x.success?(alert(x.message),window.location.reload()):alert("Errore durante il reset: "+x.message)},disabled:f,className:"w-full bg-red-600 text-white py-5 rounded-2xl font-black text-xl hover:bg-red-500 hover:scale-105 active:scale-95 transition-all shadow-[0_0_30px_rgba(239,68,68,0.3)] border border-red-400/30",children:f?"RESETTING...":"ESIGUI RESET DI LANCIO"})]})]})})}):c.jsx("div",{className:"bg-transparent rounded-[30px] p-4 md:p-10 border-2 border-white/10 relative overflow-hidden",children:c.jsx(px,{})})]}),c.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0a0a0a]/90 backdrop-blur-md p-4 z-50 flex items-center justify-center gap-6 border-t border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-[#dfff00] shadow-[0_0_10px_#dfff00]"}),c.jsx("span",{className:"text-[#dfff00] text-[10px] font-black uppercase tracking-[0.3em] opacity-80",children:"System Online"})]}),c.jsx("div",{className:"w-px h-4 bg-white/10 hidden md:block"}),c.jsx("span",{className:"hidden md:block text-gray-600 text-[9px] font-black uppercase tracking-[0.2em]",children:"Secure Admin Connection"})]})]}):c.jsxs("div",{className:"fixed inset-0 flex flex-col items-center justify-center bg-[#dfff00] p-6 text-black z-[1000]",children:[c.jsx("h1",{className:"text-4xl md:text-6xl font-black italic tracking-tighter mb-8",children:"ADMIN CONSOLE"}),c.jsxs("div",{className:"bg-black text-[#dfff00] p-10 rounded-[40px] shadow-[20px_20px_0px_rgba(0,0,0,0.2)] text-center max-w-md w-full border-4 border-black",children:[c.jsx("p",{className:"font-bold uppercase tracking-widest text-sm mb-8 opacity-70",children:"Nessuna giornata attiva detected."}),c.jsx("button",{onClick:async()=>{if(!window.confirm("Attivare nuova giornata?"))return;if(g(!0),(await se.createMatchday()).success){const x=await se.getMatchday();h(x)}g(!1)},disabled:f,className:"w-full bg-[#dfff00] text-black py-5 rounded-2xl font-black text-xl hover:scale-105 active:scale-95 transition-all shadow-[8px_8px_0px_black] border-2 border-black",children:f?"WAIT...":"INITIALIZE SYSTEM"}),i&&c.jsx("button",{onClick:i,className:"mt-8 text-xs font-black uppercase tracking-widest border-b border-[#dfff00]/30 pb-1",children:" BACK TO HOME"})]})]})};var vx=a0();const yx=t0(vx);function xx(i){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}const wx=i=>{switch(i){case"success":return jx;case"info":return Ex;case"warning":return Nx;case"error":return Tx;default:return null}},_x=Array(12).fill(0),Sx=({visible:i,className:n})=>Q.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":i},Q.createElement("div",{className:"sonner-spinner"},_x.map((r,l)=>Q.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),jx=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Nx=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Ex=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Tx=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kx=Q.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Q.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Q.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ax=()=>{const[i,n]=Q.useState(document.hidden);return Q.useEffect(()=>{const r=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),i};let mu=1;class Ox{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const r=this.subscribers.indexOf(n);this.subscribers.splice(r,1)}),this.publish=n=>{this.subscribers.forEach(r=>r(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var r;const{message:l,...d}=n,h=typeof n?.id=="number"||((r=n.id)==null?void 0:r.length)>0?n.id:mu++,f=this.toasts.find(p=>p.id===h),g=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),f?this.toasts=this.toasts.map(p=>p.id===h?(this.publish({...p,...n,id:h,title:l}),{...p,...n,id:h,dismissible:g,title:l}):p):this.addToast({title:l,...d,dismissible:g,id:h}),h},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:n,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(l=>l({id:r.id,dismiss:!0}))}),n),this.message=(n,r)=>this.create({...r,message:n}),this.error=(n,r)=>this.create({...r,message:n,type:"error"}),this.success=(n,r)=>this.create({...r,type:"success",message:n}),this.info=(n,r)=>this.create({...r,type:"info",message:n}),this.warning=(n,r)=>this.create({...r,type:"warning",message:n}),this.loading=(n,r)=>this.create({...r,type:"loading",message:n}),this.promise=(n,r)=>{if(!r)return;let l;r.loading!==void 0&&(l=this.create({...r,promise:n,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const d=Promise.resolve(n instanceof Function?n():n);let h=l!==void 0,f;const g=d.then(async b=>{if(f=["resolve",b],Q.isValidElement(b))h=!1,this.create({id:l,type:"default",message:b});else if(Cx(b)&&!b.ok){h=!1;const v=typeof r.error=="function"?await r.error(`HTTP error! status: ${b.status}`):r.error,x=typeof r.description=="function"?await r.description(`HTTP error! status: ${b.status}`):r.description,j=typeof v=="object"&&!Q.isValidElement(v)?v:{message:v};this.create({id:l,type:"error",description:x,...j})}else if(b instanceof Error){h=!1;const v=typeof r.error=="function"?await r.error(b):r.error,x=typeof r.description=="function"?await r.description(b):r.description,j=typeof v=="object"&&!Q.isValidElement(v)?v:{message:v};this.create({id:l,type:"error",description:x,...j})}else if(r.success!==void 0){h=!1;const v=typeof r.success=="function"?await r.success(b):r.success,x=typeof r.description=="function"?await r.description(b):r.description,j=typeof v=="object"&&!Q.isValidElement(v)?v:{message:v};this.create({id:l,type:"success",description:x,...j})}}).catch(async b=>{if(f=["reject",b],r.error!==void 0){h=!1;const w=typeof r.error=="function"?await r.error(b):r.error,v=typeof r.description=="function"?await r.description(b):r.description,S=typeof w=="object"&&!Q.isValidElement(w)?w:{message:w};this.create({id:l,type:"error",description:v,...S})}}).finally(()=>{h&&(this.dismiss(l),l=void 0),r.finally==null||r.finally.call(r)}),p=()=>new Promise((b,w)=>g.then(()=>f[0]==="reject"?w(f[1]):b(f[1])).catch(w));return typeof l!="string"&&typeof l!="number"?{unwrap:p}:Object.assign(l,{unwrap:p})},this.custom=(n,r)=>{const l=r?.id||mu++;return this.create({jsx:n(l),id:l,...r}),l},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Dt=new Ox,Rx=(i,n)=>{const r=n?.id||mu++;return Dt.addToast({title:i,...n,id:r}),r},Cx=i=>i&&typeof i=="object"&&"ok"in i&&typeof i.ok=="boolean"&&"status"in i&&typeof i.status=="number",Ux=Rx,Dx=()=>Dt.toasts,zx=()=>Dt.getActiveToasts(),Wm=Object.assign(Ux,{success:Dt.success,info:Dt.info,warning:Dt.warning,error:Dt.error,custom:Dt.custom,message:Dt.message,promise:Dt.promise,dismiss:Dt.dismiss,loading:Dt.loading},{getHistory:Dx,getToasts:zx});xx("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function xl(i){return i.label!==void 0}const Mx=3,Bx="24px",Lx="16px",Fm=4e3,qx=356,Hx=14,Ix=45,$x=200;function ya(...i){return i.filter(Boolean).join(" ")}function Vx(i){const[n,r]=i.split("-"),l=[];return n&&l.push(n),r&&l.push(r),l}const Gx=i=>{var n,r,l,d,h,f,g,p,b;const{invert:w,toast:v,unstyled:x,interacting:S,setHeights:j,visibleToasts:R,heights:z,index:B,toasts:X,expanded:D,removeToast:Z,defaultRichColors:he,closeButton:M,style:G,cancelButtonStyle:re,actionButtonStyle:V,className:Te="",descriptionClassName:ke="",duration:Ve,position:Qe,gap:tt,expandByDefault:at,classNames:C,icons:K,closeButtonAriaLabel:ae="Close toast"}=i,[xe,ge]=Q.useState(null),[N,H]=Q.useState(null),[$,J]=Q.useState(!1),[P,le]=Q.useState(!1),[be,pe]=Q.useState(!1),[Re,da]=Q.useState(!1),[xa,ha]=Q.useState(!1),[ei,aa]=Q.useState(0),[Xs,Jn]=Q.useState(0),yn=Q.useRef(v.duration||Ve||Fm),Js=Q.useRef(null),zt=Q.useRef(null),Qs=B===0,Zs=B+1<=R,xt=v.type,Va=v.dismissible!==!1,wt=v.className||"",kl=v.descriptionClassName||"",xn=Q.useMemo(()=>z.findIndex(ue=>ue.toastId===v.id)||0,[z,v.id]),ti=Q.useMemo(()=>{var ue;return(ue=v.closeButton)!=null?ue:M},[v.closeButton,M]),wn=Q.useMemo(()=>v.duration||Ve||Fm,[v.duration,Ve]),Ps=Q.useRef(0),wa=Q.useRef(0),ai=Q.useRef(0),Ga=Q.useRef(null),[_n,_t]=Qe.split("-"),na=Q.useMemo(()=>z.reduce((ue,qe,rt)=>rt>=xn?ue:ue+qe.height,0),[z,xn]),pt=Ax(),Al=v.invert||w,Ws=xt==="loading";wa.current=Q.useMemo(()=>xn*tt+na,[xn,na]),Q.useEffect(()=>{yn.current=wn},[wn]),Q.useEffect(()=>{J(!0)},[]),Q.useEffect(()=>{const ue=zt.current;if(ue){const qe=ue.getBoundingClientRect().height;return Jn(qe),j(rt=>[{toastId:v.id,height:qe,position:v.position},...rt]),()=>j(rt=>rt.filter(gt=>gt.toastId!==v.id))}},[j,v.id]),Q.useLayoutEffect(()=>{if(!$)return;const ue=zt.current,qe=ue.style.height;ue.style.height="auto";const rt=ue.getBoundingClientRect().height;ue.style.height=qe,Jn(rt),j(gt=>gt.find(Ie=>Ie.toastId===v.id)?gt.map(Ie=>Ie.toastId===v.id?{...Ie,height:rt}:Ie):[{toastId:v.id,height:rt,position:v.position},...gt])},[$,v.title,v.description,j,v.id,v.jsx,v.action,v.cancel]);const fa=Q.useCallback(()=>{le(!0),aa(wa.current),j(ue=>ue.filter(qe=>qe.toastId!==v.id)),setTimeout(()=>{Z(v)},$x)},[v,Z,j,wa]);Q.useEffect(()=>{if(v.promise&&xt==="loading"||v.duration===1/0||v.type==="loading")return;let ue;return D||S||pt?(()=>{if(ai.current<Ps.current){const gt=new Date().getTime()-Ps.current;yn.current=yn.current-gt}ai.current=new Date().getTime()})():yn.current!==1/0&&(Ps.current=new Date().getTime(),ue=setTimeout(()=>{v.onAutoClose==null||v.onAutoClose.call(v,v),fa()},yn.current)),()=>clearTimeout(ue)},[D,S,v,xt,pt,fa]),Q.useEffect(()=>{v.delete&&(fa(),v.onDismiss==null||v.onDismiss.call(v,v))},[fa,v.delete]);function Qn(){var ue;if(K?.loading){var qe;return Q.createElement("div",{className:ya(C?.loader,v==null||(qe=v.classNames)==null?void 0:qe.loader,"sonner-loader"),"data-visible":xt==="loading"},K.loading)}return Q.createElement(Sx,{className:ya(C?.loader,v==null||(ue=v.classNames)==null?void 0:ue.loader),visible:xt==="loading"})}const Zn=v.icon||K?.[xt]||wx(xt);var Sn,ma;return Q.createElement("li",{tabIndex:0,ref:zt,className:ya(Te,wt,C?.toast,v==null||(n=v.classNames)==null?void 0:n.toast,C?.default,C?.[xt],v==null||(r=v.classNames)==null?void 0:r[xt]),"data-sonner-toast":"","data-rich-colors":(Sn=v.richColors)!=null?Sn:he,"data-styled":!(v.jsx||v.unstyled||x),"data-mounted":$,"data-promise":!!v.promise,"data-swiped":xa,"data-removed":P,"data-visible":Zs,"data-y-position":_n,"data-x-position":_t,"data-index":B,"data-front":Qs,"data-swiping":be,"data-dismissible":Va,"data-type":xt,"data-invert":Al,"data-swipe-out":Re,"data-swipe-direction":N,"data-expanded":!!(D||at&&$),"data-testid":v.testId,style:{"--index":B,"--toasts-before":B,"--z-index":X.length-B,"--offset":`${P?ei:wa.current}px`,"--initial-height":at?"auto":`${Xs}px`,...G,...v.style},onDragEnd:()=>{pe(!1),ge(null),Ga.current=null},onPointerDown:ue=>{ue.button!==2&&(Ws||!Va||(Js.current=new Date,aa(wa.current),ue.target.setPointerCapture(ue.pointerId),ue.target.tagName!=="BUTTON"&&(pe(!0),Ga.current={x:ue.clientX,y:ue.clientY})))},onPointerUp:()=>{var ue,qe,rt;if(Re||!Va)return;Ga.current=null;const gt=Number(((ue=zt.current)==null?void 0:ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ya=Number(((qe=zt.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ie=new Date().getTime()-((rt=Js.current)==null?void 0:rt.getTime()),jt=xe==="x"?gt:Ya,jn=Math.abs(jt)/Ie;if(Math.abs(jt)>=Ix||jn>.11){aa(wa.current),v.onDismiss==null||v.onDismiss.call(v,v),H(xe==="x"?gt>0?"right":"left":Ya>0?"down":"up"),fa(),da(!0);return}else{var Nt,Et;(Nt=zt.current)==null||Nt.style.setProperty("--swipe-amount-x","0px"),(Et=zt.current)==null||Et.style.setProperty("--swipe-amount-y","0px")}ha(!1),pe(!1),ge(null)},onPointerMove:ue=>{var qe,rt,gt;if(!Ga.current||!Va||((qe=window.getSelection())==null?void 0:qe.toString().length)>0)return;const Ie=ue.clientY-Ga.current.y,jt=ue.clientX-Ga.current.x;var jn;const Nt=(jn=i.swipeDirections)!=null?jn:Vx(Qe);!xe&&(Math.abs(jt)>1||Math.abs(Ie)>1)&&ge(Math.abs(jt)>Math.abs(Ie)?"x":"y");let Et={x:0,y:0};const Pn=sa=>1/(1.5+Math.abs(sa)/20);if(xe==="y"){if(Nt.includes("top")||Nt.includes("bottom"))if(Nt.includes("top")&&Ie<0||Nt.includes("bottom")&&Ie>0)Et.y=Ie;else{const sa=Ie*Pn(Ie);Et.y=Math.abs(sa)<Math.abs(Ie)?sa:Ie}}else if(xe==="x"&&(Nt.includes("left")||Nt.includes("right")))if(Nt.includes("left")&&jt<0||Nt.includes("right")&&jt>0)Et.x=jt;else{const sa=jt*Pn(jt);Et.x=Math.abs(sa)<Math.abs(jt)?sa:jt}(Math.abs(Et.x)>0||Math.abs(Et.y)>0)&&ha(!0),(rt=zt.current)==null||rt.style.setProperty("--swipe-amount-x",`${Et.x}px`),(gt=zt.current)==null||gt.style.setProperty("--swipe-amount-y",`${Et.y}px`)}},ti&&!v.jsx&&xt!=="loading"?Q.createElement("button",{"aria-label":ae,"data-disabled":Ws,"data-close-button":!0,onClick:Ws||!Va?()=>{}:()=>{fa(),v.onDismiss==null||v.onDismiss.call(v,v)},className:ya(C?.closeButton,v==null||(l=v.classNames)==null?void 0:l.closeButton)},(ma=K?.close)!=null?ma:kx):null,(xt||v.icon||v.promise)&&v.icon!==null&&(K?.[xt]!==null||v.icon)?Q.createElement("div",{"data-icon":"",className:ya(C?.icon,v==null||(d=v.classNames)==null?void 0:d.icon)},v.promise||v.type==="loading"&&!v.icon?v.icon||Qn():null,v.type!=="loading"?Zn:null):null,Q.createElement("div",{"data-content":"",className:ya(C?.content,v==null||(h=v.classNames)==null?void 0:h.content)},Q.createElement("div",{"data-title":"",className:ya(C?.title,v==null||(f=v.classNames)==null?void 0:f.title)},v.jsx?v.jsx:typeof v.title=="function"?v.title():v.title),v.description?Q.createElement("div",{"data-description":"",className:ya(ke,kl,C?.description,v==null||(g=v.classNames)==null?void 0:g.description)},typeof v.description=="function"?v.description():v.description):null),Q.isValidElement(v.cancel)?v.cancel:v.cancel&&xl(v.cancel)?Q.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||re,onClick:ue=>{xl(v.cancel)&&Va&&(v.cancel.onClick==null||v.cancel.onClick.call(v.cancel,ue),fa())},className:ya(C?.cancelButton,v==null||(p=v.classNames)==null?void 0:p.cancelButton)},v.cancel.label):null,Q.isValidElement(v.action)?v.action:v.action&&xl(v.action)?Q.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||V,onClick:ue=>{xl(v.action)&&(v.action.onClick==null||v.action.onClick.call(v.action,ue),!ue.defaultPrevented&&fa())},className:ya(C?.actionButton,v==null||(b=v.classNames)==null?void 0:b.actionButton)},v.action.label):null)};function e0(){if(typeof window>"u"||typeof document>"u")return"ltr";const i=document.documentElement.getAttribute("dir");return i==="auto"||!i?window.getComputedStyle(document.documentElement).direction:i}function Yx(i,n){const r={};return[i,n].forEach((l,d)=>{const h=d===1,f=h?"--mobile-offset":"--offset",g=h?Lx:Bx;function p(b){["top","right","bottom","left"].forEach(w=>{r[`${f}-${w}`]=typeof b=="number"?`${b}px`:b})}typeof l=="number"||typeof l=="string"?p(l):typeof l=="object"?["top","right","bottom","left"].forEach(b=>{l[b]===void 0?r[`${f}-${b}`]=g:r[`${f}-${b}`]=typeof l[b]=="number"?`${l[b]}px`:l[b]}):p(g)}),r}const Kx=Q.forwardRef(function(n,r){const{id:l,invert:d,position:h="bottom-right",hotkey:f=["altKey","KeyT"],expand:g,closeButton:p,className:b,offset:w,mobileOffset:v,theme:x="light",richColors:S,duration:j,style:R,visibleToasts:z=Mx,toastOptions:B,dir:X=e0(),gap:D=Hx,icons:Z,containerAriaLabel:he="Notifications"}=n,[M,G]=Q.useState([]),re=Q.useMemo(()=>l?M.filter($=>$.toasterId===l):M.filter($=>!$.toasterId),[M,l]),V=Q.useMemo(()=>Array.from(new Set([h].concat(re.filter($=>$.position).map($=>$.position)))),[re,h]),[Te,ke]=Q.useState([]),[Ve,Qe]=Q.useState(!1),[tt,at]=Q.useState(!1),[C,K]=Q.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=Q.useRef(null),xe=f.join("+").replace(/Key/g,"").replace(/Digit/g,""),ge=Q.useRef(null),N=Q.useRef(!1),H=Q.useCallback($=>{G(J=>{var P;return(P=J.find(le=>le.id===$.id))!=null&&P.delete||Dt.dismiss($.id),J.filter(({id:le})=>le!==$.id)})},[]);return Q.useEffect(()=>Dt.subscribe($=>{if($.dismiss){requestAnimationFrame(()=>{G(J=>J.map(P=>P.id===$.id?{...P,delete:!0}:P))});return}setTimeout(()=>{yx.flushSync(()=>{G(J=>{const P=J.findIndex(le=>le.id===$.id);return P!==-1?[...J.slice(0,P),{...J[P],...$},...J.slice(P+1)]:[$,...J]})})})}),[M]),Q.useEffect(()=>{if(x!=="system"){K(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;const $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:J})=>{K(J?"dark":"light")})}catch{$.addListener(({matches:P})=>{try{K(P?"dark":"light")}catch(le){console.error(le)}})}},[x]),Q.useEffect(()=>{M.length<=1&&Qe(!1)},[M]),Q.useEffect(()=>{const $=J=>{var P;if(f.every(pe=>J[pe]||J.code===pe)){var be;Qe(!0),(be=ae.current)==null||be.focus()}J.code==="Escape"&&(document.activeElement===ae.current||(P=ae.current)!=null&&P.contains(document.activeElement))&&Qe(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[f]),Q.useEffect(()=>{if(ae.current)return()=>{ge.current&&(ge.current.focus({preventScroll:!0}),ge.current=null,N.current=!1)}},[ae.current]),Q.createElement("section",{ref:r,"aria-label":`${he} ${xe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},V.map(($,J)=>{var P;const[le,be]=$.split("-");return re.length?Q.createElement("ol",{key:$,dir:X==="auto"?e0():X,tabIndex:-1,ref:ae,className:b,"data-sonner-toaster":!0,"data-sonner-theme":C,"data-y-position":le,"data-x-position":be,style:{"--front-toast-height":`${((P=Te[0])==null?void 0:P.height)||0}px`,"--width":`${qx}px`,"--gap":`${D}px`,...R,...Yx(w,v)},onBlur:pe=>{N.current&&!pe.currentTarget.contains(pe.relatedTarget)&&(N.current=!1,ge.current&&(ge.current.focus({preventScroll:!0}),ge.current=null))},onFocus:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||N.current||(N.current=!0,ge.current=pe.relatedTarget)},onMouseEnter:()=>Qe(!0),onMouseMove:()=>Qe(!0),onMouseLeave:()=>{tt||Qe(!1)},onDragEnd:()=>Qe(!1),onPointerDown:pe=>{pe.target instanceof HTMLElement&&pe.target.dataset.dismissible==="false"||at(!0)},onPointerUp:()=>at(!1)},re.filter(pe=>!pe.position&&J===0||pe.position===$).map((pe,Re)=>{var da,xa;return Q.createElement(Gx,{key:pe.id,icons:Z,index:Re,toast:pe,defaultRichColors:S,duration:(da=B?.duration)!=null?da:j,className:B?.className,descriptionClassName:B?.descriptionClassName,invert:d,visibleToasts:z,closeButton:(xa=B?.closeButton)!=null?xa:p,interacting:tt,position:$,style:B?.style,unstyled:B?.unstyled,classNames:B?.classNames,cancelButtonStyle:B?.cancelButtonStyle,actionButtonStyle:B?.actionButtonStyle,closeButtonAriaLabel:B?.closeButtonAriaLabel,removeToast:H,toasts:re.filter(ha=>ha.position==pe.position),heights:Te.filter(ha=>ha.position==pe.position),setHeights:ke,expandByDefault:g,gap:D,expanded:Ve,swipeDirections:n.swipeDirections})})):null}))});function Xx(){const[i,n]=Y.useState(null),[r,l]=Y.useState(!0),[d,h]=Y.useState("MATCHDAY"),f=()=>{se.logout(),n(null),l(!1)};Y.useEffect(()=>{(async()=>{const x=await se.getCurrentUser();x&&n(x)})()},[]);const g=()=>{l(!r)},p=()=>{l(!1),h("USERS")};Y.useEffect(()=>{if(!i)return;const v=F.channel("global-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"duels",filter:`opponent_id=eq.${i.id}`},x=>{console.log("New duel received!",x),Wm(" Nuova Sfida!",{description:"Qualcuno ti ha sfidato a duello.",action:{label:"Vedi",onClick:()=>window.location.reload()}})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"matchdays"},x=>{x.new&&x.new.results&&JSON.stringify(x.new.results)!==JSON.stringify(x.old.results)&&Wm(" Risultati Aggiornati!",{description:"Controlla la classifica per vedere i punteggi."})}).subscribe();return()=>{F.removeChannel(v)}},[i]);const b=async()=>{const v=await se.getCurrentUser();v&&n({...v})},w=i?.role==="ADMIN"&&!r;return c.jsxs(Yg,{user:i,onLogout:f,onToggleView:g,isUserMode:r,onAdminUsers:p,children:[c.jsx(Kx,{position:"top-center",theme:"dark"}),i?w?c.jsx(bx,{onToggleView:g,initialTab:d}):c.jsx(mx,{user:i,onBalanceUpdate:b,onLogout:f}):c.jsx(ky,{onLogin:n})]})}Gg.createRoot(document.getElementById("root")).render(c.jsx(Y.StrictMode,{children:c.jsx(Xx,{})}));
